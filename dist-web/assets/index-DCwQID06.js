(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var pp={exports:{}},$u={};var wE;function $1(){if(wE)return $u;wE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return $u.Fragment=e,$u.jsx=t,$u.jsxs=t,$u}var TE;function Y1(){return TE||(TE=1,pp.exports=$1()),pp.exports}var w=Y1(),yp={exports:{}},Ie={};var AE;function X1(){if(AE)return Ie;AE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),A=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,N={};function K(M,te,ae){this.props=M,this.context=te,this.refs=N,this.updater=ae||O}K.prototype.isReactComponent={},K.prototype.setState=function(M,te){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,te,"setState")},K.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function H(){}H.prototype=K.prototype;function j(M,te,ae){this.props=M,this.context=te,this.refs=N,this.updater=ae||O}var oe=j.prototype=new H;oe.constructor=j,L(oe,K.prototype),oe.isPureReactComponent=!0;var ye=Array.isArray;function de(){}var C={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(M,te,ae){var ge=ae.ref;return{$$typeof:n,type:M,key:te,ref:ge!==void 0?ge:null,props:ae}}function V(M,te){return R(M.type,te,M.props)}function U(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function F(M){var te={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return te[ae]})}var k=/\/+/g;function Lt(M,te){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):te.toString(36)}function Wt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(de,de):(M.status="pending",M.then(function(te){M.status==="pending"&&(M.status="fulfilled",M.value=te)},function(te){M.status==="pending"&&(M.status="rejected",M.reason=te)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ee(M,te,ae,ge,Te){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var ze=!1;if(M===null)ze=!0;else switch(Ne){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(M.$$typeof){case n:case e:ze=!0;break;case _:return ze=M._init,ee(ze(M._payload),te,ae,ge,Te)}}if(ze)return Te=Te(M),ze=ge===""?"."+Lt(M,0):ge,ye(Te)?(ae="",ze!=null&&(ae=ze.replace(k,"$&/")+"/"),ee(Te,te,ae,"",function(Ar){return Ar})):Te!=null&&(U(Te)&&(Te=V(Te,ae+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(k,"$&/")+"/")+ze)),te.push(Te)),1;ze=0;var Zt=ge===""?".":ge+":";if(ye(M))for(var vt=0;vt<M.length;vt++)ge=M[vt],Ne=Zt+Lt(ge,vt),ze+=ee(ge,te,ae,Ne,Te);else if(vt=x(M),typeof vt=="function")for(M=vt.call(M),vt=0;!(ge=M.next()).done;)ge=ge.value,Ne=Zt+Lt(ge,vt++),ze+=ee(ge,te,ae,Ne,Te);else if(Ne==="object"){if(typeof M.then=="function")return ee(Wt(M),te,ae,ge,Te);throw te=String(M),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ce(M,te,ae){if(M==null)return M;var ge=[],Te=0;return ee(M,ge,"","",function(Ne){return te.call(ae,Ne,Te++)}),ge}function Ee(M){if(M._status===-1){var te=M._result;te=te(),te.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=te)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Xe={map:ce,forEach:function(M,te,ae){ce(M,function(){te.apply(this,arguments)},ae)},count:function(M){var te=0;return ce(M,function(){te++}),te},toArray:function(M){return ce(M,function(te){return te})||[]},only:function(M){if(!U(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ie.Activity=b,Ie.Children=Xe,Ie.Component=K,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=j,Ie.StrictMode=i,Ie.Suspense=f,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},Ie.cache=function(M){return function(){return M.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(M,te,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ge=L({},M.props),Te=M.key;if(te!=null)for(Ne in te.key!==void 0&&(Te=""+te.key),te)!I.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(ge[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)ge.children=ae;else if(1<Ne){for(var ze=Array(Ne),Zt=0;Zt<Ne;Zt++)ze[Zt]=arguments[Zt+2];ge.children=ze}return R(M.type,Te,ge)},Ie.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ie.createElement=function(M,te,ae){var ge,Te={},Ne=null;if(te!=null)for(ge in te.key!==void 0&&(Ne=""+te.key),te)I.call(te,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Te[ge]=te[ge]);var ze=arguments.length-2;if(ze===1)Te.children=ae;else if(1<ze){for(var Zt=Array(ze),vt=0;vt<ze;vt++)Zt[vt]=arguments[vt+2];Te.children=Zt}if(M&&M.defaultProps)for(ge in ze=M.defaultProps,ze)Te[ge]===void 0&&(Te[ge]=ze[ge]);return R(M,Ne,Te)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:d,render:M}},Ie.isValidElement=U,Ie.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Ee}},Ie.memo=function(M,te){return{$$typeof:p,type:M,compare:te===void 0?null:te}},Ie.startTransition=function(M){var te=C.T,ae={};C.T=ae;try{var ge=M(),Te=C.S;Te!==null&&Te(ae,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(de,qe)}catch(Ne){qe(Ne)}finally{te!==null&&ae.types!==null&&(te.types=ae.types),C.T=te}},Ie.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ie.use=function(M){return C.H.use(M)},Ie.useActionState=function(M,te,ae){return C.H.useActionState(M,te,ae)},Ie.useCallback=function(M,te){return C.H.useCallback(M,te)},Ie.useContext=function(M){return C.H.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M,te){return C.H.useDeferredValue(M,te)},Ie.useEffect=function(M,te){return C.H.useEffect(M,te)},Ie.useEffectEvent=function(M){return C.H.useEffectEvent(M)},Ie.useId=function(){return C.H.useId()},Ie.useImperativeHandle=function(M,te,ae){return C.H.useImperativeHandle(M,te,ae)},Ie.useInsertionEffect=function(M,te){return C.H.useInsertionEffect(M,te)},Ie.useLayoutEffect=function(M,te){return C.H.useLayoutEffect(M,te)},Ie.useMemo=function(M,te){return C.H.useMemo(M,te)},Ie.useOptimistic=function(M,te){return C.H.useOptimistic(M,te)},Ie.useReducer=function(M,te,ae){return C.H.useReducer(M,te,ae)},Ie.useRef=function(M){return C.H.useRef(M)},Ie.useState=function(M){return C.H.useState(M)},Ie.useSyncExternalStore=function(M,te,ae){return C.H.useSyncExternalStore(M,te,ae)},Ie.useTransition=function(){return C.H.useTransition()},Ie.version="19.2.0",Ie}var SE;function Ay(){return SE||(SE=1,yp.exports=X1()),yp.exports}var B=Ay(),_p={exports:{}},Yu={},vp={exports:{}},bp={};var IE;function J1(){return IE||(IE=1,(function(n){function e(ee,ce){var Ee=ee.length;ee.push(ce);e:for(;0<Ee;){var qe=Ee-1>>>1,Xe=ee[qe];if(0<a(Xe,ce))ee[qe]=ce,ee[Ee]=Xe,Ee=qe;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],Ee=ee.pop();if(Ee!==ce){ee[0]=Ee;e:for(var qe=0,Xe=ee.length,M=Xe>>>1;qe<M;){var te=2*(qe+1)-1,ae=ee[te],ge=te+1,Te=ee[ge];if(0>a(ae,Ee))ge<Xe&&0>a(Te,ae)?(ee[qe]=Te,ee[ge]=Ee,qe=ge):(ee[qe]=ae,ee[te]=Ee,qe=te);else if(ge<Xe&&0>a(Te,Ee))ee[qe]=Te,ee[ge]=Ee,qe=ge;else break e}}return ce}function a(ee,ce){var Ee=ee.sortIndex-ce.sortIndex;return Ee!==0?Ee:ee.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],p=[],_=1,b=null,A=3,x=!1,O=!1,L=!1,N=!1,K=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function oe(ee){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=ee)i(p),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(p)}}function ye(ee){if(L=!1,oe(ee),!O)if(t(f)!==null)O=!0,de||(de=!0,F());else{var ce=t(p);ce!==null&&Wt(ye,ce.startTime-ee)}}var de=!1,C=-1,I=5,R=-1;function V(){return N?!0:!(n.unstable_now()-R<I)}function U(){if(N=!1,de){var ee=n.unstable_now();R=ee;var ce=!0;try{e:{O=!1,L&&(L=!1,H(C),C=-1),x=!0;var Ee=A;try{t:{for(oe(ee),b=t(f);b!==null&&!(b.expirationTime>ee&&V());){var qe=b.callback;if(typeof qe=="function"){b.callback=null,A=b.priorityLevel;var Xe=qe(b.expirationTime<=ee);if(ee=n.unstable_now(),typeof Xe=="function"){b.callback=Xe,oe(ee),ce=!0;break t}b===t(f)&&i(f),oe(ee)}else i(f);b=t(f)}if(b!==null)ce=!0;else{var M=t(p);M!==null&&Wt(ye,M.startTime-ee),ce=!1}}break e}finally{b=null,A=Ee,x=!1}ce=void 0}}finally{ce?F():de=!1}}}var F;if(typeof j=="function")F=function(){j(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Lt=k.port2;k.port1.onmessage=U,F=function(){Lt.postMessage(null)}}else F=function(){K(U,0)};function Wt(ee,ce){C=K(function(){ee(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(ee){switch(A){case 1:case 2:case 3:var ce=3;break;default:ce=A}var Ee=A;A=ce;try{return ee()}finally{A=Ee}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ee=A;A=ee;try{return ce()}finally{A=Ee}},n.unstable_scheduleCallback=function(ee,ce,Ee){var qe=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?qe+Ee:qe):Ee=qe,ee){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ee+Xe,ee={id:_++,callback:ce,priorityLevel:ee,startTime:Ee,expirationTime:Xe,sortIndex:-1},Ee>qe?(ee.sortIndex=Ee,e(p,ee),t(f)===null&&ee===t(p)&&(L?(H(C),C=-1):L=!0,Wt(ye,Ee-qe))):(ee.sortIndex=Xe,e(f,ee),O||x||(O=!0,de||(de=!0,F()))),ee},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ee){var ce=A;return function(){var Ee=A;A=ce;try{return ee.apply(this,arguments)}finally{A=Ee}}}})(bp)),bp}var xE;function W1(){return xE||(xE=1,vp.exports=J1()),vp.exports}var Ep={exports:{}},dn={};var RE;function Z1(){if(RE)return dn;RE=1;var n=Ay();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:f,containerInfo:p,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(f,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,_)},dn.flushSync=function(f){var p=u.T,_=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=p,i.p=_,i.d.f()}},dn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},dn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},dn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var _=p.as,b=d(_,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:x}):_==="script"&&i.d.X(f,{crossOrigin:b,integrity:A,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},dn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=d(_,p.crossOrigin);i.d.L(f,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(f,p){if(typeof f=="string")if(p){var _=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},dn.requestFormReset=function(f){i.d.r(f)},dn.unstable_batchedUpdates=function(f,p){return f(p)},dn.useFormState=function(f,p,_){return u.H.useFormState(f,p,_)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var CE;function eC(){if(CE)return Ep.exports;CE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ep.exports=Z1(),Ep.exports}var NE;function tC(){if(NE)return Yu;NE=1;var n=W1(),e=Ay(),t=eC();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return f(m),r;if(g===c)return f(m),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=m,c=g;else{for(var v=!1,T=m.child;T;){if(T===o){v=!0,o=m,c=g;break}if(T===c){v=!0,c=m,o=g;break}T=T.sibling}if(!v){for(T=g.child;T;){if(T===o){v=!0,o=g,c=m;break}if(T===c){v=!0,c=g,o=m;break}T=T.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function _(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=_(r),s!==null)return s;r=r.sibling}return null}var b=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),j=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var k=Symbol.for("react.client.reference");function Lt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===k?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case K:return"Profiler";case N:return"StrictMode";case ye:return"Suspense";case de:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case O:return"Portal";case j:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case oe:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return s=r.displayName||null,s!==null?s:Lt(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return Lt(r(s))}catch{}}return null}var Wt=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},qe=[],Xe=-1;function M(r){return{current:r}}function te(r){0>Xe||(r.current=qe[Xe],qe[Xe]=null,Xe--)}function ae(r,s){Xe++,qe[Xe]=r.current,r.current=s}var ge=M(null),Te=M(null),Ne=M(null),ze=M(null);function Zt(r,s){switch(ae(Ne,s),ae(Te,r),ae(ge,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Hb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Hb(s),r=Kb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(ge),ae(ge,r)}function vt(){te(ge),te(Te),te(Ne)}function Ar(r){r.memoizedState!==null&&ae(ze,r);var s=ge.current,o=Kb(s,r.type);s!==o&&(ae(Te,r),ae(ge,o))}function Hr(r){Te.current===r&&(te(ge),te(Te)),ze.current===r&&(te(ze),Gu._currentValue=Ee)}var sa,uo;function lr(r){if(sa===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);sa=s&&s[1]||"",uo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sa+r+uo}var aa=!1;function co(r,s){if(!r||aa)return"";aa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(J){var Y=J}Reflect.construct(r,[],re)}else{try{re.call()}catch(J){Y=J}r.call(re.prototype)}}else{try{throw Error()}catch(J){Y=J}(re=r())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(J){if(J&&Y&&typeof J.stack=="string")return[J.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),v=g[0],T=g[1];if(v&&T){var D=v.split(`
`),$=T.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<$.length&&!$[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===$.length)for(c=D.length-1,m=$.length-1;1<=c&&0<=m&&D[c]!==$[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==$[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==$[m]){var Z=`
`+D[c].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=c&&0<=m);break}}}finally{aa=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?lr(o):""}function fm(r,s){switch(r.tag){case 26:case 27:case 5:return lr(r.type);case 16:return lr("Lazy");case 13:return r.child!==s&&s!==null?lr("Suspense Fallback"):lr("Suspense");case 19:return lr("SuspenseList");case 0:case 15:return co(r.type,!1);case 11:return co(r.type.render,!1);case 1:return co(r.type,!0);case 31:return lr("Activity");default:return""}}function nh(r){try{var s="",o=null;do s+=fm(r,o),o=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ho=Object.prototype.hasOwnProperty,oa=n.unstable_scheduleCallback,fo=n.unstable_cancelCallback,mm=n.unstable_shouldYield,Ql=n.unstable_requestPaint,en=n.unstable_now,rh=n.unstable_getCurrentPriorityLevel,Ut=n.unstable_ImmediatePriority,Ft=n.unstable_UserBlockingPriority,Kr=n.unstable_NormalPriority,ih=n.unstable_LowPriority,$l=n.unstable_IdlePriority,gm=n.log,la=n.unstable_setDisableYieldValue,Bi=null,cn=null;function Qn(r){if(typeof gm=="function"&&la(r),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(Bi,r)}catch{}}var _n=Math.clz32?Math.clz32:sh,pm=Math.log,Yl=Math.LN2;function sh(r){return r>>>=0,r===0?32:31-(pm(r)/Yl|0)|0}var ua=256,Sr=262144,Fi=4194304;function ur(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function $n(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var m=0,g=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var T=c&134217727;return T!==0?(c=T&~g,c!==0?m=ur(c):(v&=T,v!==0?m=ur(v):o||(o=T&~r,o!==0&&(m=ur(o))))):(T=c&~g,T!==0?m=ur(T):v!==0?m=ur(v):o||(o=c&~r,o!==0&&(m=ur(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function qi(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function mo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xl(){var r=Fi;return Fi<<=1,(Fi&62914560)===0&&(Fi=4194304),r}function Qr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Gi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function tn(r,s,o,c,m,g){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var T=r.entanglements,D=r.expirationTimes,$=r.hiddenUpdates;for(o=v&~o;0<o;){var Z=31-_n(o),re=1<<Z;T[Z]=0,D[Z]=-1;var Y=$[Z];if(Y!==null)for($[Z]=null,Z=0;Z<Y.length;Z++){var J=Y[Z];J!==null&&(J.lane&=-536870913)}o&=~re}c!==0&&Jl(r,c,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(v&~s))}function Jl(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-_n(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&261930}function Hi(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-_n(o),m=1<<c;m&s|r[c]&s&&(r[c]|=s),o&=~m}}function Ki(r,s){var o=s&-s;return o=(o&42)!==0?1:Wl(o),(o&(r.suspendedLanes|s))!==0?0:o}function Wl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Zl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function $r(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:gE(r.type))}function ah(r,s){var o=ce.p;try{return ce.p=r,s()}finally{ce.p=o}}var Ir=Math.random().toString(36).slice(2),Et="__reactFiber$"+Ir,nn="__reactProps$"+Ir,xr="__reactContainer$"+Ir,Qi="__reactEvents$"+Ir,Rr="__reactListeners$"+Ir,oh="__reactHandles$"+Ir,eu="__reactResources$"+Ir,Yr="__reactMarker$"+Ir;function ca(r){delete r[Et],delete r[nn],delete r[Qi],delete r[Rr],delete r[oh]}function Xr(r){var s=r[Et];if(s)return s;for(var o=r.parentNode;o;){if(s=o[xr]||o[Et]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Zb(r);r!==null;){if(o=r[Et])return o;r=Zb(r)}return s}r=o,o=r.parentNode}return null}function Jr(r){if(r=r[Et]||r[xr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function ha(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function cr(r){var s=r[eu];return s||(s=r[eu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function It(r){r[Yr]=!0}var go=new Set,$i={};function vn(r,s){Cr(r,s),Cr(r+"Capture",s)}function Cr(r,s){for($i[r]=s,r=0;r<s.length;r++)go.add(s[r])}var ym=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tu={},nu={};function lh(r){return ho.call(nu,r)?!0:ho.call(tu,r)?!1:ym.test(r)?nu[r]=!0:(tu[r]=!0,!1)}function Yi(r,s,o){if(lh(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Xi(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yn(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function uh(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _m(r,s,o){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(v){o=""+v,g.call(this,v)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function po(r){if(!r._valueTracker){var s=uh(r)?"checked":"value";r._valueTracker=_m(r,s,""+r[s])}}function ru(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=uh(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function yo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Wr=/[\n"\\]/g;function wt(r){return r.replace(Wr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ji(r,s,o,c,m,g,v,T){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),s!=null?v==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+bn(s)):r.value!==""+bn(s)&&(r.value=""+bn(s)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),s!=null?_o(r,v,bn(s)):o!=null?_o(r,v,bn(o)):c!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.name=""+bn(T):r.removeAttribute("name")}function da(r,s,o,c,m,g,v,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){po(r);return}o=o!=null?""+bn(o):"",s=s!=null?""+bn(s):o,T||s===r.value||(r.value=s),r.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=T?r.checked:!!c,r.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),po(r)}function _o(r,s,o){s==="number"&&yo(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ge(r,s,o,c){if(r=r.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=s.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&c&&(r[o].defaultSelected=!0)}else{for(o=""+bn(o),s=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,c&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function fa(r,s,o){if(s!=null&&(s=""+bn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+bn(o):""}function Wi(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(Wt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=bn(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c),po(r)}function Xn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var vm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iu(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||vm.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function ch(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&o[m]!==c&&iu(r,m,c)}else for(var g in s)s.hasOwnProperty(g)&&iu(r,g,s[g])}function su(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Em=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(r){return Em.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function qt(){}var vo=null;function bo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zr=null,Pn=null;function hh(r){var s=Jr(r);if(s&&(r=s.stateNode)){var o=r[nn]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ji(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+wt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var m=c[nn]||null;if(!m)throw Error(i(90));Ji(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&ru(c)}break e;case"textarea":fa(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ge(r,!!o.multiple,s,!1)}}}var au=!1;function dh(r,s,o){if(au)return r(s,o);au=!0;try{var c=r(s);return c}finally{if(au=!1,(Zr!==null||Pn!==null)&&(ld(),Zr&&(s=Zr,r=Pn,Pn=Zr=null,hh(s),r)))for(s=0;s<r.length;s++)hh(r[s])}}function Sn(r,s){var o=r.stateNode;if(o===null)return null;var c=o[nn]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(hr)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{ou=!1}var Mn=null,Eo=null,kr=null;function Zi(){if(kr)return kr;var r,s=Eo,o=s.length,c,m="value"in Mn?Mn.value:Mn.textContent,g=m.length;for(r=0;r<o&&s[r]===m[r];r++);var v=o-r;for(c=1;c<=v&&s[o-c]===m[g-c];c++);return kr=m.slice(r,1<c?1-c:void 0)}function ma(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function es(){return!0}function ut(){return!1}function hn(r){function s(o,c,m,g,v){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(o=r[T],this[T]=o?o(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?es:ut,this.isPropagationStopped=ut,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),s}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=hn(ei),ts=b({},ei,{view:0,detail:0}),fh=hn(ts),ns,wo,En,pa=b({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==En&&(En&&r.type==="mousemove"?(ns=r.screenX-En.screenX,wo=r.screenY-En.screenY):wo=ns=0,En=r),ns)},movementY:function(r){return"movementY"in r?r.movementY:wo}}),mh=hn(pa),ya=b({},pa,{dataTransfer:0}),gh=hn(ya),lu=b({},ts,{relatedTarget:0}),rs=hn(lu),ph=b({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),To=hn(ph),wm=b({},ei,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),yh=hn(wm),_a=b({},ei,{data:0}),uu=hn(_a),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=hu[r])?!!s[r]:!1}function is(){return vh}var bh=b({},ts,{key:function(r){if(r.key){var s=_h[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ma(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?cu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(r){return r.type==="keypress"?ma(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ma(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Eh=hn(bh),ti=b({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),du=hn(ti),wh=b({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),Th=hn(wh),Ah=b({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ao=hn(Ah),wn=b({},pa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Sh=hn(wn),Ih=b({},ei,{newState:0,oldState:0}),ss=hn(Ih),h=[9,13,27,32],y=hr&&"CompositionEvent"in window,E=null;hr&&"documentMode"in document&&(E=document.documentMode);var S=hr&&"TextEvent"in window&&!E,G=hr&&(!y||E&&8<E&&11>=E),W=" ",le=!1;function Je(r,s){switch(r){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var De=!1;function Gt(r,s){switch(r){case"compositionend":return Dt(s);case"keypress":return s.which!==32?null:(le=!0,W);case"textInput":return r=s.data,r===W&&le?null:r;default:return null}}function Ht(r,s){if(De)return r==="compositionend"||!y&&Je(r,s)?(r=Zi(),kr=Eo=Mn=null,De=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return G&&s.locale!=="ko"?null:s.data;default:return null}}var as={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!as[r.type]:s==="textarea"}function va(r,s,o,c){Zr?Pn?Pn.push(c):Pn=[c]:Zr=c,s=gd(s,"onChange"),0<s.length&&(o=new ga("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var ni=null,fu=null;function ER(r){jb(r,0)}function xh(r){var s=ha(r);if(ru(s))return r}function iv(r,s){if(r==="change")return s}var sv=!1;if(hr){var Tm;if(hr){var Am="oninput"in document;if(!Am){var av=document.createElement("div");av.setAttribute("oninput","return;"),Am=typeof av.oninput=="function"}Tm=Am}else Tm=!1;sv=Tm&&(!document.documentMode||9<document.documentMode)}function ov(){ni&&(ni.detachEvent("onpropertychange",lv),fu=ni=null)}function lv(r){if(r.propertyName==="value"&&xh(fu)){var s=[];va(s,fu,r,bo(r)),dh(ER,s)}}function wR(r,s,o){r==="focusin"?(ov(),ni=s,fu=o,ni.attachEvent("onpropertychange",lv)):r==="focusout"&&ov()}function TR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xh(fu)}function AR(r,s){if(r==="click")return xh(s)}function SR(r,s){if(r==="input"||r==="change")return xh(s)}function IR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Ln=typeof Object.is=="function"?Object.is:IR;function mu(r,s){if(Ln(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!ho.call(s,m)||!Ln(r[m],s[m]))return!1}return!0}function uv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cv(r,s){var o=uv(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=uv(o)}}function hv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?hv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function dv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=yo(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=yo(r.document)}return s}function Sm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var xR=hr&&"documentMode"in document&&11>=document.documentMode,So=null,Im=null,gu=null,xm=!1;function fv(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xm||So==null||So!==yo(c)||(c=So,"selectionStart"in c&&Sm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),gu&&mu(gu,c)||(gu=c,c=gd(Im,"onSelect"),0<c.length&&(s=new ga("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=So)))}function ba(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Io={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},Rm={},mv={};hr&&(mv=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Ea(r){if(Rm[r])return Rm[r];if(!Io[r])return r;var s=Io[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in mv)return Rm[r]=s[o];return r}var gv=Ea("animationend"),pv=Ea("animationiteration"),yv=Ea("animationstart"),RR=Ea("transitionrun"),CR=Ea("transitionstart"),NR=Ea("transitioncancel"),_v=Ea("transitionend"),vv=new Map,Cm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cm.push("scrollEnd");function dr(r,s){vv.set(r,s),vn(s,[r])}var Rh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Jn=[],xo=0,Nm=0;function Ch(){for(var r=xo,s=Nm=xo=0;s<r;){var o=Jn[s];Jn[s++]=null;var c=Jn[s];Jn[s++]=null;var m=Jn[s];Jn[s++]=null;var g=Jn[s];if(Jn[s++]=null,c!==null&&m!==null){var v=c.pending;v===null?m.next=m:(m.next=v.next,v.next=m),c.pending=m}g!==0&&bv(o,m,g)}}function Nh(r,s,o,c){Jn[xo++]=r,Jn[xo++]=s,Jn[xo++]=o,Jn[xo++]=c,Nm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Dm(r,s,o,c){return Nh(r,s,o,c),Dh(r)}function wa(r,s){return Nh(r,null,null,s),Dh(r)}function bv(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&s!==null&&(m=31-_n(o),r=g.hiddenUpdates,c=r[m],c===null?r[m]=[s]:c.push(s),s.lane=o|536870912),g):null}function Dh(r){if(50<Lu)throw Lu=0,zg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ro={};function DR(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(r,s,o,c){return new DR(r,s,o,c)}function km(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ri(r,s){var o=r.alternate;return o===null?(o=Un(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ev(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function kh(r,s,o,c,m,g){var v=0;if(c=r,typeof r=="function")km(r)&&(v=1);else if(typeof r=="string")v=M1(r,o,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Un(31,o,s,m),r.elementType=R,r.lanes=g,r;case L:return Ta(o.children,m,g,s);case N:v=8,m|=24;break;case K:return r=Un(12,o,s,m|2),r.elementType=K,r.lanes=g,r;case ye:return r=Un(13,o,s,m),r.elementType=ye,r.lanes=g,r;case de:return r=Un(19,o,s,m),r.elementType=de,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:v=10;break e;case H:v=9;break e;case oe:v=11;break e;case C:v=14;break e;case I:v=16,c=null;break e}v=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Un(v,o,s,m),s.elementType=r,s.type=c,s.lanes=g,s}function Ta(r,s,o,c){return r=Un(7,r,c,s),r.lanes=o,r}function Vm(r,s,o){return r=Un(6,r,null,s),r.lanes=o,r}function wv(r){var s=Un(18,null,null,0);return s.stateNode=r,s}function Om(r,s,o){return s=Un(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Tv=new WeakMap;function Wn(r,s){if(typeof r=="object"&&r!==null){var o=Tv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:nh(s)},Tv.set(r,s),s)}return{value:r,source:s,stack:nh(s)}}var Co=[],No=0,Vh=null,pu=0,Zn=[],er=0,os=null,Vr=1,Or="";function ii(r,s){Co[No++]=pu,Co[No++]=Vh,Vh=r,pu=s}function Av(r,s,o){Zn[er++]=Vr,Zn[er++]=Or,Zn[er++]=os,os=r;var c=Vr;r=Or;var m=32-_n(c)-1;c&=~(1<<m),o+=1;var g=32-_n(s)+m;if(30<g){var v=m-m%5;g=(c&(1<<v)-1).toString(32),c>>=v,m-=v,Vr=1<<32-_n(s)+m|o<<m|c,Or=g+r}else Vr=1<<g|o<<m|c,Or=r}function Pm(r){r.return!==null&&(ii(r,1),Av(r,1,0))}function Mm(r){for(;r===Vh;)Vh=Co[--No],Co[No]=null,pu=Co[--No],Co[No]=null;for(;r===os;)os=Zn[--er],Zn[er]=null,Or=Zn[--er],Zn[er]=null,Vr=Zn[--er],Zn[er]=null}function Sv(r,s){Zn[er++]=Vr,Zn[er++]=Or,Zn[er++]=os,Vr=s.id,Or=s.overflow,os=r}var rn=null,ct=null,Be=!1,ls=null,tr=!1,Lm=Error(i(519));function us(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yu(Wn(s,r)),Lm}function Iv(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Et]=r,s[nn]=c,o){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(o=0;o<ju.length;o++)Oe(ju[o],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),da(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),Wi(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||qb(s.textContent,o)?(c.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),c.onScroll!=null&&Oe("scroll",s),c.onScrollEnd!=null&&Oe("scrollend",s),c.onClick!=null&&(s.onclick=qt),s=!0):s=!1,s||us(r,!0)}function xv(r){for(rn=r.return;rn;)switch(rn.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:rn=rn.return}}function Do(r){if(r!==rn)return!1;if(!Be)return xv(r),Be=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||tp(r.type,r.memoizedProps)),o=!o),o&&ct&&us(r),xv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=Wb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=Wb(r)}else s===27?(s=ct,Ts(r.type)?(r=ap,ap=null,ct=r):ct=s):ct=rn?rr(r.stateNode.nextSibling):null;return!0}function Aa(){ct=rn=null,Be=!1}function Um(){var r=ls;return r!==null&&(Nn===null?Nn=r:Nn.push.apply(Nn,r),ls=null),r}function yu(r){ls===null?ls=[r]:ls.push(r)}var jm=M(null),Sa=null,si=null;function cs(r,s,o){ae(jm,s._currentValue),s._currentValue=o}function ai(r){r._currentValue=jm.current,te(jm)}function zm(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function Bm(r,s,o,c){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var v=m.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=m;for(var D=0;D<s.length;D++)if(T.context===s[D]){g.lanes|=o,T=g.alternate,T!==null&&(T.lanes|=o),zm(g.return,o,r),c||(v=null);break e}g=T.next}}else if(m.tag===18){if(v=m.return,v===null)throw Error(i(341));v.lanes|=o,g=v.alternate,g!==null&&(g.lanes|=o),zm(v,o,r),v=null}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===r){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}}function ko(r,s,o,c){r=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var v=m.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=m.type;Ln(m.pendingProps.value,v.value)||(r!==null?r.push(T):r=[T])}}else if(m===ze.current){if(v=m.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Gu):r=[Gu])}m=m.return}r!==null&&Bm(s,r,o,c),s.flags|=262144}function Oh(r){for(r=r.firstContext;r!==null;){if(!Ln(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ia(r){Sa=r,si=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function sn(r){return Rv(Sa,r)}function Ph(r,s){return Sa===null&&Ia(r),Rv(r,s)}function Rv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},si===null){if(r===null)throw Error(i(308));si=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else si=si.next=s;return o}var kR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},VR=n.unstable_scheduleCallback,OR=n.unstable_NormalPriority,kt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fm(){return{controller:new kR,data:new Map,refCount:0}}function _u(r){r.refCount--,r.refCount===0&&VR(OR,function(){r.controller.abort()})}var vu=null,qm=0,Vo=0,Oo=null;function PR(r,s){if(vu===null){var o=vu=[];qm=0,Vo=Kg(),Oo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return qm++,s.then(Cv,Cv),s}function Cv(){if(--qm===0&&vu!==null){Oo!==null&&(Oo.status="fulfilled");var r=vu;vu=null,Vo=0,Oo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function MR(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var Nv=ee.S;ee.S=function(r,s){fb=en(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&PR(r,s),Nv!==null&&Nv(r,s)};var xa=M(null);function Gm(){var r=xa.current;return r!==null?r:at.pooledCache}function Mh(r,s){s===null?ae(xa,xa.current):ae(xa,s.pool)}function Dv(){var r=Gm();return r===null?null:{parent:kt._currentValue,pool:r}}var Po=Error(i(460)),Hm=Error(i(474)),Lh=Error(i(542)),Uh={then:function(){}};function kv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Vv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(qt,qt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Pv(r),r;default:if(typeof s.status=="string")s.then(qt,qt);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Pv(r),r}throw Ca=s,Po}}function Ra(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ca=o,Po):o}}var Ca=null;function Ov(){if(Ca===null)throw Error(i(459));var r=Ca;return Ca=null,r}function Pv(r){if(r===Po||r===Lh)throw Error(i(483))}var Mo=null,bu=0;function jh(r){var s=bu;return bu+=1,Mo===null&&(Mo=[]),Vv(Mo,r,s)}function Eu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function zh(r,s){throw s.$$typeof===A?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Mv(r){function s(z,P){if(r){var Q=z.deletions;Q===null?(z.deletions=[P],z.flags|=16):Q.push(P)}}function o(z,P){if(!r)return null;for(;P!==null;)s(z,P),P=P.sibling;return null}function c(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function m(z,P){return z=ri(z,P),z.index=0,z.sibling=null,z}function g(z,P,Q){return z.index=Q,r?(Q=z.alternate,Q!==null?(Q=Q.index,Q<P?(z.flags|=67108866,P):Q):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function v(z){return r&&z.alternate===null&&(z.flags|=67108866),z}function T(z,P,Q,ne){return P===null||P.tag!==6?(P=Vm(Q,z.mode,ne),P.return=z,P):(P=m(P,Q),P.return=z,P)}function D(z,P,Q,ne){var be=Q.type;return be===L?Z(z,P,Q.props.children,ne,Q.key):P!==null&&(P.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&Ra(be)===P.type)?(P=m(P,Q.props),Eu(P,Q),P.return=z,P):(P=kh(Q.type,Q.key,Q.props,null,z.mode,ne),Eu(P,Q),P.return=z,P)}function $(z,P,Q,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==Q.containerInfo||P.stateNode.implementation!==Q.implementation?(P=Om(Q,z.mode,ne),P.return=z,P):(P=m(P,Q.children||[]),P.return=z,P)}function Z(z,P,Q,ne,be){return P===null||P.tag!==7?(P=Ta(Q,z.mode,ne,be),P.return=z,P):(P=m(P,Q),P.return=z,P)}function re(z,P,Q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Vm(""+P,z.mode,Q),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return Q=kh(P.type,P.key,P.props,null,z.mode,Q),Eu(Q,P),Q.return=z,Q;case O:return P=Om(P,z.mode,Q),P.return=z,P;case I:return P=Ra(P),re(z,P,Q)}if(Wt(P)||F(P))return P=Ta(P,z.mode,Q,null),P.return=z,P;if(typeof P.then=="function")return re(z,jh(P),Q);if(P.$$typeof===j)return re(z,Ph(z,P),Q);zh(z,P)}return null}function Y(z,P,Q,ne){var be=P!==null?P.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return be!==null?null:T(z,P,""+Q,ne);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===be?D(z,P,Q,ne):null;case O:return Q.key===be?$(z,P,Q,ne):null;case I:return Q=Ra(Q),Y(z,P,Q,ne)}if(Wt(Q)||F(Q))return be!==null?null:Z(z,P,Q,ne,null);if(typeof Q.then=="function")return Y(z,P,jh(Q),ne);if(Q.$$typeof===j)return Y(z,P,Ph(z,Q),ne);zh(z,Q)}return null}function J(z,P,Q,ne,be){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(Q)||null,T(P,z,""+ne,be);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return z=z.get(ne.key===null?Q:ne.key)||null,D(P,z,ne,be);case O:return z=z.get(ne.key===null?Q:ne.key)||null,$(P,z,ne,be);case I:return ne=Ra(ne),J(z,P,Q,ne,be)}if(Wt(ne)||F(ne))return z=z.get(Q)||null,Z(P,z,ne,be,null);if(typeof ne.then=="function")return J(z,P,Q,jh(ne),be);if(ne.$$typeof===j)return J(z,P,Q,Ph(P,ne),be);zh(P,ne)}return null}function me(z,P,Q,ne){for(var be=null,He=null,_e=P,Ce=P=0,Me=null;_e!==null&&Ce<Q.length;Ce++){_e.index>Ce?(Me=_e,_e=null):Me=_e.sibling;var Ke=Y(z,_e,Q[Ce],ne);if(Ke===null){_e===null&&(_e=Me);break}r&&_e&&Ke.alternate===null&&s(z,_e),P=g(Ke,P,Ce),He===null?be=Ke:He.sibling=Ke,He=Ke,_e=Me}if(Ce===Q.length)return o(z,_e),Be&&ii(z,Ce),be;if(_e===null){for(;Ce<Q.length;Ce++)_e=re(z,Q[Ce],ne),_e!==null&&(P=g(_e,P,Ce),He===null?be=_e:He.sibling=_e,He=_e);return Be&&ii(z,Ce),be}for(_e=c(_e);Ce<Q.length;Ce++)Me=J(_e,z,Ce,Q[Ce],ne),Me!==null&&(r&&Me.alternate!==null&&_e.delete(Me.key===null?Ce:Me.key),P=g(Me,P,Ce),He===null?be=Me:He.sibling=Me,He=Me);return r&&_e.forEach(function(Rs){return s(z,Rs)}),Be&&ii(z,Ce),be}function we(z,P,Q,ne){if(Q==null)throw Error(i(151));for(var be=null,He=null,_e=P,Ce=P=0,Me=null,Ke=Q.next();_e!==null&&!Ke.done;Ce++,Ke=Q.next()){_e.index>Ce?(Me=_e,_e=null):Me=_e.sibling;var Rs=Y(z,_e,Ke.value,ne);if(Rs===null){_e===null&&(_e=Me);break}r&&_e&&Rs.alternate===null&&s(z,_e),P=g(Rs,P,Ce),He===null?be=Rs:He.sibling=Rs,He=Rs,_e=Me}if(Ke.done)return o(z,_e),Be&&ii(z,Ce),be;if(_e===null){for(;!Ke.done;Ce++,Ke=Q.next())Ke=re(z,Ke.value,ne),Ke!==null&&(P=g(Ke,P,Ce),He===null?be=Ke:He.sibling=Ke,He=Ke);return Be&&ii(z,Ce),be}for(_e=c(_e);!Ke.done;Ce++,Ke=Q.next())Ke=J(_e,z,Ce,Ke.value,ne),Ke!==null&&(r&&Ke.alternate!==null&&_e.delete(Ke.key===null?Ce:Ke.key),P=g(Ke,P,Ce),He===null?be=Ke:He.sibling=Ke,He=Ke);return r&&_e.forEach(function(Q1){return s(z,Q1)}),Be&&ii(z,Ce),be}function rt(z,P,Q,ne){if(typeof Q=="object"&&Q!==null&&Q.type===L&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var be=Q.key;P!==null;){if(P.key===be){if(be=Q.type,be===L){if(P.tag===7){o(z,P.sibling),ne=m(P,Q.props.children),ne.return=z,z=ne;break e}}else if(P.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===I&&Ra(be)===P.type){o(z,P.sibling),ne=m(P,Q.props),Eu(ne,Q),ne.return=z,z=ne;break e}o(z,P);break}else s(z,P);P=P.sibling}Q.type===L?(ne=Ta(Q.props.children,z.mode,ne,Q.key),ne.return=z,z=ne):(ne=kh(Q.type,Q.key,Q.props,null,z.mode,ne),Eu(ne,Q),ne.return=z,z=ne)}return v(z);case O:e:{for(be=Q.key;P!==null;){if(P.key===be)if(P.tag===4&&P.stateNode.containerInfo===Q.containerInfo&&P.stateNode.implementation===Q.implementation){o(z,P.sibling),ne=m(P,Q.children||[]),ne.return=z,z=ne;break e}else{o(z,P);break}else s(z,P);P=P.sibling}ne=Om(Q,z.mode,ne),ne.return=z,z=ne}return v(z);case I:return Q=Ra(Q),rt(z,P,Q,ne)}if(Wt(Q))return me(z,P,Q,ne);if(F(Q)){if(be=F(Q),typeof be!="function")throw Error(i(150));return Q=be.call(Q),we(z,P,Q,ne)}if(typeof Q.then=="function")return rt(z,P,jh(Q),ne);if(Q.$$typeof===j)return rt(z,P,Ph(z,Q),ne);zh(z,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,P!==null&&P.tag===6?(o(z,P.sibling),ne=m(P,Q),ne.return=z,z=ne):(o(z,P),ne=Vm(Q,z.mode,ne),ne.return=z,z=ne),v(z)):o(z,P)}return function(z,P,Q,ne){try{bu=0;var be=rt(z,P,Q,ne);return Mo=null,be}catch(_e){if(_e===Po||_e===Lh)throw _e;var He=Un(29,_e,null,z.mode);return He.lanes=ne,He.return=z,He}finally{}}}var Na=Mv(!0),Lv=Mv(!1),hs=!1;function Km(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ds(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fs(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=Dh(r),bv(r,null,o),s}return Nh(r,c,s,o),Dh(r)}function wu(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Hi(r,o)}}function $m(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=v:g=g.next=v,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Ym=!1;function Tu(){if(Ym){var r=Oo;if(r!==null)throw r}}function Au(r,s,o,c){Ym=!1;var m=r.updateQueue;hs=!1;var g=m.firstBaseUpdate,v=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var D=T,$=D.next;D.next=null,v===null?g=$:v.next=$,v=D;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==v&&(T===null?Z.firstBaseUpdate=$:T.next=$,Z.lastBaseUpdate=D))}if(g!==null){var re=m.baseState;v=0,Z=$=D=null,T=g;do{var Y=T.lane&-536870913,J=Y!==T.lane;if(J?(Pe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Vo&&(Ym=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var me=r,we=T;Y=s;var rt=o;switch(we.tag){case 1:if(me=we.payload,typeof me=="function"){re=me.call(rt,re,Y);break e}re=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=we.payload,Y=typeof me=="function"?me.call(rt,re,Y):me,Y==null)break e;re=b({},re,Y);break e;case 2:hs=!0}}Y=T.callback,Y!==null&&(r.flags|=64,J&&(r.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Y]:J.push(Y))}else J={lane:Y,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?($=Z=J,D=re):Z=Z.next=J,v|=Y;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;J=T,T=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);Z===null&&(D=re),m.baseState=D,m.firstBaseUpdate=$,m.lastBaseUpdate=Z,g===null&&(m.shared.lanes=0),_s|=v,r.lanes=v,r.memoizedState=re}}function Uv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function jv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Uv(o[r],s)}var Lo=M(null),Bh=M(0);function zv(r,s){r=gi,ae(Bh,r),ae(Lo,s),gi=r|s.baseLanes}function Xm(){ae(Bh,gi),ae(Lo,Lo.current)}function Jm(){gi=Bh.current,te(Lo),te(Bh)}var jn=M(null),nr=null;function ms(r){var s=r.alternate;ae(xt,xt.current&1),ae(jn,r),nr===null&&(s===null||Lo.current!==null||s.memoizedState!==null)&&(nr=r)}function Wm(r){ae(xt,xt.current),ae(jn,r),nr===null&&(nr=r)}function Bv(r){r.tag===22?(ae(xt,xt.current),ae(jn,r),nr===null&&(nr=r)):gs()}function gs(){ae(xt,xt.current),ae(jn,jn.current)}function zn(r){te(jn),nr===r&&(nr=null),te(xt)}var xt=M(0);function Fh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ip(o)||sp(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oi=0,xe=null,tt=null,Vt=null,qh=!1,Uo=!1,Da=!1,Gh=0,Su=0,jo=null,LR=0;function Tt(){throw Error(i(321))}function Zm(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Ln(r[o],s[o]))return!1;return!0}function eg(r,s,o,c,m,g){return oi=g,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ee.H=r===null||r.memoizedState===null?A0:gg,Da=!1,g=o(c,m),Da=!1,Uo&&(g=qv(s,o,c,m)),Fv(r),g}function Fv(r){ee.H=Ru;var s=tt!==null&&tt.next!==null;if(oi=0,Vt=tt=xe=null,qh=!1,Su=0,jo=null,s)throw Error(i(300));r===null||Ot||(r=r.dependencies,r!==null&&Oh(r)&&(Ot=!0))}function qv(r,s,o,c){xe=r;var m=0;do{if(Uo&&(jo=null),Su=0,Uo=!1,25<=m)throw Error(i(301));if(m+=1,Vt=tt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ee.H=S0,g=s(o,c)}while(Uo);return g}function UR(){var r=ee.H,s=r.useState()[0];return s=typeof s.then=="function"?Iu(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(xe.flags|=1024),s}function tg(){var r=Gh!==0;return Gh=0,r}function ng(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function rg(r){if(qh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qh=!1}oi=0,Vt=tt=xe=null,Uo=!1,Su=Gh=0,jo=null}function Tn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?xe.memoizedState=Vt=r:Vt=Vt.next=r,Vt}function Rt(){if(tt===null){var r=xe.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=Vt===null?xe.memoizedState:Vt.next;if(s!==null)Vt=s,tt=r;else{if(r===null)throw xe.alternate===null?Error(i(467)):Error(i(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Vt===null?xe.memoizedState=Vt=r:Vt=Vt.next=r}return Vt}function Hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Iu(r){var s=Su;return Su+=1,jo===null&&(jo=[]),r=Vv(jo,r,s),s=xe,(Vt===null?s.memoizedState:Vt.next)===null&&(s=s.alternate,ee.H=s===null||s.memoizedState===null?A0:gg),r}function Kh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Iu(r);if(r.$$typeof===j)return sn(r)}throw Error(i(438,String(r)))}function ig(r){var s=null,o=xe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Hh(),xe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=V;return s.index++,o}function li(r,s){return typeof s=="function"?s(r):s}function Qh(r){var s=Rt();return sg(s,tt,r)}function sg(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var m=r.baseQueue,g=c.pending;if(g!==null){if(m!==null){var v=m.next;m.next=g.next,g.next=v}s.baseQueue=m=g,c.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{s=m.next;var T=v=null,D=null,$=s,Z=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Pe&re)===re:(oi&re)===re){var Y=$.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===Vo&&(Z=!0);else if((oi&Y)===Y){$=$.next,Y===Vo&&(Z=!0);continue}else re={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(T=D=re,v=g):D=D.next=re,xe.lanes|=Y,_s|=Y;re=$.action,Da&&o(g,re),g=$.hasEagerState?$.eagerState:o(g,re)}else Y={lane:re,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(T=D=Y,v=g):D=D.next=Y,xe.lanes|=re,_s|=re;$=$.next}while($!==null&&$!==s);if(D===null?v=g:D.next=T,!Ln(g,r.memoizedState)&&(Ot=!0,Z&&(o=Oo,o!==null)))throw o;r.memoizedState=g,r.baseState=v,r.baseQueue=D,c.lastRenderedState=g}return m===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function ag(r){var s=Rt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var v=m=m.next;do g=r(g,v.action),v=v.next;while(v!==m);Ln(g,s.memoizedState)||(Ot=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function Gv(r,s,o){var c=xe,m=Rt(),g=Be;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var v=!Ln((tt||m).memoizedState,o);if(v&&(m.memoizedState=o,Ot=!0),m=m.queue,ug(Qv.bind(null,c,m,r),[r]),m.getSnapshot!==s||v||Vt!==null&&Vt.memoizedState.tag&1){if(c.flags|=2048,zo(9,{destroy:void 0},Kv.bind(null,c,m,o,s),null),at===null)throw Error(i(349));g||(oi&127)!==0||Hv(c,s,o)}return o}function Hv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=xe.updateQueue,s===null?(s=Hh(),xe.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Kv(r,s,o,c){s.value=o,s.getSnapshot=c,$v(s)&&Yv(r)}function Qv(r,s,o){return o(function(){$v(s)&&Yv(r)})}function $v(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Ln(r,o)}catch{return!0}}function Yv(r){var s=wa(r,2);s!==null&&Dn(s,r,2)}function og(r){var s=Tn();if(typeof r=="function"){var o=r;if(r=o(),Da){Qn(!0);try{o()}finally{Qn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:r},s}function Xv(r,s,o,c){return r.baseState=o,sg(r,tt,typeof c=="function"?c:li)}function jR(r,s,o,c,m){if(Xh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};ee.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,Jv(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Jv(r,s){var o=s.action,c=s.payload,m=r.state;if(s.isTransition){var g=ee.T,v={};ee.T=v;try{var T=o(m,c),D=ee.S;D!==null&&D(v,T),Wv(r,s,T)}catch($){lg(r,s,$)}finally{g!==null&&v.types!==null&&(g.types=v.types),ee.T=g}}else try{g=o(m,c),Wv(r,s,g)}catch($){lg(r,s,$)}}function Wv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Zv(r,s,c)},function(c){return lg(r,s,c)}):Zv(r,s,o)}function Zv(r,s,o){s.status="fulfilled",s.value=o,e0(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Jv(r,o)))}function lg(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,e0(s),s=s.next;while(s!==c)}r.action=null}function e0(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function t0(r,s){return s}function n0(r,s){if(Be){var o=at.formState;if(o!==null){e:{var c=xe;if(Be){if(ct){t:{for(var m=ct,g=tr;m.nodeType!==8;){if(!g){m=null;break t}if(m=rr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){ct=rr(m.nextSibling),c=m.data==="F!";break e}}us(c)}c=!1}c&&(s=o[0])}}return o=Tn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t0,lastRenderedState:s},o.queue=c,o=E0.bind(null,xe,c),c.dispatch=o,c=og(!1),g=mg.bind(null,xe,!1,c.queue),c=Tn(),m={state:s,dispatch:null,action:r,pending:null},c.queue=m,o=jR.bind(null,xe,m,g,o),m.dispatch=o,c.memoizedState=r,[s,o,!1]}function r0(r){var s=Rt();return i0(s,tt,r)}function i0(r,s,o){if(s=sg(r,s,t0)[0],r=Qh(li)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Iu(s)}catch(v){throw v===Po?Lh:v}else c=s;s=Rt();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(xe.flags|=2048,zo(9,{destroy:void 0},zR.bind(null,m,o),null)),[c,g,r]}function zR(r,s){r.action=s}function s0(r){var s=Rt(),o=tt;if(o!==null)return i0(s,o,r);Rt(),s=s.memoizedState,o=Rt();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function zo(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Hh(),xe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function a0(){return Rt().memoizedState}function $h(r,s,o,c){var m=Tn();xe.flags|=r,m.memoizedState=zo(1|s,{destroy:void 0},o,c===void 0?null:c)}function Yh(r,s,o,c){var m=Rt();c=c===void 0?null:c;var g=m.memoizedState.inst;tt!==null&&c!==null&&Zm(c,tt.memoizedState.deps)?m.memoizedState=zo(s,g,o,c):(xe.flags|=r,m.memoizedState=zo(1|s,g,o,c))}function o0(r,s){$h(8390656,8,r,s)}function ug(r,s){Yh(2048,8,r,s)}function BR(r){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=Hh(),xe.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function l0(r){var s=Rt().memoizedState;return BR({ref:s,nextImpl:r}),function(){if(($e&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function u0(r,s){return Yh(4,2,r,s)}function c0(r,s){return Yh(4,4,r,s)}function h0(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function d0(r,s,o){o=o!=null?o.concat([r]):null,Yh(4,4,h0.bind(null,s,r),o)}function cg(){}function f0(r,s){var o=Rt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Zm(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function m0(r,s){var o=Rt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Zm(s,c[1]))return c[0];if(c=r(),Da){Qn(!0);try{r()}finally{Qn(!1)}}return o.memoizedState=[c,s],c}function hg(r,s,o){return o===void 0||(oi&1073741824)!==0&&(Pe&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=gb(),xe.lanes|=r,_s|=r,o)}function g0(r,s,o,c){return Ln(o,s)?o:Lo.current!==null?(r=hg(r,o,c),Ln(r,s)||(Ot=!0),r):(oi&42)===0||(oi&1073741824)!==0&&(Pe&261930)===0?(Ot=!0,r.memoizedState=o):(r=gb(),xe.lanes|=r,_s|=r,s)}function p0(r,s,o,c,m){var g=ce.p;ce.p=g!==0&&8>g?g:8;var v=ee.T,T={};ee.T=T,mg(r,!1,s,o);try{var D=m(),$=ee.S;if($!==null&&$(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=MR(D,c);xu(r,s,Z,qn(r))}else xu(r,s,c,qn(r))}catch(re){xu(r,s,{then:function(){},status:"rejected",reason:re},qn())}finally{ce.p=g,v!==null&&T.types!==null&&(v.types=T.types),ee.T=v}}function FR(){}function dg(r,s,o,c){if(r.tag!==5)throw Error(i(476));var m=y0(r).queue;p0(r,m,s,Ee,o===null?FR:function(){return _0(r),o(c)})}function y0(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:Ee},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function _0(r){var s=y0(r);s.next===null&&(s=r.alternate.memoizedState),xu(r,s.next.queue,{},qn())}function fg(){return sn(Gu)}function v0(){return Rt().memoizedState}function b0(){return Rt().memoizedState}function qR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=qn();r=ds(o);var c=fs(s,r,o);c!==null&&(Dn(c,s,o),wu(c,s,o)),s={cache:Fm()},r.payload=s;return}s=s.return}}function GR(r,s,o){var c=qn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xh(r)?w0(s,o):(o=Dm(r,s,o,c),o!==null&&(Dn(o,r,c),T0(o,s,c)))}function E0(r,s,o){var c=qn();xu(r,s,o,c)}function xu(r,s,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xh(r))w0(s,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,T=g(v,o);if(m.hasEagerState=!0,m.eagerState=T,Ln(T,v))return Nh(r,s,m,0),at===null&&Ch(),!1}catch{}finally{}if(o=Dm(r,s,m,c),o!==null)return Dn(o,r,c),T0(o,s,c),!0}return!1}function mg(r,s,o,c){if(c={lane:2,revertLane:Kg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xh(r)){if(s)throw Error(i(479))}else s=Dm(r,o,c,2),s!==null&&Dn(s,r,2)}function Xh(r){var s=r.alternate;return r===xe||s!==null&&s===xe}function w0(r,s){Uo=qh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function T0(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,Hi(r,o)}}var Ru={readContext:sn,use:Kh,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Ru.useEffectEvent=Tt;var A0={readContext:sn,use:Kh,useCallback:function(r,s){return Tn().memoizedState=[r,s===void 0?null:s],r},useContext:sn,useEffect:o0,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,$h(4194308,4,h0.bind(null,s,r),o)},useLayoutEffect:function(r,s){return $h(4194308,4,r,s)},useInsertionEffect:function(r,s){$h(4,2,r,s)},useMemo:function(r,s){var o=Tn();s=s===void 0?null:s;var c=r();if(Da){Qn(!0);try{r()}finally{Qn(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=Tn();if(o!==void 0){var m=o(s);if(Da){Qn(!0);try{o(s)}finally{Qn(!1)}}}else m=s;return c.memoizedState=c.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},c.queue=r,r=r.dispatch=GR.bind(null,xe,r),[c.memoizedState,r]},useRef:function(r){var s=Tn();return r={current:r},s.memoizedState=r},useState:function(r){r=og(r);var s=r.queue,o=E0.bind(null,xe,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:cg,useDeferredValue:function(r,s){var o=Tn();return hg(o,r,s)},useTransition:function(){var r=og(!1);return r=p0.bind(null,xe,r.queue,!0,!1),Tn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=xe,m=Tn();if(Be){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),at===null)throw Error(i(349));(Pe&127)!==0||Hv(c,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,o0(Qv.bind(null,c,g,r),[r]),c.flags|=2048,zo(9,{destroy:void 0},Kv.bind(null,c,g,o,s),null),o},useId:function(){var r=Tn(),s=at.identifierPrefix;if(Be){var o=Or,c=Vr;o=(c&~(1<<32-_n(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Gh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=LR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:fg,useFormState:n0,useActionState:n0,useOptimistic:function(r){var s=Tn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mg.bind(null,xe,!0,o),o.dispatch=s,[r,s]},useMemoCache:ig,useCacheRefresh:function(){return Tn().memoizedState=qR.bind(null,xe)},useEffectEvent:function(r){var s=Tn(),o={impl:r};return s.memoizedState=o,function(){if(($e&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},gg={readContext:sn,use:Kh,useCallback:f0,useContext:sn,useEffect:ug,useImperativeHandle:d0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:m0,useReducer:Qh,useRef:a0,useState:function(){return Qh(li)},useDebugValue:cg,useDeferredValue:function(r,s){var o=Rt();return g0(o,tt.memoizedState,r,s)},useTransition:function(){var r=Qh(li)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:Iu(r),s]},useSyncExternalStore:Gv,useId:v0,useHostTransitionStatus:fg,useFormState:r0,useActionState:r0,useOptimistic:function(r,s){var o=Rt();return Xv(o,tt,r,s)},useMemoCache:ig,useCacheRefresh:b0};gg.useEffectEvent=l0;var S0={readContext:sn,use:Kh,useCallback:f0,useContext:sn,useEffect:ug,useImperativeHandle:d0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:m0,useReducer:ag,useRef:a0,useState:function(){return ag(li)},useDebugValue:cg,useDeferredValue:function(r,s){var o=Rt();return tt===null?hg(o,r,s):g0(o,tt.memoizedState,r,s)},useTransition:function(){var r=ag(li)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:Iu(r),s]},useSyncExternalStore:Gv,useId:v0,useHostTransitionStatus:fg,useFormState:s0,useActionState:s0,useOptimistic:function(r,s){var o=Rt();return tt!==null?Xv(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:ig,useCacheRefresh:b0};S0.useEffectEvent=l0;function pg(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:b({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var yg={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=qn(),m=ds(c);m.payload=s,o!=null&&(m.callback=o),s=fs(r,m,c),s!==null&&(Dn(s,r,c),wu(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=qn(),m=ds(c);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=fs(r,m,c),s!==null&&(Dn(s,r,c),wu(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=qn(),c=ds(o);c.tag=2,s!=null&&(c.callback=s),s=fs(r,c,o),s!==null&&(Dn(s,r,o),wu(s,r,o))}};function I0(r,s,o,c,m,g,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,v):s.prototype&&s.prototype.isPureReactComponent?!mu(o,c)||!mu(m,g):!0}function x0(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&yg.enqueueReplaceState(s,s.state,null)}function ka(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=b({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function R0(r){Rh(r)}function C0(r){console.error(r)}function N0(r){Rh(r)}function Jh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function D0(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _g(r,s,o){return o=ds(o),o.tag=3,o.payload={element:null},o.callback=function(){Jh(r,s)},o}function k0(r){return r=ds(r),r.tag=3,r}function V0(r,s,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;r.payload=function(){return m(g)},r.callback=function(){D0(s,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){D0(s,o,c),typeof m!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function HR(r,s,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&ko(s,o,m,!0),o=jn.current,o!==null){switch(o.tag){case 31:case 13:return nr===null?ud():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Uh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),qg(r,c,m)),!1;case 22:return o.flags|=65536,c===Uh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),qg(r,c,m)),!1}throw Error(i(435,o.tag))}return qg(r,c,m),ud(),!1}if(Be)return s=jn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==Lm&&(r=Error(i(422),{cause:c}),yu(Wn(r,o)))):(c!==Lm&&(s=Error(i(423),{cause:c}),yu(Wn(s,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,c=Wn(c,o),m=_g(r.stateNode,c,m),$m(r,m),At!==4&&(At=2)),!1;var g=Error(i(520),{cause:c});if(g=Wn(g,o),Mu===null?Mu=[g]:Mu.push(g),At!==4&&(At=2),s===null)return!0;c=Wn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=_g(o.stateNode,c,r),$m(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(vs===null||!vs.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=k0(m),V0(m,r,o,c),$m(o,m),!1}o=o.return}while(o!==null);return!1}var vg=Error(i(461)),Ot=!1;function an(r,s,o,c){s.child=r===null?Lv(s,null,o,c):Na(s,r.child,o,c)}function O0(r,s,o,c,m){o=o.render;var g=s.ref;if("ref"in c){var v={};for(var T in c)T!=="ref"&&(v[T]=c[T])}else v=c;return Ia(s),c=eg(r,s,o,v,g,m),T=tg(),r!==null&&!Ot?(ng(r,s,m),ui(r,s,m)):(Be&&T&&Pm(s),s.flags|=1,an(r,s,c,m),s.child)}function P0(r,s,o,c,m){if(r===null){var g=o.type;return typeof g=="function"&&!km(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,M0(r,s,g,c,m)):(r=kh(o.type,null,c,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!xg(r,m)){var v=g.memoizedProps;if(o=o.compare,o=o!==null?o:mu,o(v,c)&&r.ref===s.ref)return ui(r,s,m)}return s.flags|=1,r=ri(g,c),r.ref=s.ref,r.return=s,s.child=r}function M0(r,s,o,c,m){if(r!==null){var g=r.memoizedProps;if(mu(g,c)&&r.ref===s.ref)if(Ot=!1,s.pendingProps=c=g,xg(r,m))(r.flags&131072)!==0&&(Ot=!0);else return s.lanes=r.lanes,ui(r,s,m)}return bg(r,s,o,c,m)}function L0(r,s,o,c){var m=c.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(c=s.child=r.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,s.child=null;return U0(r,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Mh(s,g!==null?g.cachePool:null),g!==null?zv(s,g):Xm(),Bv(s);else return c=s.lanes=536870912,U0(r,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Mh(s,g.cachePool),zv(s,g),gs(),s.memoizedState=null):(r!==null&&Mh(s,null),Xm(),gs());return an(r,s,m,o),s.child}function Cu(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function U0(r,s,o,c,m){var g=Gm();return g=g===null?null:{parent:kt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Mh(s,null),Xm(),Bv(s),r!==null&&ko(r,s,c,!0),s.childLanes=m,null}function Wh(r,s){return s=ed({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function j0(r,s,o){return Na(s,r.child,null,o),r=Wh(s,s.pendingProps),r.flags|=2,zn(s),s.memoizedState=null,r}function KR(r,s,o){var c=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Be){if(c.mode==="hidden")return r=Wh(s,c),s.lanes=536870912,Cu(null,r);if(Wm(s),(r=ct)?(r=Jb(r,tr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:os!==null?{id:Vr,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},o=wv(r),o.return=s,s.child=o,rn=s,ct=null)):r=null,r===null)throw us(s);return s.lanes=536870912,null}return Wh(s,c)}var g=r.memoizedState;if(g!==null){var v=g.dehydrated;if(Wm(s),m)if(s.flags&256)s.flags&=-257,s=j0(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ot||ko(r,s,o,!1),m=(o&r.childLanes)!==0,Ot||m){if(c=at,c!==null&&(v=Ki(c,o),v!==0&&v!==g.retryLane))throw g.retryLane=v,wa(r,v),Dn(c,r,v),vg;ud(),s=j0(r,s,o)}else r=g.treeContext,ct=rr(v.nextSibling),rn=s,Be=!0,ls=null,tr=!1,r!==null&&Sv(s,r),s=Wh(s,c),s.flags|=4096;return s}return r=ri(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Zh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function bg(r,s,o,c,m){return Ia(s),o=eg(r,s,o,c,void 0,m),c=tg(),r!==null&&!Ot?(ng(r,s,m),ui(r,s,m)):(Be&&c&&Pm(s),s.flags|=1,an(r,s,o,m),s.child)}function z0(r,s,o,c,m,g){return Ia(s),s.updateQueue=null,o=qv(s,c,o,m),Fv(r),c=tg(),r!==null&&!Ot?(ng(r,s,g),ui(r,s,g)):(Be&&c&&Pm(s),s.flags|=1,an(r,s,o,g),s.child)}function B0(r,s,o,c,m){if(Ia(s),s.stateNode===null){var g=Ro,v=o.contextType;typeof v=="object"&&v!==null&&(g=sn(v)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=yg,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Km(s),v=o.contextType,g.context=typeof v=="object"&&v!==null?sn(v):Ro,g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(pg(s,o,v,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&yg.enqueueReplaceState(g,g.state,null),Au(s,c,g,m),Tu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var T=s.memoizedProps,D=ka(o,T);g.props=D;var $=g.context,Z=o.contextType;v=Ro,typeof Z=="object"&&Z!==null&&(v=sn(Z));var re=o.getDerivedStateFromProps;Z=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||$!==v)&&x0(s,g,c,v),hs=!1;var Y=s.memoizedState;g.state=Y,Au(s,c,g,m),Tu(),$=s.memoizedState,T||Y!==$||hs?(typeof re=="function"&&(pg(s,o,re,c),$=s.memoizedState),(D=hs||I0(s,o,D,c,Y,$,v))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),g.props=c,g.state=$,g.context=v,c=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Qm(r,s),v=s.memoizedProps,Z=ka(o,v),g.props=Z,re=s.pendingProps,Y=g.context,$=o.contextType,D=Ro,typeof $=="object"&&$!==null&&(D=sn($)),T=o.getDerivedStateFromProps,($=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==re||Y!==D)&&x0(s,g,c,D),hs=!1,Y=s.memoizedState,g.state=Y,Au(s,c,g,m),Tu();var J=s.memoizedState;v!==re||Y!==J||hs||r!==null&&r.dependencies!==null&&Oh(r.dependencies)?(typeof T=="function"&&(pg(s,o,T,c),J=s.memoizedState),(Z=hs||I0(s,o,Z,c,Y,J,D)||r!==null&&r.dependencies!==null&&Oh(r.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,J,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,J,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=J),g.props=c,g.state=J,g.context=D,c=Z):(typeof g.componentDidUpdate!="function"||v===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,Zh(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=Na(s,r.child,null,m),s.child=Na(s,null,o,m)):an(r,s,o,m),s.memoizedState=g.state,r=s.child):r=ui(r,s,m),r}function F0(r,s,o,c){return Aa(),s.flags|=256,an(r,s,o,c),s.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wg(r){return{baseLanes:r,cachePool:Dv()}}function Tg(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Fn),r}function q0(r,s,o){var c=s.pendingProps,m=!1,g=(s.flags&128)!==0,v;if((v=g)||(v=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),v&&(m=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,r===null){if(Be){if(m?ms(s):gs(),(r=ct)?(r=Jb(r,tr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:os!==null?{id:Vr,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},o=wv(r),o.return=s,s.child=o,rn=s,ct=null)):r=null,r===null)throw us(s);return sp(r)?s.lanes=32:s.lanes=536870912,null}var T=c.children;return c=c.fallback,m?(gs(),m=s.mode,T=ed({mode:"hidden",children:T},m),c=Ta(c,m,o,null),T.return=s,c.return=s,T.sibling=c,s.child=T,c=s.child,c.memoizedState=wg(o),c.childLanes=Tg(r,v,o),s.memoizedState=Eg,Cu(null,c)):(ms(s),Ag(s,T))}var D=r.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(g)s.flags&256?(ms(s),s.flags&=-257,s=Sg(r,s,o)):s.memoizedState!==null?(gs(),s.child=r.child,s.flags|=128,s=null):(gs(),T=c.fallback,m=s.mode,c=ed({mode:"visible",children:c.children},m),T=Ta(T,m,o,null),T.flags|=2,c.return=s,T.return=s,c.sibling=T,s.child=c,Na(s,r.child,null,o),c=s.child,c.memoizedState=wg(o),c.childLanes=Tg(r,v,o),s.memoizedState=Eg,s=Cu(null,c));else if(ms(s),sp(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var $=v.dgst;v=$,c=Error(i(419)),c.stack="",c.digest=v,yu({value:c,source:null,stack:null}),s=Sg(r,s,o)}else if(Ot||ko(r,s,o,!1),v=(o&r.childLanes)!==0,Ot||v){if(v=at,v!==null&&(c=Ki(v,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,wa(r,c),Dn(v,r,c),vg;ip(T)||ud(),s=Sg(r,s,o)}else ip(T)?(s.flags|=192,s.child=r.child,s=null):(r=D.treeContext,ct=rr(T.nextSibling),rn=s,Be=!0,ls=null,tr=!1,r!==null&&Sv(s,r),s=Ag(s,c.children),s.flags|=4096);return s}return m?(gs(),T=c.fallback,m=s.mode,D=r.child,$=D.sibling,c=ri(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,$!==null?T=ri($,T):(T=Ta(T,m,o,null),T.flags|=2),T.return=s,c.return=s,c.sibling=T,s.child=c,Cu(null,c),c=s.child,T=r.child.memoizedState,T===null?T=wg(o):(m=T.cachePool,m!==null?(D=kt._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=Dv(),T={baseLanes:T.baseLanes|o,cachePool:m}),c.memoizedState=T,c.childLanes=Tg(r,v,o),s.memoizedState=Eg,Cu(r.child,c)):(ms(s),o=r.child,r=o.sibling,o=ri(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(v=s.deletions,v===null?(s.deletions=[r],s.flags|=16):v.push(r)),s.child=o,s.memoizedState=null,o)}function Ag(r,s){return s=ed({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function ed(r,s){return r=Un(22,r,null,s),r.lanes=0,r}function Sg(r,s,o){return Na(s,r.child,null,o),r=Ag(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function G0(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),zm(r.return,s,o)}function Ig(r,s,o,c,m,g){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=m,v.treeForkCount=g)}function H0(r,s,o){var c=s.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var v=xt.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,ae(xt,v),an(r,s,c,o),c=Be?pu:0,!T&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&G0(r,o,s);else if(r.tag===19)G0(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)r=o.alternate,r!==null&&Fh(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Ig(s,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&Fh(r)===null){s.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}Ig(s,!0,o,null,g,c);break;case"together":Ig(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ui(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),_s|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(ko(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ri(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ri(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function xg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Oh(r)))}function QR(r,s,o){switch(s.tag){case 3:Zt(s,s.stateNode.containerInfo),cs(s,kt,r.memoizedState.cache),Aa();break;case 27:case 5:Ar(s);break;case 4:Zt(s,s.stateNode.containerInfo);break;case 10:cs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Wm(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ms(s),s.flags|=128,null):(o&s.child.childLanes)!==0?q0(r,s,o):(ms(s),r=ui(r,s,o),r!==null?r.sibling:null);ms(s);break;case 19:var m=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(ko(r,s,o,!1),c=(o&s.childLanes)!==0),m){if(c)return H0(r,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ae(xt,xt.current),c)break;return null;case 22:return s.lanes=0,L0(r,s,o,s.pendingProps);case 24:cs(s,kt,r.memoizedState.cache)}return ui(r,s,o)}function K0(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ot=!0;else{if(!xg(r,o)&&(s.flags&128)===0)return Ot=!1,QR(r,s,o);Ot=(r.flags&131072)!==0}else Ot=!1,Be&&(s.flags&1048576)!==0&&Av(s,pu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=Ra(s.elementType),s.type=r,typeof r=="function")km(r)?(c=ka(r,c),s.tag=1,s=B0(null,s,r,c,o)):(s.tag=0,s=bg(null,s,r,c,o));else{if(r!=null){var m=r.$$typeof;if(m===oe){s.tag=11,s=O0(null,s,r,c,o);break e}else if(m===C){s.tag=14,s=P0(null,s,r,c,o);break e}}throw s=Lt(r)||r,Error(i(306,s,""))}}return s;case 0:return bg(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,m=ka(c,s.pendingProps),B0(r,s,c,m,o);case 3:e:{if(Zt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;m=g.element,Qm(r,s),Au(s,c,null,o);var v=s.memoizedState;if(c=v.cache,cs(s,kt,c),c!==g.cache&&Bm(s,[kt],o,!0),Tu(),c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=F0(r,s,c,o);break e}else if(c!==m){m=Wn(Error(i(424)),s),yu(m),s=F0(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ct=rr(r.firstChild),rn=s,Be=!0,ls=null,tr=!0,o=Lv(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Aa(),c===m){s=ui(r,s,o);break e}an(r,s,c,o)}s=s.child}return s;case 26:return Zh(r,s),r===null?(o=rE(s.type,null,s.pendingProps,null))?s.memoizedState=o:Be||(o=s.type,r=s.pendingProps,c=pd(Ne.current).createElement(o),c[Et]=s,c[nn]=r,on(c,o,r),It(c),s.stateNode=c):s.memoizedState=rE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ar(s),r===null&&Be&&(c=s.stateNode=eE(s.type,s.pendingProps,Ne.current),rn=s,tr=!0,m=ct,Ts(s.type)?(ap=m,ct=rr(c.firstChild)):ct=m),an(r,s,s.pendingProps.children,o),Zh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Be&&((m=c=ct)&&(c=T1(c,s.type,s.pendingProps,tr),c!==null?(s.stateNode=c,rn=s,ct=rr(c.firstChild),tr=!1,m=!0):m=!1),m||us(s)),Ar(s),m=s.type,g=s.pendingProps,v=r!==null?r.memoizedProps:null,c=g.children,tp(m,g)?c=null:v!==null&&tp(m,v)&&(s.flags|=32),s.memoizedState!==null&&(m=eg(r,s,UR,null,null,o),Gu._currentValue=m),Zh(r,s),an(r,s,c,o),s.child;case 6:return r===null&&Be&&((r=o=ct)&&(o=A1(o,s.pendingProps,tr),o!==null?(s.stateNode=o,rn=s,ct=null,r=!0):r=!1),r||us(s)),null;case 13:return q0(r,s,o);case 4:return Zt(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Na(s,null,c,o):an(r,s,c,o),s.child;case 11:return O0(r,s,s.type,s.pendingProps,o);case 7:return an(r,s,s.pendingProps,o),s.child;case 8:return an(r,s,s.pendingProps.children,o),s.child;case 12:return an(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,cs(s,s.type,c.value),an(r,s,c.children,o),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,Ia(s),m=sn(m),c=c(m),s.flags|=1,an(r,s,c,o),s.child;case 14:return P0(r,s,s.type,s.pendingProps,o);case 15:return M0(r,s,s.type,s.pendingProps,o);case 19:return H0(r,s,o);case 31:return KR(r,s,o);case 22:return L0(r,s,o,s.pendingProps);case 24:return Ia(s),c=sn(kt),r===null?(m=Gm(),m===null&&(m=at,g=Fm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:c,cache:m},Km(s),cs(s,kt,m)):((r.lanes&o)!==0&&(Qm(r,s),Au(s,null,null,o),Tu()),m=r.memoizedState,g=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),cs(s,kt,c)):(c=g.cache,cs(s,kt,c),c!==m.cache&&Bm(s,[kt],o,!0))),an(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ci(r){r.flags|=4}function Rg(r,s,o,c,m){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(vb())r.flags|=8192;else throw Ca=Uh,Hm}else r.flags&=-16777217}function Q0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!lE(s))if(vb())r.flags|=8192;else throw Ca=Uh,Hm}function td(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Xl():536870912,r.lanes|=s,Go|=s)}function Nu(r,s){if(!Be)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function ht(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function $R(r,s,o){var c=s.pendingProps;switch(Mm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ai(kt),vt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Do(s)?ci(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Um())),ht(s),null;case 26:var m=s.type,g=s.memoizedState;return r===null?(ci(s),g!==null?(ht(s),Q0(s,g)):(ht(s),Rg(s,m,null,c,o))):g?g!==r.memoizedState?(ci(s),ht(s),Q0(s,g)):(ht(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&ci(s),ht(s),Rg(s,m,r,c,o)),null;case 27:if(Hr(s),o=Ne.current,m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ht(s),null}r=ge.current,Do(s)?Iv(s):(r=eE(m,c,o),s.stateNode=r,ci(s))}return ht(s),null;case 5:if(Hr(s),m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ht(s),null}if(g=ge.current,Do(s))Iv(s);else{var v=pd(Ne.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?v.createElement(m,{is:c.is}):v.createElement(m)}}g[Et]=s,g[nn]=c;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=g;e:switch(on(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ci(s)}}return ht(s),Rg(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&ci(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ne.current,Do(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,m=rn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}r[Et]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||qb(r.nodeValue,o)),r||us(s,!0)}else r=pd(r).createTextNode(c),r[Et]=s,s.stateNode=r}return ht(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(c=Do(s),o!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Et]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),r=!1}else o=Um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(zn(s),s):(zn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ht(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Do(s),c!==null&&c.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Et]=s}else Aa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),m=!1}else m=Um(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(zn(s),s):(zn(s),null)}return zn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,r=r!==null&&r.memoizedState!==null,o&&(c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),td(s,s.updateQueue),ht(s),null);case 4:return vt(),r===null&&Xg(s.stateNode.containerInfo),ht(s),null;case 10:return ai(s.type),ht(s),null;case 19:if(te(xt),c=s.memoizedState,c===null)return ht(s),null;if(m=(s.flags&128)!==0,g=c.rendering,g===null)if(m)Nu(c,!1);else{if(At!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Fh(r),g!==null){for(s.flags|=128,Nu(c,!1),r=g.updateQueue,s.updateQueue=r,td(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Ev(o,r),o=o.sibling;return ae(xt,xt.current&1|2),Be&&ii(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&en()>ad&&(s.flags|=128,m=!0,Nu(c,!1),s.lanes=4194304)}else{if(!m)if(r=Fh(g),r!==null){if(s.flags|=128,m=!0,r=r.updateQueue,s.updateQueue=r,td(s,r),Nu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Be)return ht(s),null}else 2*en()-c.renderingStartTime>ad&&o!==536870912&&(s.flags|=128,m=!0,Nu(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(r=c.last,r!==null?r.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=en(),r.sibling=null,o=xt.current,ae(xt,m?o&1|2:o&1),Be&&ii(s,c.treeForkCount),r):(ht(s),null);case 22:case 23:return zn(s),Jm(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),o=s.updateQueue,o!==null&&td(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&te(xa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ai(kt),ht(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function YR(r,s){switch(Mm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ai(kt),vt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Hr(s),null;case 31:if(s.memoizedState!==null){if(zn(s),s.alternate===null)throw Error(i(340));Aa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(zn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Aa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return te(xt),null;case 4:return vt(),null;case 10:return ai(s.type),null;case 22:case 23:return zn(s),Jm(),r!==null&&te(xa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ai(kt),null;case 25:return null;default:return null}}function $0(r,s){switch(Mm(s),s.tag){case 3:ai(kt),vt();break;case 26:case 27:case 5:Hr(s);break;case 4:vt();break;case 31:s.memoizedState!==null&&zn(s);break;case 13:zn(s);break;case 19:te(xt);break;case 10:ai(s.type);break;case 22:case 23:zn(s),Jm(),r!==null&&te(xa);break;case 24:ai(kt)}}function Du(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&r)===r){c=void 0;var g=o.create,v=o.inst;c=g(),v.destroy=c}o=o.next}while(o!==m)}}catch(T){Ze(s,s.return,T)}}function ps(r,s,o){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&r)===r){var v=c.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,m=s;var D=o,$=T;try{$()}catch(Z){Ze(m,D,Z)}}}c=c.next}while(c!==g)}}catch(Z){Ze(s,s.return,Z)}}function Y0(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{jv(s,o)}catch(c){Ze(r,r.return,c)}}}function X0(r,s,o){o.props=ka(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Ze(r,s,c)}}function ku(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(m){Ze(r,s,m)}}function Pr(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){Ze(r,s,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ze(r,s,m)}else o.current=null}function J0(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){Ze(r,r.return,m)}}function Cg(r,s,o){try{var c=r.stateNode;y1(c,r.type,o,s),c[nn]=s}catch(m){Ze(r,r.return,m)}}function W0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ts(r.type)||r.tag===4}function Ng(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||W0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ts(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Dg(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=qt));else if(c!==4&&(c===27&&Ts(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Dg(r,s,o),r=r.sibling;r!==null;)Dg(r,s,o),r=r.sibling}function nd(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&Ts(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(nd(r,s,o),r=r.sibling;r!==null;)nd(r,s,o),r=r.sibling}function Z0(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);on(s,c,o),s[Et]=r,s[nn]=o}catch(g){Ze(r,r.return,g)}}var hi=!1,Pt=!1,kg=!1,eb=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function XR(r,s){if(r=r.containerInfo,Zg=Td,r=dv(r),Sm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var v=0,T=-1,D=-1,$=0,Z=0,re=r,Y=null;t:for(;;){for(var J;re!==o||m!==0&&re.nodeType!==3||(T=v+m),re!==g||c!==0&&re.nodeType!==3||(D=v+c),re.nodeType===3&&(v+=re.nodeValue.length),(J=re.firstChild)!==null;)Y=re,re=J;for(;;){if(re===r)break t;if(Y===o&&++$===m&&(T=v),Y===g&&++Z===c&&(D=v),(J=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=J}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(ep={focusedElem:r,selectionRange:o},Td=!1,Kt=s;Kt!==null;)if(s=Kt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Kt=r;else for(;Kt!==null;){switch(s=Kt,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var me=ka(o.type,m);r=c.getSnapshotBeforeUpdate(me,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(we){Ze(o,o.return,we)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)rp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":rp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Kt=r;break}Kt=s.return}}function tb(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:fi(r,o),c&4&&Du(5,o);break;case 1:if(fi(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(v){Ze(o,o.return,v)}else{var m=ka(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(m,s,r.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(o,o.return,v)}}c&64&&Y0(o),c&512&&ku(o,o.return);break;case 3:if(fi(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{jv(r,s)}catch(v){Ze(o,o.return,v)}}break;case 27:s===null&&c&4&&Z0(o);case 26:case 5:fi(r,o),s===null&&c&4&&J0(o),c&512&&ku(o,o.return);break;case 12:fi(r,o);break;case 31:fi(r,o),c&4&&ib(r,o);break;case 13:fi(r,o),c&4&&sb(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=s1.bind(null,o),S1(r,o))));break;case 22:if(c=o.memoizedState!==null||hi,!c){s=s!==null&&s.memoizedState!==null||Pt,m=hi;var g=Pt;hi=c,(Pt=s)&&!g?mi(r,o,(o.subtreeFlags&8772)!==0):fi(r,o),hi=m,Pt=g}break;case 30:break;default:fi(r,o)}}function nb(r){var s=r.alternate;s!==null&&(r.alternate=null,nb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ca(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var mt=null,xn=!1;function di(r,s,o){for(o=o.child;o!==null;)rb(r,s,o),o=o.sibling}function rb(r,s,o){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Bi,o)}catch{}switch(o.tag){case 26:Pt||Pr(o,s),di(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||Pr(o,s);var c=mt,m=xn;Ts(o.type)&&(mt=o.stateNode,xn=!1),di(r,s,o),Bu(o.stateNode),mt=c,xn=m;break;case 5:Pt||Pr(o,s);case 6:if(c=mt,m=xn,mt=null,di(r,s,o),mt=c,xn=m,mt!==null)if(xn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(g){Ze(o,s,g)}else try{mt.removeChild(o.stateNode)}catch(g){Ze(o,s,g)}break;case 18:mt!==null&&(xn?(r=mt,Yb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Wo(r)):Yb(mt,o.stateNode));break;case 4:c=mt,m=xn,mt=o.stateNode.containerInfo,xn=!0,di(r,s,o),mt=c,xn=m;break;case 0:case 11:case 14:case 15:ps(2,o,s),Pt||ps(4,o,s),di(r,s,o);break;case 1:Pt||(Pr(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&X0(o,s,c)),di(r,s,o);break;case 21:di(r,s,o);break;case 22:Pt=(c=Pt)||o.memoizedState!==null,di(r,s,o),Pt=c;break;default:di(r,s,o)}}function ib(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wo(r)}catch(o){Ze(s,s.return,o)}}}function sb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wo(r)}catch(o){Ze(s,s.return,o)}}function JR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new eb),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new eb),s;default:throw Error(i(435,r.tag))}}function rd(r,s){var o=JR(r);s.forEach(function(c){if(!o.has(c)){o.add(c);var m=a1.bind(null,r,c);c.then(m,m)}})}function Rn(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=r,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Ts(T.type)){mt=T.stateNode,xn=!1;break e}break;case 5:mt=T.stateNode,xn=!1;break e;case 3:case 4:mt=T.stateNode.containerInfo,xn=!0;break e}T=T.return}if(mt===null)throw Error(i(160));rb(g,v,m),mt=null,xn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ab(s,r),s=s.sibling}var fr=null;function ab(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Rn(s,r),Cn(r),c&4&&(ps(3,r,r.return),Du(3,r),ps(5,r,r.return));break;case 1:Rn(s,r),Cn(r),c&512&&(Pt||o===null||Pr(o,o.return)),c&64&&hi&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=fr;if(Rn(s,r),Cn(r),c&512&&(Pt||o===null||Pr(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Yr]||g[Et]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),on(g,c,o),g[Et]=r,It(g),c=g;break e;case"link":var v=aE("link","href",m).get(c+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(g=v[T],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}g=m.createElement(c),on(g,c,o),m.head.appendChild(g);break;case"meta":if(v=aE("meta","content",m).get(c+(o.content||""))){for(T=0;T<v.length;T++)if(g=v[T],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}g=m.createElement(c),on(g,c,o),m.head.appendChild(g);break;default:throw Error(i(468,c))}g[Et]=r,It(g),c=g}r.stateNode=c}else oE(m,r.type,r.stateNode);else r.stateNode=sE(m,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?oE(m,r.type,r.stateNode):sE(m,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Cg(r,r.memoizedProps,o.memoizedProps)}break;case 27:Rn(s,r),Cn(r),c&512&&(Pt||o===null||Pr(o,o.return)),o!==null&&c&4&&Cg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Rn(s,r),Cn(r),c&512&&(Pt||o===null||Pr(o,o.return)),r.flags&32){m=r.stateNode;try{Xn(m,"")}catch(me){Ze(r,r.return,me)}}c&4&&r.stateNode!=null&&(m=r.memoizedProps,Cg(r,m,o!==null?o.memoizedProps:m)),c&1024&&(kg=!0);break;case 6:if(Rn(s,r),Cn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(me){Ze(r,r.return,me)}}break;case 3:if(vd=null,m=fr,fr=yd(s.containerInfo),Rn(s,r),fr=m,Cn(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Wo(s.containerInfo)}catch(me){Ze(r,r.return,me)}kg&&(kg=!1,ob(r));break;case 4:c=fr,fr=yd(r.stateNode.containerInfo),Rn(s,r),Cn(r),fr=c;break;case 12:Rn(s,r),Cn(r);break;case 31:Rn(s,r),Cn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rd(r,c)));break;case 13:Rn(s,r),Cn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(sd=en()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rd(r,c)));break;case 22:m=r.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,$=hi,Z=Pt;if(hi=$||m,Pt=Z||D,Rn(s,r),Pt=Z,hi=$,Cn(r),c&8192)e:for(s=r.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||D||hi||Pt||Va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(g=D.stateNode,m)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var re=D.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){Ze(D,D.return,me)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(me){Ze(D,D.return,me)}}}else if(s.tag===18){if(o===null){D=s;try{var J=D.stateNode;m?Xb(J,!0):Xb(D.stateNode,!1)}catch(me){Ze(D,D.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,rd(r,o))));break;case 19:Rn(s,r),Cn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,rd(r,c)));break;case 30:break;case 21:break;default:Rn(s,r),Cn(r)}}function Cn(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(W0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,g=Ng(r);nd(r,g,m);break;case 5:var v=o.stateNode;o.flags&32&&(Xn(v,""),o.flags&=-33);var T=Ng(r);nd(r,T,v);break;case 3:case 4:var D=o.stateNode.containerInfo,$=Ng(r);Dg(r,$,D);break;default:throw Error(i(161))}}catch(Z){Ze(r,r.return,Z)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ob(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;ob(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function fi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tb(r,s.alternate,s),s=s.sibling}function Va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ps(4,s,s.return),Va(s);break;case 1:Pr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&X0(s,s.return,o),Va(s);break;case 27:Bu(s.stateNode);case 26:case 5:Pr(s,s.return),Va(s);break;case 22:s.memoizedState===null&&Va(s);break;case 30:Va(s);break;default:Va(s)}r=r.sibling}}function mi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=r,g=s,v=g.flags;switch(g.tag){case 0:case 11:case 15:mi(m,g,o),Du(4,g);break;case 1:if(mi(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch($){Ze(c,c.return,$)}if(c=g,m=c.updateQueue,m!==null){var T=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)Uv(D[m],T)}catch($){Ze(c,c.return,$)}}o&&v&64&&Y0(g),ku(g,g.return);break;case 27:Z0(g);case 26:case 5:mi(m,g,o),o&&c===null&&v&4&&J0(g),ku(g,g.return);break;case 12:mi(m,g,o);break;case 31:mi(m,g,o),o&&v&4&&ib(m,g);break;case 13:mi(m,g,o),o&&v&4&&sb(m,g);break;case 22:g.memoizedState===null&&mi(m,g,o),ku(g,g.return);break;case 30:break;default:mi(m,g,o)}s=s.sibling}}function Vg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&_u(o))}function Og(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&_u(r))}function mr(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lb(r,s,o,c),s=s.sibling}function lb(r,s,o,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:mr(r,s,o,c),m&2048&&Du(9,s);break;case 1:mr(r,s,o,c);break;case 3:mr(r,s,o,c),m&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&_u(r)));break;case 12:if(m&2048){mr(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,v=g.id,T=g.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(D){Ze(s,s.return,D)}}else mr(r,s,o,c);break;case 31:mr(r,s,o,c);break;case 13:mr(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,v=s.alternate,s.memoizedState!==null?g._visibility&2?mr(r,s,o,c):Vu(r,s):g._visibility&2?mr(r,s,o,c):(g._visibility|=2,Bo(r,s,o,c,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Vg(v,s);break;case 24:mr(r,s,o,c),m&2048&&Og(s.alternate,s);break;default:mr(r,s,o,c)}}function Bo(r,s,o,c,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,v=s,T=o,D=c,$=v.flags;switch(v.tag){case 0:case 11:case 15:Bo(g,v,T,D,m),Du(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Bo(g,v,T,D,m):Vu(g,v):(Z._visibility|=2,Bo(g,v,T,D,m)),m&&$&2048&&Vg(v.alternate,v);break;case 24:Bo(g,v,T,D,m),m&&$&2048&&Og(v.alternate,v);break;default:Bo(g,v,T,D,m)}s=s.sibling}}function Vu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,m=c.flags;switch(c.tag){case 22:Vu(o,c),m&2048&&Vg(c.alternate,c);break;case 24:Vu(o,c),m&2048&&Og(c.alternate,c);break;default:Vu(o,c)}s=s.sibling}}var Ou=8192;function Fo(r,s,o){if(r.subtreeFlags&Ou)for(r=r.child;r!==null;)ub(r,s,o),r=r.sibling}function ub(r,s,o){switch(r.tag){case 26:Fo(r,s,o),r.flags&Ou&&r.memoizedState!==null&&L1(o,fr,r.memoizedState,r.memoizedProps);break;case 5:Fo(r,s,o);break;case 3:case 4:var c=fr;fr=yd(r.stateNode.containerInfo),Fo(r,s,o),fr=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Ou,Ou=16777216,Fo(r,s,o),Ou=c):Fo(r,s,o));break;default:Fo(r,s,o)}}function cb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Pu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,db(c,r)}cb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)hb(r),r=r.sibling}function hb(r){switch(r.tag){case 0:case 11:case 15:Pu(r),r.flags&2048&&ps(9,r,r.return);break;case 3:Pu(r);break;case 12:Pu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,id(r)):Pu(r);break;default:Pu(r)}}function id(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Kt=c,db(c,r)}cb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ps(8,s,s.return),id(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,id(s));break;default:id(s)}r=r.sibling}}function db(r,s){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:ps(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_u(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Kt=c;else e:for(o=r;Kt!==null;){c=Kt;var m=c.sibling,g=c.return;if(nb(c),c===o){Kt=null;break e}if(m!==null){m.return=g,Kt=m;break e}Kt=g}}}var WR={getCacheForType:function(r){var s=sn(kt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return sn(kt).controller.signal}},ZR=typeof WeakMap=="function"?WeakMap:Map,$e=0,at=null,Ve=null,Pe=0,We=0,Bn=null,ys=!1,qo=!1,Pg=!1,gi=0,At=0,_s=0,Oa=0,Mg=0,Fn=0,Go=0,Mu=null,Nn=null,Lg=!1,sd=0,fb=0,ad=1/0,od=null,vs=null,jt=0,bs=null,Ho=null,pi=0,Ug=0,jg=null,mb=null,Lu=0,zg=null;function qn(){return($e&2)!==0&&Pe!==0?Pe&-Pe:ee.T!==null?Kg():$r()}function gb(){if(Fn===0)if((Pe&536870912)===0||Be){var r=Sr;Sr<<=1,(Sr&3932160)===0&&(Sr=262144),Fn=r}else Fn=536870912;return r=jn.current,r!==null&&(r.flags|=32),Fn}function Dn(r,s,o){(r===at&&(We===2||We===9)||r.cancelPendingCommit!==null)&&(Ko(r,0),Es(r,Pe,Fn,!1)),Gi(r,o),(($e&2)===0||r!==at)&&(r===at&&(($e&2)===0&&(Oa|=o),At===4&&Es(r,Pe,Fn,!1)),Mr(r))}function pb(r,s,o){if(($e&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&r.expiredLanes)===0||qi(r,s),m=c?n1(r,s):Fg(r,s,!0),g=c;do{if(m===0){qo&&!c&&Es(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!e1(o)){m=Fg(r,s,!1),g=!1;continue}if(m===2){if(g=s,r.errorRecoveryDisabledLanes&g)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=r;m=Mu;var D=T.current.memoizedState.isDehydrated;if(D&&(Ko(T,v).flags|=256),v=Fg(T,v,!1),v!==2){if(Pg&&!D){T.errorRecoveryDisabledLanes|=g,Oa|=g,m=4;break e}g=Nn,Nn=m,g!==null&&(Nn===null?Nn=g:Nn.push.apply(Nn,g))}m=v}if(g=!1,m!==2)continue}}if(m===1){Ko(r,0),Es(r,s,0,!0);break}e:{switch(c=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Es(c,s,Fn,!ys);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=sd+300-en(),10<m)){if(Es(c,s,Fn,!ys),$n(c,0,!0)!==0)break e;pi=s,c.timeoutHandle=Qb(yb.bind(null,c,o,Nn,od,Lg,s,Fn,Oa,Go,ys,g,"Throttled",-0,0),m);break e}yb(c,o,Nn,od,Lg,s,Fn,Oa,Go,ys,g,null,-0,0)}}break}while(!0);Mr(r)}function yb(r,s,o,c,m,g,v,T,D,$,Z,re,Y,J){if(r.timeoutHandle=-1,re=s.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qt},ub(s,g,re);var me=(g&62914560)===g?sd-en():(g&4194048)===g?fb-en():0;if(me=U1(re,me),me!==null){pi=g,r.cancelPendingCommit=me(Sb.bind(null,r,s,g,o,c,m,v,T,D,Z,re,null,Y,J)),Es(r,g,v,!$);return}}Sb(r,s,g,o,c,m,v,T,D)}function e1(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!Ln(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Es(r,s,o,c){s&=~Mg,s&=~Oa,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var m=s;0<m;){var g=31-_n(m),v=1<<g;c[g]=-1,m&=~v}o!==0&&Jl(r,o,s)}function ld(){return($e&6)===0?(Uu(0),!1):!0}function Bg(){if(Ve!==null){if(We===0)var r=Ve.return;else r=Ve,si=Sa=null,rg(r),Mo=null,bu=0,r=Ve;for(;r!==null;)$0(r.alternate,r),r=r.return;Ve=null}}function Ko(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,b1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),pi=0,Bg(),at=r,Ve=o=ri(r.current,null),Pe=s,We=0,Bn=null,ys=!1,qo=qi(r,s),Pg=!1,Go=Fn=Mg=Oa=_s=At=0,Nn=Mu=null,Lg=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var m=31-_n(c),g=1<<m;s|=r[m],c&=~g}return gi=s,Ch(),o}function _b(r,s){xe=null,ee.H=Ru,s===Po||s===Lh?(s=Ov(),We=3):s===Hm?(s=Ov(),We=4):We=s===vg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bn=s,Ve===null&&(At=1,Jh(r,Wn(s,r.current)))}function vb(){var r=jn.current;return r===null?!0:(Pe&4194048)===Pe?nr===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?r===nr:!1}function bb(){var r=ee.H;return ee.H=Ru,r===null?Ru:r}function Eb(){var r=ee.A;return ee.A=WR,r}function ud(){At=4,ys||(Pe&4194048)!==Pe&&jn.current!==null||(qo=!0),(_s&134217727)===0&&(Oa&134217727)===0||at===null||Es(at,Pe,Fn,!1)}function Fg(r,s,o){var c=$e;$e|=2;var m=bb(),g=Eb();(at!==r||Pe!==s)&&(od=null,Ko(r,s)),s=!1;var v=At;e:do try{if(We!==0&&Ve!==null){var T=Ve,D=Bn;switch(We){case 8:Bg(),v=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(s=!0);var $=We;if(We=0,Bn=null,Qo(r,T,D,$),o&&qo){v=0;break e}break;default:$=We,We=0,Bn=null,Qo(r,T,D,$)}}t1(),v=At;break}catch(Z){_b(r,Z)}while(!0);return s&&r.shellSuspendCounter++,si=Sa=null,$e=c,ee.H=m,ee.A=g,Ve===null&&(at=null,Pe=0,Ch()),v}function t1(){for(;Ve!==null;)wb(Ve)}function n1(r,s){var o=$e;$e|=2;var c=bb(),m=Eb();at!==r||Pe!==s?(od=null,ad=en()+500,Ko(r,s)):qo=qi(r,s);e:do try{if(We!==0&&Ve!==null){s=Ve;var g=Bn;t:switch(We){case 1:We=0,Bn=null,Qo(r,s,g,1);break;case 2:case 9:if(kv(g)){We=0,Bn=null,Tb(s);break}s=function(){We!==2&&We!==9||at!==r||(We=7),Mr(r)},g.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:kv(g)?(We=0,Bn=null,Tb(s)):(We=0,Bn=null,Qo(r,s,g,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var T=Ve;if(v?lE(v):T.stateNode.complete){We=0,Bn=null;var D=T.sibling;if(D!==null)Ve=D;else{var $=T.return;$!==null?(Ve=$,cd($)):Ve=null}break t}}We=0,Bn=null,Qo(r,s,g,5);break;case 6:We=0,Bn=null,Qo(r,s,g,6);break;case 8:Bg(),At=6;break e;default:throw Error(i(462))}}r1();break}catch(Z){_b(r,Z)}while(!0);return si=Sa=null,ee.H=c,ee.A=m,$e=o,Ve!==null?0:(at=null,Pe=0,Ch(),At)}function r1(){for(;Ve!==null&&!mm();)wb(Ve)}function wb(r){var s=K0(r.alternate,r,gi);r.memoizedProps=r.pendingProps,s===null?cd(r):Ve=s}function Tb(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=z0(o,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=z0(o,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:rg(s);default:$0(o,s),s=Ve=Ev(s,gi),s=K0(o,s,gi)}r.memoizedProps=r.pendingProps,s===null?cd(r):Ve=s}function Qo(r,s,o,c){si=Sa=null,rg(s),Mo=null,bu=0;var m=s.return;try{if(HR(r,m,s,o,Pe)){At=1,Jh(r,Wn(o,r.current)),Ve=null;return}}catch(g){if(m!==null)throw Ve=m,g;At=1,Jh(r,Wn(o,r.current)),Ve=null;return}s.flags&32768?(Be||c===1?r=!0:qo||(Pe&536870912)!==0?r=!1:(ys=r=!0,(c===2||c===9||c===3||c===6)&&(c=jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ab(s,r)):cd(s)}function cd(r){var s=r;do{if((s.flags&32768)!==0){Ab(s,ys);return}r=s.return;var o=$R(s.alternate,s,gi);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=r}while(s!==null);At===0&&(At=5)}function Ab(r,s){do{var o=YR(r.alternate,r);if(o!==null){o.flags&=32767,Ve=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=o}while(r!==null);At=6,Ve=null}function Sb(r,s,o,c,m,g,v,T,D){r.cancelPendingCommit=null;do hd();while(jt!==0);if(($e&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Nm,tn(r,o,g,v,T,D),r===at&&(Ve=at=null,Pe=0),Ho=s,bs=r,pi=o,Ug=g,jg=m,mb=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,o1(Kr,function(){return Nb(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,m=ce.p,ce.p=2,v=$e,$e|=4;try{XR(r,s,o)}finally{$e=v,ce.p=m,ee.T=c}}jt=1,Ib(),xb(),Rb()}}function Ib(){if(jt===1){jt=0;var r=bs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ee.T,ee.T=null;var c=ce.p;ce.p=2;var m=$e;$e|=4;try{ab(s,r);var g=ep,v=dv(r.containerInfo),T=g.focusedElem,D=g.selectionRange;if(v!==T&&T&&T.ownerDocument&&hv(T.ownerDocument.documentElement,T)){if(D!==null&&Sm(T)){var $=D.start,Z=D.end;if(Z===void 0&&(Z=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(Z,T.value.length);else{var re=T.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var J=Y.getSelection(),me=T.textContent.length,we=Math.min(D.start,me),rt=D.end===void 0?we:Math.min(D.end,me);!J.extend&&we>rt&&(v=rt,rt=we,we=v);var z=cv(T,we),P=cv(T,rt);if(z&&P&&(J.rangeCount!==1||J.anchorNode!==z.node||J.anchorOffset!==z.offset||J.focusNode!==P.node||J.focusOffset!==P.offset)){var Q=re.createRange();Q.setStart(z.node,z.offset),J.removeAllRanges(),we>rt?(J.addRange(Q),J.extend(P.node,P.offset)):(Q.setEnd(P.node,P.offset),J.addRange(Q))}}}}for(re=[],J=T;J=J.parentNode;)J.nodeType===1&&re.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var ne=re[T];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Td=!!Zg,ep=Zg=null}finally{$e=m,ce.p=c,ee.T=o}}r.current=s,jt=2}}function xb(){if(jt===2){jt=0;var r=bs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ee.T,ee.T=null;var c=ce.p;ce.p=2;var m=$e;$e|=4;try{tb(r,s.alternate,s)}finally{$e=m,ce.p=c,ee.T=o}}jt=3}}function Rb(){if(jt===4||jt===3){jt=0,Ql();var r=bs,s=Ho,o=pi,c=mb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?jt=5:(jt=0,Ho=bs=null,Cb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(vs=null),Zl(o),s=s.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Bi,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=ee.T,m=ce.p,ce.p=2,ee.T=null;try{for(var g=r.onRecoverableError,v=0;v<c.length;v++){var T=c[v];g(T.value,{componentStack:T.stack})}}finally{ee.T=s,ce.p=m}}(pi&3)!==0&&hd(),Mr(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===zg?Lu++:(Lu=0,zg=r):Lu=0,Uu(0)}}function Cb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,_u(s)))}function hd(){return Ib(),xb(),Rb(),Nb()}function Nb(){if(jt!==5)return!1;var r=bs,s=Ug;Ug=0;var o=Zl(pi),c=ee.T,m=ce.p;try{ce.p=32>o?32:o,ee.T=null,o=jg,jg=null;var g=bs,v=pi;if(jt=0,Ho=bs=null,pi=0,($e&6)!==0)throw Error(i(331));var T=$e;if($e|=4,hb(g.current),lb(g,g.current,v,o),$e=T,Uu(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Bi,g)}catch{}return!0}finally{ce.p=m,ee.T=c,Cb(r,s)}}function Db(r,s,o){s=Wn(o,s),s=_g(r.stateNode,s,2),r=fs(r,s,2),r!==null&&(Gi(r,2),Mr(r))}function Ze(r,s,o){if(r.tag===3)Db(r,r,o);else for(;s!==null;){if(s.tag===3){Db(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vs===null||!vs.has(c))){r=Wn(o,r),o=k0(2),c=fs(s,o,2),c!==null&&(V0(o,c,s,r),Gi(c,2),Mr(c));break}}s=s.return}}function qg(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new ZR;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(o)||(Pg=!0,m.add(o),r=i1.bind(null,r,s,o),s.then(r,r))}function i1(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,at===r&&(Pe&o)===o&&(At===4||At===3&&(Pe&62914560)===Pe&&300>en()-sd?($e&2)===0&&Ko(r,0):Mg|=o,Go===Pe&&(Go=0)),Mr(r)}function kb(r,s){s===0&&(s=Xl()),r=wa(r,s),r!==null&&(Gi(r,s),Mr(r))}function s1(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),kb(r,o)}function a1(r,s){var o=0;switch(r.tag){case 31:case 13:var c=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),kb(r,o)}function o1(r,s){return oa(r,s)}var dd=null,$o=null,Gg=!1,fd=!1,Hg=!1,ws=0;function Mr(r){r!==$o&&r.next===null&&($o===null?dd=$o=r:$o=$o.next=r),fd=!0,Gg||(Gg=!0,u1())}function Uu(r,s){if(!Hg&&fd){Hg=!0;do for(var o=!1,c=dd;c!==null;){if(r!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var v=c.suspendedLanes,T=c.pingedLanes;g=(1<<31-_n(42|r)+1)-1,g&=m&~(v&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Mb(c,g))}else g=Pe,g=$n(c,c===at?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||qi(c,g)||(o=!0,Mb(c,g));c=c.next}while(o);Hg=!1}}function l1(){Vb()}function Vb(){fd=Gg=!1;var r=0;ws!==0&&v1()&&(r=ws);for(var s=en(),o=null,c=dd;c!==null;){var m=c.next,g=Ob(c,s);g===0?(c.next=null,o===null?dd=m:o.next=m,m===null&&($o=o)):(o=c,(r!==0||(g&3)!==0)&&(fd=!0)),c=m}jt!==0&&jt!==5||Uu(r),ws!==0&&(ws=0)}function Ob(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var v=31-_n(g),T=1<<v,D=m[v];D===-1?((T&o)===0||(T&c)!==0)&&(m[v]=mo(T,s)):D<=s&&(r.expiredLanes|=T),g&=~T}if(s=at,o=Pe,o=$n(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(We===2||We===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&fo(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||qi(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&fo(c),Zl(o)){case 2:case 8:o=Ft;break;case 32:o=Kr;break;case 268435456:o=$l;break;default:o=Kr}return c=Pb.bind(null,r),o=oa(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&fo(c),r.callbackPriority=2,r.callbackNode=null,2}function Pb(r,s){if(jt!==0&&jt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(hd()&&r.callbackNode!==o)return null;var c=Pe;return c=$n(r,r===at?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(pb(r,c,s),Ob(r,en()),r.callbackNode!=null&&r.callbackNode===o?Pb.bind(null,r):null)}function Mb(r,s){if(hd())return null;pb(r,s,!0)}function u1(){E1(function(){($e&6)!==0?oa(Ut,l1):Vb()})}function Kg(){if(ws===0){var r=Vo;r===0&&(r=ua,ua<<=1,(ua&261888)===0&&(ua=256)),ws=r}return ws}function Lb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Nr(""+r)}function Ub(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function c1(r,s,o,c,m){if(s==="submit"&&o&&o.stateNode===m){var g=Lb((m[nn]||null).action),v=c.submitter;v&&(s=(s=v[nn]||null)?Lb(s.formAction):v.getAttribute("formAction"),s!==null&&(g=s,v=null));var T=new ga("action","action",null,c,m);r.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ws!==0){var D=v?Ub(m,v):new FormData(m);dg(o,{pending:!0,data:D,method:m.method,action:g},null,D)}}else typeof g=="function"&&(T.preventDefault(),D=v?Ub(m,v):new FormData(m),dg(o,{pending:!0,data:D,method:m.method,action:g},g,D))},currentTarget:m}]})}}for(var Qg=0;Qg<Cm.length;Qg++){var $g=Cm[Qg],h1=$g.toLowerCase(),d1=$g[0].toUpperCase()+$g.slice(1);dr(h1,"on"+d1)}dr(gv,"onAnimationEnd"),dr(pv,"onAnimationIteration"),dr(yv,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(RR,"onTransitionRun"),dr(CR,"onTransitionStart"),dr(NR,"onTransitionCancel"),dr(_v,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function jb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var v=c.length-1;0<=v;v--){var T=c[v],D=T.instance,$=T.currentTarget;if(T=T.listener,D!==g&&m.isPropagationStopped())break e;g=T,m.currentTarget=$;try{g(m)}catch(Z){Rh(Z)}m.currentTarget=null,g=D}else for(v=0;v<c.length;v++){if(T=c[v],D=T.instance,$=T.currentTarget,T=T.listener,D!==g&&m.isPropagationStopped())break e;g=T,m.currentTarget=$;try{g(m)}catch(Z){Rh(Z)}m.currentTarget=null,g=D}}}}function Oe(r,s){var o=s[Qi];o===void 0&&(o=s[Qi]=new Set);var c=r+"__bubble";o.has(c)||(zb(s,r,2,!1),o.add(c))}function Yg(r,s,o){var c=0;s&&(c|=4),zb(o,r,c,s)}var md="_reactListening"+Math.random().toString(36).slice(2);function Xg(r){if(!r[md]){r[md]=!0,go.forEach(function(o){o!=="selectionchange"&&(f1.has(o)||Yg(o,!1,r),Yg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[md]||(s[md]=!0,Yg("selectionchange",!1,s))}}function zb(r,s,o,c){switch(gE(s)){case 2:var m=B1;break;case 8:m=F1;break;default:m=hp}o=m.bind(null,s,o,r),m=void 0,!ou||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?r.addEventListener(s,o,{capture:!0,passive:m}):r.addEventListener(s,o,!0):m!==void 0?r.addEventListener(s,o,{passive:m}):r.addEventListener(s,o,!1)}function Jg(r,s,o,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var T=c.stateNode.containerInfo;if(T===m)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===m)return;v=v.return}for(;T!==null;){if(v=Xr(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=g=v;continue e}T=T.parentNode}}c=c.return}dh(function(){var $=g,Z=bo(o),re=[];e:{var Y=vv.get(r);if(Y!==void 0){var J=ga,me=r;switch(r){case"keypress":if(ma(o)===0)break e;case"keydown":case"keyup":J=Eh;break;case"focusin":me="focus",J=rs;break;case"focusout":me="blur",J=rs;break;case"beforeblur":case"afterblur":J=rs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Th;break;case gv:case pv:case yv:J=To;break;case _v:J=Ao;break;case"scroll":case"scrollend":J=fh;break;case"wheel":J=Sh;break;case"copy":case"cut":case"paste":J=yh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=du;break;case"toggle":case"beforetoggle":J=ss}var we=(s&4)!==0,rt=!we&&(r==="scroll"||r==="scrollend"),z=we?Y!==null?Y+"Capture":null:Y;we=[];for(var P=$,Q;P!==null;){var ne=P;if(Q=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Q===null||z===null||(ne=Sn(P,z),ne!=null&&we.push(zu(P,ne,Q))),rt)break;P=P.return}0<we.length&&(Y=new J(Y,me,null,o,Z),re.push({event:Y,listeners:we}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",Y&&o!==vo&&(me=o.relatedTarget||o.fromElement)&&(Xr(me)||me[xr]))break e;if((J||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(me=o.relatedTarget||o.toElement,J=$,me=me?Xr(me):null,me!==null&&(rt=l(me),we=me.tag,me!==rt||we!==5&&we!==27&&we!==6)&&(me=null)):(J=null,me=$),J!==me)){if(we=mh,ne="onMouseLeave",z="onMouseEnter",P="mouse",(r==="pointerout"||r==="pointerover")&&(we=du,ne="onPointerLeave",z="onPointerEnter",P="pointer"),rt=J==null?Y:ha(J),Q=me==null?Y:ha(me),Y=new we(ne,P+"leave",J,o,Z),Y.target=rt,Y.relatedTarget=Q,ne=null,Xr(Z)===$&&(we=new we(z,P+"enter",me,o,Z),we.target=Q,we.relatedTarget=rt,ne=we),rt=ne,J&&me)t:{for(we=m1,z=J,P=me,Q=0,ne=z;ne;ne=we(ne))Q++;ne=0;for(var be=P;be;be=we(be))ne++;for(;0<Q-ne;)z=we(z),Q--;for(;0<ne-Q;)P=we(P),ne--;for(;Q--;){if(z===P||P!==null&&z===P.alternate){we=z;break t}z=we(z),P=we(P)}we=null}else we=null;J!==null&&Bb(re,Y,J,we,!1),me!==null&&rt!==null&&Bb(re,rt,me,we,!0)}}e:{if(Y=$?ha($):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var He=iv;else if(In(Y))if(sv)He=SR;else{He=TR;var _e=wR}else J=Y.nodeName,!J||J.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&su($.elementType)&&(He=iv):He=AR;if(He&&(He=He(r,$))){va(re,He,o,Z);break e}_e&&_e(r,Y,$),r==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&_o(Y,"number",Y.value)}switch(_e=$?ha($):window,r){case"focusin":(In(_e)||_e.contentEditable==="true")&&(So=_e,Im=$,gu=null);break;case"focusout":gu=Im=So=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,fv(re,o,Z);break;case"selectionchange":if(xR)break;case"keydown":case"keyup":fv(re,o,Z)}var Ce;if(y)e:{switch(r){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else De?Je(r,o)&&(Me="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(G&&o.locale!=="ko"&&(De||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&De&&(Ce=Zi()):(Mn=Z,Eo="value"in Mn?Mn.value:Mn.textContent,De=!0)),_e=gd($,Me),0<_e.length&&(Me=new uu(Me,r,null,o,Z),re.push({event:Me,listeners:_e}),Ce?Me.data=Ce:(Ce=Dt(o),Ce!==null&&(Me.data=Ce)))),(Ce=S?Gt(r,o):Ht(r,o))&&(Me=gd($,"onBeforeInput"),0<Me.length&&(_e=new uu("onBeforeInput","beforeinput",null,o,Z),re.push({event:_e,listeners:Me}),_e.data=Ce)),c1(re,r,$,o,Z)}jb(re,s)})}function zu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function gd(r,s){for(var o=s+"Capture",c=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Sn(r,o),m!=null&&c.unshift(zu(r,m,g)),m=Sn(r,s),m!=null&&c.push(zu(r,m,g))),r.tag===3)return c;r=r.return}return[]}function m1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Bb(r,s,o,c,m){for(var g=s._reactName,v=[];o!==null&&o!==c;){var T=o,D=T.alternate,$=T.stateNode;if(T=T.tag,D!==null&&D===c)break;T!==5&&T!==26&&T!==27||$===null||(D=$,m?($=Sn(o,g),$!=null&&v.unshift(zu(o,$,D))):m||($=Sn(o,g),$!=null&&v.push(zu(o,$,D)))),o=o.return}v.length!==0&&r.push({event:s,listeners:v})}var g1=/\r\n?/g,p1=/\u0000|\uFFFD/g;function Fb(r){return(typeof r=="string"?r:""+r).replace(g1,`
`).replace(p1,"")}function qb(r,s){return s=Fb(s),Fb(r)===s}function nt(r,s,o,c,m,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Xn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Xn(r,""+c);break;case"className":Xi(r,"class",c);break;case"tabIndex":Xi(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Xi(r,o,c);break;case"style":ch(r,c,g);break;case"data":if(s!=="object"){Xi(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Nr(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",m.name,m,null),nt(r,s,"formEncType",m.formEncType,m,null),nt(r,s,"formMethod",m.formMethod,m,null),nt(r,s,"formTarget",m.formTarget,m,null)):(nt(r,s,"encType",m.encType,m,null),nt(r,s,"method",m.method,m,null),nt(r,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=Nr(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=qt);break;case"onScroll":c!=null&&Oe("scroll",r);break;case"onScrollEnd":c!=null&&Oe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=Nr(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":Oe("beforetoggle",r),Oe("toggle",r),Yi(r,"popover",c);break;case"xlinkActuate":Yn(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yn(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yn(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yn(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yn(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yn(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yn(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yi(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bm.get(o)||o,Yi(r,o,c))}}function Wg(r,s,o,c,m,g){switch(o){case"style":ch(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?Xn(r,c):(typeof c=="number"||typeof c=="bigint")&&Xn(r,""+c);break;case"onScroll":c!=null&&Oe("scroll",r);break;case"onScrollEnd":c!=null&&Oe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=qt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$i.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=r[nn]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,m);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Yi(r,o,c)}}}function on(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",r),Oe("load",r);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var v=o[g];if(v!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,g,v,o,null)}}m&&nt(r,s,"srcSet",o.srcSet,o,null),c&&nt(r,s,"src",o.src,o,null);return;case"input":Oe("invalid",r);var T=g=v=m=null,D=null,$=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":m=Z;break;case"type":v=Z;break;case"checked":D=Z;break;case"defaultChecked":$=Z;break;case"value":g=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:nt(r,s,c,Z,o,null)}}da(r,g,T,D,$,v,m,!1);return;case"select":Oe("invalid",r),c=v=g=null;for(m in o)if(o.hasOwnProperty(m)&&(T=o[m],T!=null))switch(m){case"value":g=T;break;case"defaultValue":v=T;break;case"multiple":c=T;default:nt(r,s,m,T,o,null)}s=g,o=v,r.multiple=!!c,s!=null?Ge(r,!!c,s,!1):o!=null&&Ge(r,!!c,o,!0);return;case"textarea":Oe("invalid",r),g=m=c=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":c=T;break;case"defaultValue":m=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:nt(r,s,v,T,o,null)}Wi(r,c,m,g);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(r,s,D,c,o,null)}return;case"dialog":Oe("beforetoggle",r),Oe("toggle",r),Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":Oe("load",r);break;case"video":case"audio":for(c=0;c<ju.length;c++)Oe(ju[c],r);break;case"image":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"embed":case"source":case"link":Oe("error",r),Oe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(c=o[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,$,c,o,null)}return;default:if(su(s)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Wg(r,s,Z,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&nt(r,s,T,c,o,null))}function y1(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,v=null,T=null,D=null,$=null,Z=null;for(J in o){var re=o[J];if(o.hasOwnProperty(J)&&re!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=re;default:c.hasOwnProperty(J)||nt(r,s,J,null,c,re)}}for(var Y in c){var J=c[Y];if(re=o[Y],c.hasOwnProperty(Y)&&(J!=null||re!=null))switch(Y){case"type":g=J;break;case"name":m=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":v=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==re&&nt(r,s,Y,J,c,re)}}Ji(r,v,T,D,$,Z,g,m);return;case"select":J=v=T=Y=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":J=D;default:c.hasOwnProperty(g)||nt(r,s,g,null,c,D)}for(m in c)if(g=c[m],D=o[m],c.hasOwnProperty(m)&&(g!=null||D!=null))switch(m){case"value":Y=g;break;case"defaultValue":T=g;break;case"multiple":v=g;default:g!==D&&nt(r,s,m,g,c,D)}s=T,o=v,c=J,Y!=null?Ge(r,!!o,Y,!1):!!c!=!!o&&(s!=null?Ge(r,!!o,s,!0):Ge(r,!!o,o?[]:"",!1));return;case"textarea":J=Y=null;for(T in o)if(m=o[T],o.hasOwnProperty(T)&&m!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(r,s,T,null,c,m)}for(v in c)if(m=c[v],g=o[v],c.hasOwnProperty(v)&&(m!=null||g!=null))switch(v){case"value":Y=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&nt(r,s,v,m,c,g)}fa(r,Y,J);return;case"option":for(var me in o)if(Y=o[me],o.hasOwnProperty(me)&&Y!=null&&!c.hasOwnProperty(me))switch(me){case"selected":r.selected=!1;break;default:nt(r,s,me,null,c,Y)}for(D in c)if(Y=c[D],J=o[D],c.hasOwnProperty(D)&&Y!==J&&(Y!=null||J!=null))switch(D){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:nt(r,s,D,Y,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)Y=o[we],o.hasOwnProperty(we)&&Y!=null&&!c.hasOwnProperty(we)&&nt(r,s,we,null,c,Y);for($ in c)if(Y=c[$],J=o[$],c.hasOwnProperty($)&&Y!==J&&(Y!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:nt(r,s,$,Y,c,J)}return;default:if(su(s)){for(var rt in o)Y=o[rt],o.hasOwnProperty(rt)&&Y!==void 0&&!c.hasOwnProperty(rt)&&Wg(r,s,rt,void 0,c,Y);for(Z in c)Y=c[Z],J=o[Z],!c.hasOwnProperty(Z)||Y===J||Y===void 0&&J===void 0||Wg(r,s,Z,Y,c,J);return}}for(var z in o)Y=o[z],o.hasOwnProperty(z)&&Y!=null&&!c.hasOwnProperty(z)&&nt(r,s,z,null,c,Y);for(re in c)Y=c[re],J=o[re],!c.hasOwnProperty(re)||Y===J||Y==null&&J==null||nt(r,s,re,Y,c,J)}function Gb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _1(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,v=m.initiatorType,T=m.duration;if(g&&T&&Gb(v)){for(v=0,T=m.responseEnd,c+=1;c<o.length;c++){var D=o[c],$=D.startTime;if($>T)break;var Z=D.transferSize,re=D.initiatorType;Z&&Gb(re)&&(D=D.responseEnd,v+=Z*(D<T?1:(T-$)/(D-$)))}if(--c,s+=8*(g+v)/(m.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Zg=null,ep=null;function pd(r){return r.nodeType===9?r:r.ownerDocument}function Hb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function tp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var np=null;function v1(){var r=window.event;return r&&r.type==="popstate"?r===np?!1:(np=r,!0):(np=null,!1)}var Qb=typeof setTimeout=="function"?setTimeout:void 0,b1=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(r){return $b.resolve(null).then(r).catch(w1)}:Qb;function w1(r){setTimeout(function(){throw r})}function Ts(r){return r==="head"}function Yb(r,s){var o=s,c=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){r.removeChild(m),Wo(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Bu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Bu(o);for(var g=o.firstChild;g;){var v=g.nextSibling,T=g.nodeName;g[Yr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=v}}else o==="body"&&Bu(r.ownerDocument.body);o=m}while(o);Wo(s)}function Xb(r,s){var o=r;r=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=c}while(o)}function rp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rp(o),ca(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function T1(r,s,o,c){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Yr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=rr(r.nextSibling),r===null)break}return null}function A1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=rr(r.nextSibling),r===null))return null;return r}function Jb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=rr(r.nextSibling),r===null))return null;return r}function ip(r){return r.data==="$?"||r.data==="$~"}function sp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function S1(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function rr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var ap=null;function Wb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return rr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function Zb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function eE(r,s,o){switch(s=pd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Bu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ca(r)}var ir=new Map,tE=new Set;function yd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var yi=ce.d;ce.d={f:I1,r:x1,D:R1,C:C1,L:N1,m:D1,X:V1,S:k1,M:O1};function I1(){var r=yi.f(),s=ld();return r||s}function x1(r){var s=Jr(r);s!==null&&s.tag===5&&s.type==="form"?_0(s):yi.r(r)}var Yo=typeof document>"u"?null:document;function nE(r,s,o){var c=Yo;if(c&&typeof s=="string"&&s){var m=wt(s);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),tE.has(m)||(tE.add(m),r={rel:r,crossOrigin:o,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),on(s,"link",r),It(s),c.head.appendChild(s)))}}function R1(r){yi.D(r),nE("dns-prefetch",r,null)}function C1(r,s){yi.C(r,s),nE("preconnect",r,s)}function N1(r,s,o){yi.L(r,s,o);var c=Yo;if(c&&r&&s){var m='link[rel="preload"][as="'+wt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+wt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+wt(o.imageSizes)+'"]')):m+='[href="'+wt(r)+'"]';var g=m;switch(s){case"style":g=Xo(r);break;case"script":g=Jo(r)}ir.has(g)||(r=b({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),ir.set(g,r),c.querySelector(m)!==null||s==="style"&&c.querySelector(Fu(g))||s==="script"&&c.querySelector(qu(g))||(s=c.createElement("link"),on(s,"link",r),It(s),c.head.appendChild(s)))}}function D1(r,s){yi.m(r,s);var o=Yo;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+wt(c)+'"][href="'+wt(r)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Jo(r)}if(!ir.has(g)&&(r=b({rel:"modulepreload",href:r},s),ir.set(g,r),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(qu(g)))return}c=o.createElement("link"),on(c,"link",r),It(c),o.head.appendChild(c)}}}function k1(r,s,o){yi.S(r,s,o);var c=Yo;if(c&&r){var m=cr(c).hoistableStyles,g=Xo(r);s=s||"default";var v=m.get(g);if(!v){var T={loading:0,preload:null};if(v=c.querySelector(Fu(g)))T.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":s},o),(o=ir.get(g))&&op(r,o);var D=v=c.createElement("link");It(D),on(D,"link",r),D._p=new Promise(function($,Z){D.onload=$,D.onerror=Z}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,_d(v,s,c)}v={type:"stylesheet",instance:v,count:1,state:T},m.set(g,v)}}}function V1(r,s){yi.X(r,s);var o=Yo;if(o&&r){var c=cr(o).hoistableScripts,m=Jo(r),g=c.get(m);g||(g=o.querySelector(qu(m)),g||(r=b({src:r,async:!0},s),(s=ir.get(m))&&lp(r,s),g=o.createElement("script"),It(g),on(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function O1(r,s){yi.M(r,s);var o=Yo;if(o&&r){var c=cr(o).hoistableScripts,m=Jo(r),g=c.get(m);g||(g=o.querySelector(qu(m)),g||(r=b({src:r,async:!0,type:"module"},s),(s=ir.get(m))&&lp(r,s),g=o.createElement("script"),It(g),on(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function rE(r,s,o,c){var m=(m=Ne.current)?yd(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Xo(o.href),o=cr(m).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Xo(o.href);var g=cr(m).hoistableStyles,v=g.get(r);if(v||(m=m.ownerDocument||m,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,v),(g=m.querySelector(Fu(r)))&&!g._p&&(v.instance=g,v.state.loading=5),ir.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ir.set(r,o),g||P1(m,r,o,v.state))),s&&c===null)throw Error(i(528,""));return v}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Jo(o),o=cr(m).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Xo(r){return'href="'+wt(r)+'"'}function Fu(r){return'link[rel="stylesheet"]['+r+"]"}function iE(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function P1(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),on(s,"link",o),It(s),r.head.appendChild(s))}function Jo(r){return'[src="'+wt(r)+'"]'}function qu(r){return"script[async]"+r}function sE(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+wt(o.href)+'"]');if(c)return s.instance=c,It(c),c;var m=b({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),It(c),on(c,"style",m),_d(c,o.precedence,r),s.instance=c;case"stylesheet":m=Xo(o.href);var g=r.querySelector(Fu(m));if(g)return s.state.loading|=4,s.instance=g,It(g),g;c=iE(o),(m=ir.get(m))&&op(c,m),g=(r.ownerDocument||r).createElement("link"),It(g);var v=g;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),on(g,"link",c),s.state.loading|=4,_d(g,o.precedence,r),s.instance=g;case"script":return g=Jo(o.src),(m=r.querySelector(qu(g)))?(s.instance=m,It(m),m):(c=o,(m=ir.get(g))&&(c=b({},o),lp(c,m)),r=r.ownerDocument||r,m=r.createElement("script"),It(m),on(m,"link",c),r.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,_d(c,o.precedence,r));return s.instance}function _d(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,v=0;v<c.length;v++){var T=c[v];if(T.dataset.precedence===s)g=T;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function lp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var vd=null;function aE(r,s,o){if(vd===null){var c=new Map,m=vd=new Map;m.set(o,c)}else m=vd,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var g=o[m];if(!(g[Yr]||g[Et]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(s)||"";v=r+v;var T=c.get(v);T?T.push(g):c.set(v,[g])}}return c}function oE(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function M1(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function L1(r,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Xo(c.href),g=s.querySelector(Fu(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=bd.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,It(g);return}g=s.ownerDocument||s,c=iE(c),(m=ir.get(m))&&op(c,m),g=g.createElement("link"),It(g);var v=g;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),on(g,"link",c),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=bd.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var up=0;function U1(r,s){return r.stylesheets&&r.count===0&&wd(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var c=setTimeout(function(){if(r.stylesheets&&wd(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&up===0&&(up=62500*_1());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wd(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>up?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ed=null;function wd(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ed=new Map,s.forEach(j1,r),Ed=null,bd.call(r))}function j1(r,s){if(!(s.state.loading&4)){var o=Ed.get(r);if(o)var c=o.get(null);else{o=new Map,Ed.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var v=m[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}m=s.instance,v=m.getAttribute("data-precedence"),g=o.get(v)||c,g===c&&o.set(null,m),o.set(v,m),this.count++,c=bd.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),s.state.loading|=4}}var Gu={$$typeof:j,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function z1(r,s,o,c,m,g,v,T,D){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function uE(r,s,o,c,m,g,v,T,D,$,Z,re){return r=new z1(r,s,o,v,D,$,Z,re,T),s=1,g===!0&&(s|=24),g=Un(3,null,null,s),r.current=g,g.stateNode=r,s=Fm(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Km(g),r}function cE(r){return r?(r=Ro,r):Ro}function hE(r,s,o,c,m,g){m=cE(m),c.context===null?c.context=m:c.pendingContext=m,c=ds(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=fs(r,c,s),o!==null&&(Dn(o,r,s),wu(o,r,s))}function dE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function cp(r,s){dE(r,s),(r=r.alternate)&&dE(r,s)}function fE(r){if(r.tag===13||r.tag===31){var s=wa(r,67108864);s!==null&&Dn(s,r,67108864),cp(r,67108864)}}function mE(r){if(r.tag===13||r.tag===31){var s=qn();s=Wl(s);var o=wa(r,s);o!==null&&Dn(o,r,s),cp(r,s)}}var Td=!0;function B1(r,s,o,c){var m=ee.T;ee.T=null;var g=ce.p;try{ce.p=2,hp(r,s,o,c)}finally{ce.p=g,ee.T=m}}function F1(r,s,o,c){var m=ee.T;ee.T=null;var g=ce.p;try{ce.p=8,hp(r,s,o,c)}finally{ce.p=g,ee.T=m}}function hp(r,s,o,c){if(Td){var m=dp(c);if(m===null)Jg(r,s,c,Ad,o),pE(r,c);else if(G1(m,r,s,o,c))c.stopPropagation();else if(pE(r,c),s&4&&-1<q1.indexOf(r)){for(;m!==null;){var g=Jr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=ur(g.pendingLanes);if(v!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-_n(v);T.entanglements[1]|=D,v&=~D}Mr(g),($e&6)===0&&(ad=en()+500,Uu(0))}}break;case 31:case 13:T=wa(g,2),T!==null&&Dn(T,g,2),ld(),cp(g,2)}if(g=dp(c),g===null&&Jg(r,s,c,Ad,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else Jg(r,s,c,null,o)}}function dp(r){return r=bo(r),fp(r)}var Ad=null;function fp(r){if(Ad=null,r=Xr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===31){if(r=d(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Ad=r,null}function gE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rh()){case Ut:return 2;case Ft:return 8;case Kr:case ih:return 32;case $l:return 268435456;default:return 32}default:return 32}}var mp=!1,As=null,Ss=null,Is=null,Hu=new Map,Ku=new Map,xs=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pE(r,s){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Hu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(s.pointerId)}}function Qu(r,s,o,c,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=Jr(s),s!==null&&fE(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function G1(r,s,o,c,m){switch(s){case"focusin":return As=Qu(As,r,s,o,c,m),!0;case"dragenter":return Ss=Qu(Ss,r,s,o,c,m),!0;case"mouseover":return Is=Qu(Is,r,s,o,c,m),!0;case"pointerover":var g=m.pointerId;return Hu.set(g,Qu(Hu.get(g)||null,r,s,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Ku.set(g,Qu(Ku.get(g)||null,r,s,o,c,m)),!0}return!1}function yE(r){var s=Xr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,ah(r.priority,function(){mE(o)});return}}else if(s===31){if(s=d(o),s!==null){r.blockedOn=s,ah(r.priority,function(){mE(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sd(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=dp(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);vo=c,o.target.dispatchEvent(c),vo=null}else return s=Jr(o),s!==null&&fE(s),r.blockedOn=o,!1;s.shift()}return!0}function _E(r,s,o){Sd(r)&&o.delete(s)}function H1(){mp=!1,As!==null&&Sd(As)&&(As=null),Ss!==null&&Sd(Ss)&&(Ss=null),Is!==null&&Sd(Is)&&(Is=null),Hu.forEach(_E),Ku.forEach(_E)}function Id(r,s){r.blockedOn===s&&(r.blockedOn=null,mp||(mp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,H1)))}var xd=null;function vE(r){xd!==r&&(xd=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xd===r&&(xd=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],m=r[s+2];if(typeof c!="function"){if(fp(c||o)===null)continue;break}var g=Jr(o);g!==null&&(r.splice(s,3),s-=3,dg(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function Wo(r){function s(D){return Id(D,r)}As!==null&&Id(As,r),Ss!==null&&Id(Ss,r),Is!==null&&Id(Is,r),Hu.forEach(s),Ku.forEach(s);for(var o=0;o<xs.length;o++){var c=xs[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<xs.length&&(o=xs[0],o.blockedOn===null);)yE(o),o.blockedOn===null&&xs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],v=m[nn]||null;if(typeof g=="function")v||vE(o);else if(v){var T=null;if(g&&g.hasAttribute("formAction")){if(m=g,v=g[nn]||null)T=v.formAction;else if(fp(m)!==null)continue}else T=v.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),vE(o)}}}function bE(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return m=v})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gp(r){this._internalRoot=r}Rd.prototype.render=gp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=qn();hE(o,c,r,s,null,null)},Rd.prototype.unmount=gp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;hE(r.current,2,null,r,null,null),ld(),s[xr]=null}};function Rd(r){this._internalRoot=r}Rd.prototype.unstable_scheduleHydration=function(r){if(r){var s=$r();r={blockedOn:null,target:r,priority:s};for(var o=0;o<xs.length&&s!==0&&s<xs[o].priority;o++);xs.splice(o,0,r),o===0&&yE(r)}};var EE=e.version;if(EE!=="19.2.0")throw Error(i(527,EE,"19.2.0"));ce.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var K1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Bi=Cd.inject(K1),cn=Cd}catch{}}return Yu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",m=R0,g=C0,v=N0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=uE(r,1,!1,null,null,o,c,null,m,g,v,bE),r[xr]=s.current,Xg(r),new gp(s)},Yu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,m="",g=R0,v=C0,T=N0,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=uE(r,1,!0,s,o??null,c,m,D,g,v,T,bE),s.context=cE(null),o=s.current,c=qn(),c=Wl(c),m=ds(c),m.callback=null,fs(o,m,c),o=c,s.current.lanes=o,Gi(s,o),Mr(s),r[xr]=s.current,Xg(r),new Rd(s)},Yu.version="19.2.0",Yu}var DE;function nC(){if(DE)return _p.exports;DE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_p.exports=tC(),_p.exports}var rC=nC();var kE="popstate";function iC(n={}){function e(i,a){let{pathname:l,search:u,hash:d}=i.location;return Bp("",{pathname:l,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:vc(a)}return aC(e,t,null,n)}function yt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sC(){return Math.random().toString(36).substring(2,10)}function VE(n,e){return{usr:n.state,key:n.key,idx:e}}function Bp(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dl(e):e,state:t,key:e&&e.key||i||sC()}}function vc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function aC(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,d="POP",f=null,p=_();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function _(){return(u.state||{idx:null}).idx}function b(){d="POP";let N=_(),K=N==null?null:N-p;p=N,f&&f({action:d,location:L.location,delta:K})}function A(N,K){d="PUSH";let H=Bp(L.location,N,K);p=_()+1;let j=VE(H,p),oe=L.createHref(H);try{u.pushState(j,"",oe)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;a.location.assign(oe)}l&&f&&f({action:d,location:L.location,delta:1})}function x(N,K){d="REPLACE";let H=Bp(L.location,N,K);p=_();let j=VE(H,p),oe=L.createHref(H);u.replaceState(j,"",oe),l&&f&&f({action:d,location:L.location,delta:0})}function O(N){return oC(N)}let L={get action(){return d},get location(){return n(a,u)},listen(N){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(kE,b),f=N,()=>{a.removeEventListener(kE,b),f=null}},createHref(N){return e(a,N)},createURL:O,encodeLocation(N){let K=O(N);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:A,replace:x,go(N){return u.go(N)}};return L}function oC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:vc(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function LT(n,e,t="/"){return lC(n,e,t,!1)}function lC(n,e,t,i){let a=typeof e=="string"?Dl(e):e,l=Ri(a.pathname||"/",t);if(l==null)return null;let u=UT(n);uC(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let p=bC(l);d=_C(u[f],p,i)}return d}function UT(n,e=[],t=[],i="",a=!1){let l=(u,d,f=a,p)=>{let _={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&f)return;yt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let b=Ii([i,_.relativePath]),A=t.concat(_);u.children&&u.children.length>0&&(yt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),UT(u.children,e,A,b,f)),!(u.path==null&&!u.index)&&e.push({path:b,score:pC(b,u.index),routesMeta:A})};return n.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))l(u,d);else for(let f of jT(u.path))l(u,d,!0,f)}),e}function jT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=jT(i.join("/")),d=[];return d.push(...u.map(f=>f===""?l:[l,f].join("/"))),a&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function uC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var cC=/^:[\w-]+$/,hC=3,dC=2,fC=1,mC=10,gC=-2,OE=n=>n==="*";function pC(n,e){let t=n.split("/"),i=t.length;return t.some(OE)&&(i+=gC),e&&(i+=dC),t.filter(a=>!OE(a)).reduce((a,l)=>a+(cC.test(l)?hC:l===""?fC:mC),i)}function yC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function _C(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],p=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=ef({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),A=f.route;if(!b&&p&&t&&!i[i.length-1].route.index&&(b=ef({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:Ii([l,b.pathname]),pathnameBase:AC(Ii([l,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(l=Ii([l,b.pathnameBase]))}return u}function ef(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=vC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:b},A)=>{if(_==="*"){let O=d[A]||"";u=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const x=d[A];return b&&!x?p[_]=void 0:p[_]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function vC(n,e=!1,t=!0){vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function bC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ri(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function EC(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Dl(n):n;return{pathname:t?t.startsWith("/")?t:wC(t,e):e,search:SC(i),hash:IC(a)}}function wC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function wp(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sy(n){let e=TC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Iy(n,e,t,i=!1){let a;typeof n=="string"?a=Dl(n):(a={...n},yt(!a.pathname||!a.pathname.includes("?"),wp("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),wp("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),wp("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,d;if(u==null)d=t;else{let b=e.length-1;if(!i&&u.startsWith("..")){let A=u.split("/");for(;A[0]==="..";)A.shift(),b-=1;a.pathname=A.join("/")}d=b>=0?e[b]:"/"}let f=EC(a,d),p=u&&u!=="/"&&u.endsWith("/"),_=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var Ii=n=>n.join("/").replace(/\/\/+/g,"/"),AC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zT=["POST","PUT","PATCH","DELETE"];new Set(zT);var RC=["GET",...zT];new Set(RC);var kl=B.createContext(null);kl.displayName="DataRouter";var Nf=B.createContext(null);Nf.displayName="DataRouterState";B.createContext(!1);var BT=B.createContext({isTransitioning:!1});BT.displayName="ViewTransition";var CC=B.createContext(new Map);CC.displayName="Fetchers";var NC=B.createContext(null);NC.displayName="Await";var Er=B.createContext(null);Er.displayName="Navigation";var Vc=B.createContext(null);Vc.displayName="Location";var wr=B.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var xy=B.createContext(null);xy.displayName="RouteError";function DC(n,{relative:e}={}){yt(Vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=B.useContext(Er),{hash:a,pathname:l,search:u}=Oc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ii([t,l])),i.createHref({pathname:d,search:u,hash:a})}function Vl(){return B.useContext(Vc)!=null}function Ys(){return yt(Vl(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Vc).location}var FT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qT(n){B.useContext(Er).static||B.useLayoutEffect(n)}function GT(){let{isDataRoute:n}=B.useContext(wr);return n?HC():kC()}function kC(){yt(Vl(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(kl),{basename:e,navigator:t}=B.useContext(Er),{matches:i}=B.useContext(wr),{pathname:a}=Ys(),l=JSON.stringify(Sy(i)),u=B.useRef(!1);return qT(()=>{u.current=!0}),B.useCallback((f,p={})=>{if(vr(u.current,FT),!u.current)return;if(typeof f=="number"){t.go(f);return}let _=Iy(f,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ii([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,n])}B.createContext(null);function VC(){let{matches:n}=B.useContext(wr),e=n[n.length-1];return e?e.params:{}}function Oc(n,{relative:e}={}){let{matches:t}=B.useContext(wr),{pathname:i}=Ys(),a=JSON.stringify(Sy(t));return B.useMemo(()=>Iy(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function OC(n,e){return HT(n,e)}function HT(n,e,t,i,a){yt(Vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=B.useContext(Er),{matches:u}=B.useContext(wr),d=u[u.length-1],f=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",b=d&&d.route;{let H=b&&b.path||"";KT(p,!b||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let A=Ys(),x;if(e){let H=typeof e=="string"?Dl(e):e;yt(_==="/"||H.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${H.pathname}" was given in the \`location\` prop.`),x=H}else x=A;let O=x.pathname||"/",L=O;if(_!=="/"){let H=_.replace(/^\//,"").split("/");L="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=LT(n,{pathname:L});vr(b||N!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),vr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=jC(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},f,H.params),pathname:Ii([_,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?_:Ii([_,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),u,t,i,a);return e&&K?B.createElement(Vc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},K):K}function PC(){let n=GC(),e=xC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:l},"ErrorBoundary")," or"," ",B.createElement("code",{style:l},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:a},t):null,u)}var MC=B.createElement(PC,null),LC=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?B.createElement(wr.Provider,{value:this.props.routeContext},B.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UC({routeContext:n,match:e,children:t}){let i=B.useContext(kl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(wr.Provider,{value:n},t)}function jC(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t?.errors;if(u!=null){let p=l.findIndex(_=>_.route.id&&u?.[_.route.id]!==void 0);yt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let d=!1,f=-1;if(t)for(let p=0;p<l.length;p++){let _=l[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=p),_.route.id){let{loaderData:b,errors:A}=t,x=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||x){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((p,_,b)=>{let A,x=!1,O=null,L=null;t&&(A=u&&_.route.id?u[_.route.id]:void 0,O=_.route.errorElement||MC,d&&(f<0&&b===0?(KT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,L=null):f===b&&(x=!0,L=_.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,b+1)),K=()=>{let H;return A?H=O:x?H=L:_.route.Component?H=B.createElement(_.route.Component,null):_.route.element?H=_.route.element:H=p,B.createElement(UC,{match:_,routeContext:{outlet:p,matches:N,isDataRoute:t!=null},children:H})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?B.createElement(LC,{location:t.location,revalidation:t.revalidation,component:O,error:A,children:K(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:i}):K()},null)}function Ry(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zC(n){let e=B.useContext(kl);return yt(e,Ry(n)),e}function BC(n){let e=B.useContext(Nf);return yt(e,Ry(n)),e}function FC(n){let e=B.useContext(wr);return yt(e,Ry(n)),e}function Cy(n){let e=FC(n),t=e.matches[e.matches.length-1];return yt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function qC(){return Cy("useRouteId")}function GC(){let n=B.useContext(xy),e=BC("useRouteError"),t=Cy("useRouteError");return n!==void 0?n:e.errors?.[t]}function HC(){let{router:n}=zC("useNavigate"),e=Cy("useNavigate"),t=B.useRef(!1);return qT(()=>{t.current=!0}),B.useCallback(async(a,l={})=>{vr(t.current,FT),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var PE={};function KT(n,e,t){!e&&!PE[n]&&(PE[n]=!0,vr(!1,t))}B.memo(KC);function KC({routes:n,future:e,state:t,unstable_onError:i}){return HT(n,void 0,t,i,e)}function QC({to:n,replace:e,state:t,relative:i}){yt(Vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=B.useContext(Er);vr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=B.useContext(wr),{pathname:u}=Ys(),d=GT(),f=Iy(n,Sy(l),u,i==="path"),p=JSON.stringify(f);return B.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:i})},[d,p,i,e,t]),null}function Fp(n){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $C({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){yt(!Vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=B.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=Dl(t));let{pathname:f="/",search:p="",hash:_="",state:b=null,key:A="default"}=t,x=B.useMemo(()=>{let O=Ri(f,u);return O==null?null:{location:{pathname:O,search:p,hash:_,state:b,key:A},navigationType:i}},[u,f,p,_,b,A,i]);return vr(x!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:B.createElement(Er.Provider,{value:d},B.createElement(Vc.Provider,{children:e,value:x}))}function YC({children:n,location:e}){return OC(qp(n),e)}function qp(n,e=[]){let t=[];return B.Children.forEach(n,(i,a)=>{if(!B.isValidElement(i))return;let l=[...e,a];if(i.type===B.Fragment){t.push.apply(t,qp(i.props.children,l));return}yt(i.type===Fp,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=qp(i.props.children,l)),t.push(u)}),t}var zd="get",Bd="application/x-www-form-urlencoded";function Df(n){return n!=null&&typeof n.tagName=="string"}function XC(n){return Df(n)&&n.tagName.toLowerCase()==="button"}function JC(n){return Df(n)&&n.tagName.toLowerCase()==="form"}function WC(n){return Df(n)&&n.tagName.toLowerCase()==="input"}function ZC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eN(n,e){return n.button===0&&(!e||e==="_self")&&!ZC(n)}var Nd=null;function tN(){if(Nd===null)try{new FormData(document.createElement("form"),0),Nd=!1}catch{Nd=!0}return Nd}var nN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tp(n){return n!=null&&!nN.has(n)?(vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bd}"`),null):n}function rN(n,e){let t,i,a,l,u;if(JC(n)){let d=n.getAttribute("action");i=d?Ri(d,e):null,t=n.getAttribute("method")||zd,a=Tp(n.getAttribute("enctype"))||Bd,l=new FormData(n)}else if(XC(n)||WC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(i=f?Ri(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||zd,a=Tp(n.getAttribute("formenctype"))||Tp(d.getAttribute("enctype"))||Bd,l=new FormData(d,n),!tN()){let{name:p,type:_,value:b}=n;if(_==="image"){let A=p?`${p}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else p&&l.append(p,b)}}else{if(Df(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zd,i=null,a=Bd,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ny(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iN(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ri(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function sN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function oN(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await sN(l,t);return u.links?u.links():[]}return[]}));return hN(i.flat(1).filter(aN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ME(n,e,t,i,a,l){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,p)=>u(f,p)||d(f,p)):l==="data"?e.filter((f,p)=>{let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(u(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function lN(n,e,{includeHydrateFallback:t}={}){return uN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function uN(n){return[...new Set(n)]}function cN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function hN(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(cN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function QT(){let n=B.useContext(kl);return Ny(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dN(){let n=B.useContext(Nf);return Ny(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Dy=B.createContext(void 0);Dy.displayName="FrameworkContext";function $T(){let n=B.useContext(Dy);return Ny(n,"You must render this element inside a <HydratedRouter> element"),n}function fN(n,e){let t=B.useContext(Dy),[i,a]=B.useState(!1),[l,u]=B.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,A=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let L=K=>{K.forEach(H=>{u(H.isIntersecting)})},N=new IntersectionObserver(L,{threshold:.5});return A.current&&N.observe(A.current),()=>{N.disconnect()}}},[n]),B.useEffect(()=>{if(i){let L=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(L)}}},[i]);let x=()=>{a(!0)},O=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,A,{}]:[l,A,{onFocus:Xu(d,x),onBlur:Xu(f,O),onMouseEnter:Xu(p,x),onMouseLeave:Xu(_,O),onTouchStart:Xu(b,x)}]:[!1,A,{}]}function Xu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mN({page:n,...e}){let{router:t}=QT(),i=B.useMemo(()=>LT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?B.createElement(pN,{page:n,matches:i,...e}):null}function gN(n){let{manifest:e,routeModules:t}=$T(),[i,a]=B.useState([]);return B.useEffect(()=>{let l=!1;return oN(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function pN({page:n,matches:e,...t}){let i=Ys(),{manifest:a,routeModules:l}=$T(),{basename:u}=QT(),{loaderData:d,matches:f}=dN(),p=B.useMemo(()=>ME(n,e,f,a,i,"data"),[n,e,f,a,i]),_=B.useMemo(()=>ME(n,e,f,a,i,"assets"),[n,e,f,a,i]),b=B.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let O=new Set,L=!1;if(e.forEach(K=>{let H=a.routes[K.route.id];!H||!H.hasLoader||(!p.some(j=>j.route.id===K.route.id)&&K.route.id in d&&l[K.route.id]?.shouldRevalidate||H.hasClientLoader?L=!0:O.add(K.route.id))}),O.size===0)return[];let N=iN(n,u,"data");return L&&O.size>0&&N.searchParams.set("_routes",e.filter(K=>O.has(K.route.id)).map(K=>K.route.id).join(",")),[N.pathname+N.search]},[u,d,i,a,p,e,n,l]),A=B.useMemo(()=>lN(_,a),[_,a]),x=gN(_);return B.createElement(B.Fragment,null,b.map(O=>B.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),A.map(O=>B.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),x.map(({key:O,link:L})=>B.createElement("link",{key:O,nonce:t.nonce,...L})))}function yN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YT&&(window.__reactRouterVersion="7.9.5")}catch{}function _N({basename:n,children:e,window:t}){let i=B.useRef();i.current==null&&(i.current=iC({window:t,v5Compat:!0}));let a=i.current,[l,u]=B.useState({action:a.action,location:a.location}),d=B.useCallback(f=>{B.startTransition(()=>u(f))},[u]);return B.useLayoutEffect(()=>a.listen(d),[a,d]),B.createElement($C,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var XT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JT=B.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:d,target:f,to:p,preventScrollReset:_,viewTransition:b,...A},x){let{basename:O}=B.useContext(Er),L=typeof p=="string"&&XT.test(p),N,K=!1;if(typeof p=="string"&&L&&(N=p,YT))try{let R=new URL(window.location.href),V=p.startsWith("//")?new URL(R.protocol+p):new URL(p),U=Ri(V.pathname,O);V.origin===R.origin&&U!=null?p=U+V.search+V.hash:K=!0}catch{vr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=DC(p,{relative:a}),[j,oe,ye]=fN(i,A),de=wN(p,{replace:u,state:d,target:f,preventScrollReset:_,relative:a,viewTransition:b});function C(R){e&&e(R),R.defaultPrevented||de(R)}let I=B.createElement("a",{...A,...ye,href:N||H,onClick:K||l?e:C,ref:yN(x,oe),target:f,"data-discover":!L&&t==="render"?"true":void 0});return j&&!L?B.createElement(B.Fragment,null,I,B.createElement(mN,{page:H})):I});JT.displayName="Link";var vN=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:d,children:f,...p},_){let b=Oc(u,{relative:p.relative}),A=Ys(),x=B.useContext(Nf),{navigator:O,basename:L}=B.useContext(Er),N=x!=null&&xN(b)&&d===!0,K=O.encodeLocation?O.encodeLocation(b).pathname:b.pathname,H=A.pathname,j=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(H=H.toLowerCase(),j=j?j.toLowerCase():null,K=K.toLowerCase()),j&&L&&(j=Ri(j,L)||j);const oe=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let ye=H===K||!a&&H.startsWith(K)&&H.charAt(oe)==="/",de=j!=null&&(j===K||!a&&j.startsWith(K)&&j.charAt(K.length)==="/"),C={isActive:ye,isPending:de,isTransitioning:N},I=ye?e:void 0,R;typeof i=="function"?R=i(C):R=[i,ye?"active":null,de?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(C):l;return B.createElement(JT,{...p,"aria-current":I,className:R,ref:_,style:V,to:u,viewTransition:d},typeof f=="function"?f(C):f)});vN.displayName="NavLink";var bN=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=zd,action:d,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:b,...A},x)=>{let O=SN(),L=IN(d,{relative:p}),N=u.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&XT.test(d),H=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let oe=j.nativeEvent.submitter,ye=oe?.getAttribute("formmethod")||u;O(oe||j.currentTarget,{fetcherKey:e,method:ye,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:b})};return B.createElement("form",{ref:x,method:N,action:L,onSubmit:i?f:H,...A,"data-discover":!K&&n==="render"?"true":void 0})});bN.displayName="Form";function EN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WT(n){let e=B.useContext(kl);return yt(e,EN(n)),e}function wN(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let d=GT(),f=Ys(),p=Oc(n,{relative:l});return B.useCallback(_=>{if(eN(_,e)){_.preventDefault();let b=t!==void 0?t:vc(f)===vc(p);d(n,{replace:b,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[f,d,p,t,i,e,n,a,l,u])}var TN=0,AN=()=>`__${String(++TN)}__`;function SN(){let{router:n}=WT("useSubmit"),{basename:e}=B.useContext(Er),t=qC();return B.useCallback(async(i,a={})=>{let{action:l,method:u,encType:d,formData:f,body:p}=rN(i,e);if(a.navigate===!1){let _=a.fetcherKey||AN();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:f,body:p,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function IN(n,{relative:e}={}){let{basename:t}=B.useContext(Er),i=B.useContext(wr);yt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Oc(n||".",{relative:e})},u=Ys();if(n==null){l.search=u.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(b=>b).forEach(b=>d.append("index",b));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ii([t,l.pathname])),vc(l)}function xN(n,{relative:e}={}){let t=B.useContext(BT);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=WT("useViewTransitionState"),a=Oc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ri(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Ri(t.nextLocation.pathname,i)||t.nextLocation.pathname;return ef(a.pathname,u)!=null||ef(a.pathname,l)!=null}const RN="modulepreload",CN=function(n){return"/"+n},LE={},ZT=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let p=function(_){return Promise.all(_.map(b=>Promise.resolve(b).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};var u=p;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");a=p(t.map(_=>{if(_=CN(_),_ in LE)return;LE[_]=!0;const b=_.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${A}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":RN,b||(x.as="script"),x.crossOrigin="",x.href=_,f&&x.setAttribute("nonce",f),document.head.appendChild(x),b)return new Promise((O,L)=>{x.addEventListener("load",O),x.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${_}`)))})}))}function l(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return a.then(d=>{for(const f of d||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};var UE={};const eA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},NN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],d=n[t++],f=((a&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},tA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,d=u?n[a+1]:0,f=a+2<n.length,p=f?n[a+2]:0,_=l>>2,b=(l&3)<<4|d>>4;let A=(d&15)<<2|p>>6,x=p&63;f||(x=64,u||(A=64)),i.push(t[_],t[b],t[A],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||b==null)throw new DN;const A=l<<2|d>>4;if(i.push(A),p!==64){const x=d<<4&240|p>>2;if(i.push(x),b!==64){const O=p<<6&192|b;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(n){const e=eA(n);return tA.encodeByteArray(e,!0)},tf=function(n){return kN(n).replace(/\./g,"")},nA=function(n){try{return tA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("Unable to locate global object.")}const ON=()=>VN().__FIREBASE_DEFAULTS__,PN=()=>{if(typeof process>"u"||typeof UE>"u")return;const n=UE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nA(n[1]);return e&&JSON.parse(e)},kf=()=>{try{return ON()||PN()||MN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rA=n=>{var e,t;return(t=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},LN=n=>{const e=rA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},iA=()=>{var n;return(n=kf())===null||n===void 0?void 0:n.config},sA=n=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${n}`]};class UN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function jN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tf(JSON.stringify(t)),tf(JSON.stringify(u)),""].join(".")}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function BN(){var n;const e=(n=kf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function FN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GN(){const n=zt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oA(){return!BN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ky(){try{return typeof indexedDB=="object"}catch{return!1}}function lA(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function HN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const KN="FirebaseError";class Tr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=KN,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,io.prototype.create)}}class io{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?QN(l,i):"Error",d=`${this.serviceName}: ${u} (${a}).`;return new Tr(a,d,i)}}function QN(n,e){return n.replace($N,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const $N=/\{\$([^}]+)}/g;function YN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ci(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(jE(l)&&jE(u)){if(!Ci(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function jE(n){return n!==null&&typeof n=="object"}function Pc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ic(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function sc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function XN(n,e){const t=new JN(n,e);return t.subscribe.bind(t)}class JN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");WN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Ap),a.error===void 0&&(a.error=Ap),a.complete===void 0&&(a.complete=Ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ap(){}const ZN=1e3,eD=2,tD=14400*1e3,nD=.5;function zE(n,e=ZN,t=eD){const i=e*Math.pow(t,n),a=Math.round(nD*i*(Math.random()-.5)*2);return Math.min(tD,i+a)}function Qe(n){return n&&n._delegate?n._delegate:n}class br{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ma="[DEFAULT]";class rD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new UN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:Ma})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ma){return this.instances.has(e)}getOptions(e=Ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ma){return this.component?this.component.multipleInstances?e:Ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iD(n){return n===Ma?void 0:n}function sD(n){return n.instantiationMode==="EAGER"}class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const oD={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},lD=Le.INFO,uD={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},cD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=uD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vf{constructor(e){this.name=e,this._logLevel=lD,this._logHandler=cD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const hD=(n,e)=>e.some(t=>n instanceof t);let BE,FE;function dD(){return BE||(BE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return FE||(FE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uA=new WeakMap,Gp=new WeakMap,cA=new WeakMap,Sp=new WeakMap,Vy=new WeakMap;function mD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Ls(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uA.set(t,n)}).catch(()=>{}),Vy.set(e,n),e}function gD(n){if(Gp.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Gp.set(n,e)}let Hp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pD(n){Hp=n(Hp)}function yD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Ip(this),e,...t);return cA.set(i,e.sort?e.sort():[e]),Ls(i)}:fD().includes(n)?function(...e){return n.apply(Ip(this),e),Ls(uA.get(this))}:function(...e){return Ls(n.apply(Ip(this),e))}}function _D(n){return typeof n=="function"?yD(n):(n instanceof IDBTransaction&&gD(n),hD(n,dD())?new Proxy(n,Hp):n)}function Ls(n){if(n instanceof IDBRequest)return mD(n);if(Sp.has(n))return Sp.get(n);const e=_D(n);return e!==n&&(Sp.set(n,e),Vy.set(e,n)),e}const Ip=n=>Vy.get(n);function hA(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),d=Ls(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Ls(u.result),f.oldVersion,f.newVersion,Ls(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const vD=["get","getKey","getAll","getAllKeys","count"],bD=["put","add","delete","clear"],xp=new Map;function qE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=bD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||vD.includes(t)))return;const l=async function(u,...d){const f=this.transaction(u,a?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&f.done]))[0]};return xp.set(e,l),l}pD(n=>({...n,get:(e,t,i)=>qE(e,t)||n.get(e,t,i),has:(e,t)=>!!qE(e,t)||n.has(e,t)}));class ED{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wD(n){const e=n.getComponent();return e?.type==="VERSION"}const Kp="@firebase/app",GE="0.10.13";const Ni=new Vf("@firebase/app"),TD="@firebase/app-compat",AD="@firebase/analytics-compat",SD="@firebase/analytics",ID="@firebase/app-check-compat",xD="@firebase/app-check",RD="@firebase/auth",CD="@firebase/auth-compat",ND="@firebase/database",DD="@firebase/data-connect",kD="@firebase/database-compat",VD="@firebase/functions",OD="@firebase/functions-compat",PD="@firebase/installations",MD="@firebase/installations-compat",LD="@firebase/messaging",UD="@firebase/messaging-compat",jD="@firebase/performance",zD="@firebase/performance-compat",BD="@firebase/remote-config",FD="@firebase/remote-config-compat",qD="@firebase/storage",GD="@firebase/storage-compat",HD="@firebase/firestore",KD="@firebase/vertexai-preview",QD="@firebase/firestore-compat",$D="firebase",YD="10.14.1";const nf="[DEFAULT]",XD={[Kp]:"fire-core",[TD]:"fire-core-compat",[SD]:"fire-analytics",[AD]:"fire-analytics-compat",[xD]:"fire-app-check",[ID]:"fire-app-check-compat",[RD]:"fire-auth",[CD]:"fire-auth-compat",[ND]:"fire-rtdb",[DD]:"fire-data-connect",[kD]:"fire-rtdb-compat",[VD]:"fire-fn",[OD]:"fire-fn-compat",[PD]:"fire-iid",[MD]:"fire-iid-compat",[LD]:"fire-fcm",[UD]:"fire-fcm-compat",[jD]:"fire-perf",[zD]:"fire-perf-compat",[BD]:"fire-rc",[FD]:"fire-rc-compat",[qD]:"fire-gcs",[GD]:"fire-gcs-compat",[HD]:"fire-fst",[QD]:"fire-fst-compat",[KD]:"fire-vertex","fire-js":"fire-js",[$D]:"fire-js-all"};const rf=new Map,JD=new Map,Qp=new Map;function HE(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qr(n){const e=n.name;if(Qp.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,n);for(const t of rf.values())HE(t,n);for(const t of JD.values())HE(t,n);return!0}function Oi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function WD(n,e,t=nf){Oi(n,e).clearInstance(t)}function pr(n){return n.settings!==void 0}const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new io("app","Firebase",ZD);class ek{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}const Ol=YD;function dA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:nf,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw Us.create("bad-app-name",{appName:String(a)});if(t||(t=iA()),!t)throw Us.create("no-options");const l=rf.get(a);if(l){if(Ci(t,l.options)&&Ci(i,l.config))return l;throw Us.create("duplicate-app",{appName:a})}const u=new aD(a);for(const f of Qp.values())u.addComponent(f);const d=new ek(t,i,u);return rf.set(a,d),d}function Oy(n=nf){const e=rf.get(n);if(!e&&n===nf&&iA())return dA();if(!e)throw Us.create("no-app",{appName:n});return e}function ar(n,e,t){var i;let a=(i=XD[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(d.join(" "));return}qr(new br(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const tk="firebase-heartbeat-database",nk=1,bc="firebase-heartbeat-store";let Rp=null;function fA(){return Rp||(Rp=hA(tk,nk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Us.create("idb-open",{originalErrorMessage:n.message})})),Rp}async function rk(n){try{const t=(await fA()).transaction(bc),i=await t.objectStore(bc).get(mA(n));return await t.done,i}catch(e){if(e instanceof Tr)Ni.warn(e.message);else{const t=Us.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(t.message)}}}async function KE(n,e){try{const i=(await fA()).transaction(bc,"readwrite");await i.objectStore(bc).put(e,mA(n)),await i.done}catch(t){if(t instanceof Tr)Ni.warn(t.message);else{const i=Us.create("idb-set",{originalErrorMessage:t?.message});Ni.warn(i.message)}}}function mA(n){return`${n.name}!${n.options.appId}`}const ik=1024,sk=720*60*60*1e3;class ak{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=QE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=sk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ni.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=QE(),{heartbeatsToSend:i,unsentEntries:a}=ok(this._heartbeatsCache.heartbeats),l=tf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ni.warn(t),""}}}function QE(){return new Date().toISOString().substring(0,10)}function ok(n,e=ik){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),$E(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),$E(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class lk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ky()?lA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return KE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return KE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function $E(n){return tf(JSON.stringify({version:2,heartbeats:n})).length}function uk(n){qr(new br("platform-logger",e=>new ED(e),"PRIVATE")),qr(new br("heartbeat",e=>new ak(e),"PRIVATE")),ar(Kp,GE,n),ar(Kp,GE,"esm2017"),ar("fire-js","")}uk("");function Py(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function gA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pA=gA,yA=new io("auth","Firebase",gA());const sf=new Vf("@firebase/auth");function ck(n,...e){sf.logLevel<=Le.WARN&&sf.warn(`Auth (${Ol}): ${n}`,...e)}function Fd(n,...e){sf.logLevel<=Le.ERROR&&sf.error(`Auth (${Ol}): ${n}`,...e)}function or(n,...e){throw Ly(n,...e)}function yr(n,...e){return Ly(n,...e)}function My(n,e,t){const i=Object.assign(Object.assign({},pA()),{[e]:t});return new io("auth","Firebase",i).create(e,{appName:n.name})}function xi(n){return My(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hk(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&or(n,"argument-error"),My(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ly(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yA.create(n,...e)}function Ae(n,e,...t){if(!n)throw Ly(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fd(e),new Error(e)}function Di(n,e){n||wi(e)}function $p(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dk(){return YE()==="http:"||YE()==="https:"}function YE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function fk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dk()||aA()||"connection"in navigator)?navigator.onLine:!0}function mk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Di(t>e,"Short delay should be less than long delay!"),this.isMobile=zN()||qN()}get(){return fk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Uy(n,e){Di(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class _A{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pk=new Mc(3e4,6e4);function Xs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Pi(n,e,t,i,a={}){return vA(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=Pc(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},l);return FN()||(p.referrerPolicy="no-referrer"),_A.fetch()(bA(n,n.config.apiHost,t,d),p)})}async function vA(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},gk),e);try{const a=new _k(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Dd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dd(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Dd(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Dd(n,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw My(n,_,p);or(n,_)}}catch(a){if(a instanceof Tr)throw a;or(n,"network-request-failed",{message:String(a)})}}async function Lc(n,e,t,i,a={}){const l=await Pi(n,e,t,i,a);return"mfaPendingCredential"in l&&or(n,"multi-factor-auth-required",{_serverResponse:l}),l}function bA(n,e,t,i){const a=`${e}${t}?${i}`;return n.config.emulator?Uy(n.config,a):`${n.config.apiScheme}://${a}`}function yk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _k{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(yr(this.auth,"network-request-failed")),pk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=yr(n,e,i);return a.customData._tokenResponse=t,a}function XE(n){return n!==void 0&&n.enterprise!==void 0}class vk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bk(n,e){return Pi(n,"GET","/v2/recaptchaConfig",Xs(n,e))}async function Ek(n,e){return Pi(n,"POST","/v1/accounts:delete",e)}async function EA(n,e){return Pi(n,"POST","/v1/accounts:lookup",e)}function hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wA(n,e=!1){const t=Qe(n),i=await t.getIdToken(e),a=jy(i);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:hc(Cp(a.auth_time)),issuedAtTime:hc(Cp(a.iat)),expirationTime:hc(Cp(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Cp(n){return Number(n)*1e3}function jy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{const a=nA(t);return a?JSON.parse(a):(Fd("Failed to decode base64 JWT payload"),null)}catch(a){return Fd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function JE(n){const e=jy(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Tr&&wk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Tk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Yp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function af(n){var e;const t=n.auth,i=await n.getIdToken(),a=await fl(n,EA(t,{idToken:i}));Ae(a?.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?AA(l.providerUserInfo):[],d=Ak(n.providerData,u),f=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!d?.length,_=f?p:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Yp(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,b)}async function TA(n){const e=Qe(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ak(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function AA(n){return n.map(e=>{var{providerId:t}=e,i=Py(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Sk(n,e){const t=await vA(n,{},async()=>{const i=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=bA(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",_A.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ik(n,e){return Pi(n,"POST","/v2/accounts:revokeToken",Xs(n,e))}class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=JE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Sk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new ol;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ae(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ae(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return wi("not implemented")}}function Cs(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ti{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=Py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await fl(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wA(this,e)}reload(){return TA(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await fl(this,Ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,d,f,p,_;const b=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(a=t.email)!==null&&a!==void 0?a:void 0,x=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,L=(d=t.tenantId)!==null&&d!==void 0?d:void 0,N=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,K=(p=t.createdAt)!==null&&p!==void 0?p:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:oe,isAnonymous:ye,providerData:de,stsTokenManager:C}=t;Ae(j&&C,e,"internal-error");const I=ol.fromJSON(this.name,C);Ae(typeof j=="string",e,"internal-error"),Cs(b,e.name),Cs(A,e.name),Ae(typeof oe=="boolean",e,"internal-error"),Ae(typeof ye=="boolean",e,"internal-error"),Cs(x,e.name),Cs(O,e.name),Cs(L,e.name),Cs(N,e.name),Cs(K,e.name),Cs(H,e.name);const R=new Ti({uid:j,auth:e,email:A,emailVerified:oe,displayName:b,isAnonymous:ye,photoURL:O,phoneNumber:x,tenantId:L,stsTokenManager:I,createdAt:K,lastLoginAt:H});return de&&Array.isArray(de)&&(R.providerData=de.map(V=>Object.assign({},V))),N&&(R._redirectEventId=N),R}static async _fromIdTokenResponse(e,t,i=!1){const a=new ol;a.updateFromServerResponse(t);const l=new Ti({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await af(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?AA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,d=new ol;d.updateFromIdToken(i);const f=new Ti({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Yp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}const WE=new Map;function Ai(n){Di(n instanceof Function,"Expected a class definition");let e=WE.get(n);return e?(Di(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WE.set(n,e),e)}class SA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SA.type="NONE";const Xp=SA;function qd(n,e,t){return`firebase:${n}:${e}:${t}`}class ll{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=qd(this.userKey,a.apiKey,l),this.fullPersistenceKey=qd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ll(Ai(Xp),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ai(Xp);const u=qd(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const _=await p._get(u);if(_){const b=Ti._fromJSON(e,_);p!==l&&(d=b),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new ll(l,e,i):(l=f[0],d&&await l._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new ll(l,e,i))}}function ZE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DA(e))return"Blackberry";if(kA(e))return"Webos";if(xA(e))return"Safari";if((e.includes("chrome/")||RA(e))&&!e.includes("edge/"))return"Chrome";if(NA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function IA(n=zt()){return/firefox\//i.test(n)}function xA(n=zt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RA(n=zt()){return/crios\//i.test(n)}function CA(n=zt()){return/iemobile/i.test(n)}function NA(n=zt()){return/android/i.test(n)}function DA(n=zt()){return/blackberry/i.test(n)}function kA(n=zt()){return/webos/i.test(n)}function zy(n=zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xk(n=zt()){var e;return zy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Rk(){return GN()&&document.documentMode===10}function VA(n=zt()){return zy(n)||NA(n)||kA(n)||DA(n)||/windows phone/i.test(n)||CA(n)}function OA(n,e=[]){let t;switch(n){case"Browser":t=ZE(zt());break;case"Worker":t=`${ZE(zt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ol}/${i}`}class Ck{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,d)=>{try{const f=e(l);u(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Nk(n,e={}){return Pi(n,"GET","/v2/passwordPolicy",Xs(n,e))}const Dk=6;class kk{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:Dk,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Vk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ew(this),this.idTokenSubscription=new ew(this),this.beforeStateQueue=new Ck(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var i,a;if(!this._deleted&&(this.persistenceManager=await ll.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await EA(this,{idToken:e}),i=await Ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(pr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(xi(this));const t=e?Qe(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nk(this),t=new kk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new io("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Ik(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await ll.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ck(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Js(n){return Qe(n)}class ew{constructor(e){this.auth=e,this.observer=null,this.addObserver=XN(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ok(n){Of=n}function PA(n){return Of.loadJS(n)}function Pk(){return Of.recaptchaEnterpriseScript}function Mk(){return Of.gapiScript}function Lk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Uk="recaptcha-enterprise",jk="NO_RECAPTCHA";class zk{constructor(e){this.type=Uk,this.auth=Js(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{bk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new vk(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(f=>{d(f)})})}function a(l,u,d){const f=window.grecaptcha;XE(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(jk)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,u)=>{i(this.auth).then(d=>{if(!t&&XE(window.grecaptcha))a(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Pk();f.length!==0&&(f+=d),PA(f).then(()=>{a(d,l,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function tw(n,e,t,i=!1){const a=new zk(n);let l;try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Jp(n,e,t,i){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await tw(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await tw(n,e,t,t==="getOobCode");return i(n,u)}else return Promise.reject(l)})}function MA(n,e){const t=Oi(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ci(l,e??{}))return a;or(a,"already-initialized")}return t.initialize({options:e})}function Bk(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function LA(n,e,t){const i=Js(n);Ae(i._canInitEmulator,i,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=UA(e),{host:u,port:d}=Fk(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})}),qk()}function UA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Fk(n){const e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:nw(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:nw(u)}}}function nw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Pf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function Gk(n,e){return Pi(n,"POST","/v1/accounts:signUp",e)}async function Hk(n,e){return Lc(n,"POST","/v1/accounts:signInWithPassword",Xs(n,e))}async function Kk(n,e){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}async function Qk(n,e){return Lc(n,"POST","/v1/accounts:signInWithEmailLink",Xs(n,e))}class ml extends Pf{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new ml(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ml(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,t,"signInWithPassword",Hk);case"emailLink":return Kk(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jp(e,i,"signUpPassword",Gk);case"emailLink":return Qk(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ul(n,e){return Lc(n,"POST","/v1/accounts:signInWithIdp",Xs(n,e))}const $k="http://localhost";class js extends Pf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=Py(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new js(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return ul(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ul(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ul(e,t)}buildRequest(){const e={requestUri:$k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}function Yk(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xk(n){const e=ic(sc(n)).link,t=e?ic(sc(e)).deep_link_id:null,i=ic(sc(n)).deep_link_id;return(i?ic(sc(i)).link:null)||i||t||e||n}class Mf{constructor(e){var t,i,a,l,u,d;const f=ic(sc(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,b=Yk((a=f.mode)!==null&&a!==void 0?a:null);Ae(p&&_&&b,"argument-error"),this.apiKey=p,this.operation=b,this.code=_,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=Xk(e);try{return new Mf(t)}catch{return null}}}class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(e,t){return ml._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Mf.parseLink(t);return Ae(i,"argument-error"),ml._fromEmailAndCode(e,i.code,i.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class By{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Uc extends By{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vi extends Uc{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";class Lr extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return js._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";class bi extends Uc{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";class Ei extends Uc{constructor(){super("twitter.com")}static credential(e,t){return js._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ei.credential(t,i)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";async function Jk(n,e){return Lc(n,"POST","/v1/accounts:signUp",Xs(n,e))}class Ka{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Ti._fromIdTokenResponse(e,i,a),u=rw(i);return new Ka({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=rw(i);return new Ka({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function rw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class of extends Tr{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,of.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new of(e,t,i,a)}}function jA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?of._fromErrorAndOperation(n,l,e,i):l})}async function Wk(n,e,t=!1){const i=await fl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ka._forOperation(n,"link",i)}async function Zk(n,e,t=!1){const{auth:i}=n;if(pr(i.app))return Promise.reject(xi(i));const a="reauthenticate";try{const l=await fl(n,jA(i,a,e,n),t);Ae(l.idToken,i,"internal-error");const u=jy(l.idToken);Ae(u,i,"internal-error");const{sub:d}=u;return Ae(n.uid===d,i,"user-mismatch"),Ka._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&or(i,"user-mismatch"),l}}async function zA(n,e,t=!1){if(pr(n.app))return Promise.reject(xi(n));const i="signIn",a=await jA(n,i,e),l=await Ka._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function BA(n,e){return zA(Js(n),e)}async function FA(n){const e=Js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qA(n,e,t){if(pr(n.app))return Promise.reject(xi(n));const i=Js(n),u=await Jp(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jk).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&FA(n),f}),d=await Ka._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function GA(n,e,t){return pr(n.app)?Promise.reject(xi(n)):BA(Qe(n),so.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&FA(n),i})}async function eV(n,e){return Pi(n,"POST","/v1/accounts:update",e)}async function HA(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Qe(n),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await fl(i,eV(i.auth,l));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function Wp(n,e){return Qe(n).setPersistence(e)}function KA(n,e,t,i){return Qe(n).onIdTokenChanged(e,t,i)}function QA(n,e,t){return Qe(n).beforeAuthStateChanged(e,t)}function $A(n,e,t,i){return Qe(n).onAuthStateChanged(e,t,i)}function YA(n){return Qe(n).signOut()}const lf="__sak";class XA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const tV=1e3,nV=10;class JA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);Rk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nV):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},tV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JA.type="LOCAL";const uf=JA;class WA extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WA.type="SESSION";const Fy=WA;function rV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Lf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(u).map(async p=>p(t.origin,l)),f=await rV(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];function qy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class iV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((d,f)=>{const p=qy("",20);a.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(b){const A=b;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function zr(){return window}function sV(n){zr().location.href=n}function ZA(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function aV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oV(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function lV(){return ZA()?self:null}const eS="firebaseLocalStorageDb",uV=1,cf="firebaseLocalStorage",tS="fbase_key";class jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uf(n,e){return n.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function cV(){const n=indexedDB.deleteDatabase(eS);return new jc(n).toPromise()}function Zp(){const n=indexedDB.open(eS,uV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(cf,{keyPath:tS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(cf)?e(i):(i.close(),await cV(),e(await Zp()))})})}async function iw(n,e,t){const i=Uf(n,!0).put({[tS]:e,value:t});return new jc(i).toPromise()}async function hV(n,e){const t=Uf(n,!1).get(e),i=await new jc(t).toPromise();return i===void 0?null:i.value}function sw(n,e){const t=Uf(n,!0).delete(e);return new jc(t).toPromise()}const dV=800,fV=3;class nS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>fV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(lV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await aV(),!this.activeServiceWorker)return;this.sender=new iV(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zp();return await iw(e,lf,"1"),await sw(e,lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>hV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Uf(a,!1).getAll();return new jc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nS.type="LOCAL";const rS=nS;new Mc(3e4,6e4);function iS(n,e){return e?Ai(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Gy extends Pf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mV(n){return zA(n.auth,new Gy(n),n.bypassAuthState)}function gV(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),Zk(t,new Gy(n),n.bypassAuthState)}async function pV(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),Wk(t,new Gy(n),n.bypassAuthState)}class sS{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mV;case"linkViaPopup":case"linkViaRedirect":return pV;case"reauthViaPopup":case"reauthViaRedirect":return gV;default:or(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yV=new Mc(2e3,1e4);async function aS(n,e,t){if(pr(n.app))return Promise.reject(yr(n,"operation-not-supported-in-this-environment"));const i=Js(n);hk(n,e,By);const a=iS(i,t);return new Fa(i,"signInViaPopup",e,a).executeNotNull()}class Fa extends sS{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=qy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yV.get())};e()}}Fa.currentPopupAction=null;const _V="pendingRedirect",Gd=new Map;class vV extends sS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Gd.get(this.auth._key());if(!e){try{const i=await bV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Gd.set(this.auth._key(),e)}return this.bypassAuthState||Gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bV(n,e){const t=TV(e),i=wV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function EV(n,e){Gd.set(n._key(),e)}function wV(n){return Ai(n._redirectPersistence)}function TV(n){return qd(_V,n.config.apiKey,n.name)}async function AV(n,e,t=!1){if(pr(n.app))return Promise.reject(xi(n));const i=Js(n),a=iS(i,e),u=await new vV(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const SV=600*1e3;class IV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!oS(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(yr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SV&&this.cachedEventUids.clear(),this.cachedEventUids.has(aw(e))}saveEventToCache(e){this.cachedEventUids.add(aw(e)),this.lastProcessedEventTime=Date.now()}}function aw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function xV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oS(n);default:return!1}}async function RV(n,e={}){return Pi(n,"GET","/v1/projects",e)}const CV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NV=/^https?/;async function DV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RV(n);for(const t of e)try{if(kV(t))return}catch{}or(n,"unauthorized-domain")}function kV(n){const e=$p(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!NV.test(t))return!1;if(CV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const VV=new Mc(3e4,6e4);function ow(){const n=zr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OV(n){return new Promise((e,t)=>{var i,a,l;function u(){ow(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ow(),t(yr(n,"network-request-failed"))},timeout:VV.get()})}if(!((a=(i=zr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=zr().gapi)===null||l===void 0)&&l.load)u();else{const d=Lk("iframefcb");return zr()[d]=()=>{gapi.load?u():t(yr(n,"network-request-failed"))},PA(`${Mk()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Hd=null,e})}let Hd=null;function PV(n){return Hd=Hd||OV(n),Hd}const MV=new Mc(5e3,15e3),LV="__/auth/iframe",UV="emulator/auth/iframe",jV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BV(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Uy(e,UV):`https://${n.config.authDomain}/${LV}`,i={apiKey:e.apiKey,appName:n.name,v:Ol},a=zV.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Pc(i).slice(1)}`}async function FV(n){const e=await PV(n),t=zr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:BV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=yr(n,"network-request-failed"),d=zr().setTimeout(()=>{l(u)},MV.get());function f(){zr().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(u)})}))}const qV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GV=500,HV=600,KV="_blank",QV="http://localhost";class lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $V(n,e,t,i=GV,a=HV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},qV),{width:i.toString(),height:a.toString(),top:l,left:u}),p=zt().toLowerCase();t&&(d=RA(p)?KV:t),IA(p)&&(e=e||QV,f.scrollbars="yes");const _=Object.entries(f).reduce((A,[x,O])=>`${A}${x}=${O},`,"");if(xk(p)&&d!=="_self")return YV(e||"",d),new lw(null);const b=window.open(e||"",d,_);Ae(b,n,"popup-blocked");try{b.focus()}catch{}return new lw(b)}function YV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const XV="__/auth/handler",JV="emulator/auth/handler",WV=encodeURIComponent("fac");async function uw(n,e,t,i,a,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ol,eventId:a};if(e instanceof By){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",YN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))u[_]=b}if(e instanceof Uc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),p=f?`#${WV}=${encodeURIComponent(f)}`:"";return`${ZV(n)}?${Pc(d).slice(1)}${p}`}function ZV({config:n}){return n.emulator?Uy(n,JV):`https://${n.authDomain}/${XV}`}const Np="webStorageSupport";class eO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fy,this._completeRedirectFn=AV,this._overrideRedirectResult=EV}async _openPopup(e,t,i,a){var l;Di((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await uw(e,t,i,$p(),a);return $V(e,u,qy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await uw(e,t,i,$p(),a);return sV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Di(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await FV(e),i=new IV(e);return t.register("authEvent",a=>(Ae(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Np,{type:Np},a=>{var l;const u=(l=a?.[0])===null||l===void 0?void 0:l[Np];u!==void 0&&t(!!u),or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VA()||xA()||zy()}}const lS=eO;var cw="@firebase/auth",hw="1.7.9";class tO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rO(n){qr(new br("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ae(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OA(n)},p=new Vk(i,a,l,f);return Bk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),qr(new br("auth-internal",e=>{const t=Js(e.getProvider("auth").getImmediate());return(i=>new tO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ar(cw,hw,nO(n)),ar(cw,hw,"esm2017")}const iO=300,sO=sA("authIdTokenMaxAge")||iO;let dw=null;const aO=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sO)return;const a=t?.token;dw!==a&&(dw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uS(n=Oy()){const e=Oi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MA(n,{popupRedirectResolver:lS,persistence:[rS,uf,Fy]}),i=sA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=aO(l.toString());QA(t,u,()=>u(t.currentUser)),KA(t,d=>u(d))}}const a=rA("auth");return a&&LA(t,`http://${a}`),t}function oO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Ok({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=yr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",oO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rO("Browser");const lO=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Mf,AuthCredential:Pf,EmailAuthCredential:ml,EmailAuthProvider:so,FacebookAuthProvider:vi,GithubAuthProvider:bi,GoogleAuthProvider:Lr,OAuthCredential:js,TwitterAuthProvider:Ei,beforeAuthStateChanged:QA,browserLocalPersistence:uf,browserPopupRedirectResolver:lS,browserSessionPersistence:Fy,connectAuthEmulator:LA,createUserWithEmailAndPassword:qA,getAuth:uS,getIdTokenResult:wA,inMemoryPersistence:Xp,indexedDBLocalPersistence:rS,initializeAuth:MA,onAuthStateChanged:$A,onIdTokenChanged:KA,prodErrorMap:pA,reload:TA,setPersistence:Wp,signInWithCredential:BA,signInWithEmailAndPassword:GA,signInWithPopup:aS,signOut:YA,updateProfile:HA},Symbol.toStringTag,{value:"Module"}));var uO="firebase",cO="10.14.1";ar(uO,cO,"app");var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};var Ga,cS;(function(){var n;function e(C,I){function R(){}R.prototype=I.prototype,C.D=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(V,U,F){for(var k=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)k[Lt-2]=arguments[Lt];return I.prototype[U].apply(V,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,I,R){R||(R=0);var V=Array(16);if(typeof I=="string")for(var U=0;16>U;++U)V[U]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(U=0;16>U;++U)V[U]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],U=C.g[2];var F=C.g[3],k=I+(F^R&(U^F))+V[0]+3614090360&4294967295;I=R+(k<<7&4294967295|k>>>25),k=F+(U^I&(R^U))+V[1]+3905402710&4294967295,F=I+(k<<12&4294967295|k>>>20),k=U+(R^F&(I^R))+V[2]+606105819&4294967295,U=F+(k<<17&4294967295|k>>>15),k=R+(I^U&(F^I))+V[3]+3250441966&4294967295,R=U+(k<<22&4294967295|k>>>10),k=I+(F^R&(U^F))+V[4]+4118548399&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(U^I&(R^U))+V[5]+1200080426&4294967295,F=I+(k<<12&4294967295|k>>>20),k=U+(R^F&(I^R))+V[6]+2821735955&4294967295,U=F+(k<<17&4294967295|k>>>15),k=R+(I^U&(F^I))+V[7]+4249261313&4294967295,R=U+(k<<22&4294967295|k>>>10),k=I+(F^R&(U^F))+V[8]+1770035416&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(U^I&(R^U))+V[9]+2336552879&4294967295,F=I+(k<<12&4294967295|k>>>20),k=U+(R^F&(I^R))+V[10]+4294925233&4294967295,U=F+(k<<17&4294967295|k>>>15),k=R+(I^U&(F^I))+V[11]+2304563134&4294967295,R=U+(k<<22&4294967295|k>>>10),k=I+(F^R&(U^F))+V[12]+1804603682&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(U^I&(R^U))+V[13]+4254626195&4294967295,F=I+(k<<12&4294967295|k>>>20),k=U+(R^F&(I^R))+V[14]+2792965006&4294967295,U=F+(k<<17&4294967295|k>>>15),k=R+(I^U&(F^I))+V[15]+1236535329&4294967295,R=U+(k<<22&4294967295|k>>>10),k=I+(U^F&(R^U))+V[1]+4129170786&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^U&(I^R))+V[6]+3225465664&4294967295,F=I+(k<<9&4294967295|k>>>23),k=U+(I^R&(F^I))+V[11]+643717713&4294967295,U=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(U^F))+V[0]+3921069994&4294967295,R=U+(k<<20&4294967295|k>>>12),k=I+(U^F&(R^U))+V[5]+3593408605&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^U&(I^R))+V[10]+38016083&4294967295,F=I+(k<<9&4294967295|k>>>23),k=U+(I^R&(F^I))+V[15]+3634488961&4294967295,U=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(U^F))+V[4]+3889429448&4294967295,R=U+(k<<20&4294967295|k>>>12),k=I+(U^F&(R^U))+V[9]+568446438&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^U&(I^R))+V[14]+3275163606&4294967295,F=I+(k<<9&4294967295|k>>>23),k=U+(I^R&(F^I))+V[3]+4107603335&4294967295,U=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(U^F))+V[8]+1163531501&4294967295,R=U+(k<<20&4294967295|k>>>12),k=I+(U^F&(R^U))+V[13]+2850285829&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^U&(I^R))+V[2]+4243563512&4294967295,F=I+(k<<9&4294967295|k>>>23),k=U+(I^R&(F^I))+V[7]+1735328473&4294967295,U=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(U^F))+V[12]+2368359562&4294967295,R=U+(k<<20&4294967295|k>>>12),k=I+(R^U^F)+V[5]+4294588738&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^U)+V[8]+2272392833&4294967295,F=I+(k<<11&4294967295|k>>>21),k=U+(F^I^R)+V[11]+1839030562&4294967295,U=F+(k<<16&4294967295|k>>>16),k=R+(U^F^I)+V[14]+4259657740&4294967295,R=U+(k<<23&4294967295|k>>>9),k=I+(R^U^F)+V[1]+2763975236&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^U)+V[4]+1272893353&4294967295,F=I+(k<<11&4294967295|k>>>21),k=U+(F^I^R)+V[7]+4139469664&4294967295,U=F+(k<<16&4294967295|k>>>16),k=R+(U^F^I)+V[10]+3200236656&4294967295,R=U+(k<<23&4294967295|k>>>9),k=I+(R^U^F)+V[13]+681279174&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^U)+V[0]+3936430074&4294967295,F=I+(k<<11&4294967295|k>>>21),k=U+(F^I^R)+V[3]+3572445317&4294967295,U=F+(k<<16&4294967295|k>>>16),k=R+(U^F^I)+V[6]+76029189&4294967295,R=U+(k<<23&4294967295|k>>>9),k=I+(R^U^F)+V[9]+3654602809&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^U)+V[12]+3873151461&4294967295,F=I+(k<<11&4294967295|k>>>21),k=U+(F^I^R)+V[15]+530742520&4294967295,U=F+(k<<16&4294967295|k>>>16),k=R+(U^F^I)+V[2]+3299628645&4294967295,R=U+(k<<23&4294967295|k>>>9),k=I+(U^(R|~F))+V[0]+4096336452&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~U))+V[7]+1126891415&4294967295,F=I+(k<<10&4294967295|k>>>22),k=U+(I^(F|~R))+V[14]+2878612391&4294967295,U=F+(k<<15&4294967295|k>>>17),k=R+(F^(U|~I))+V[5]+4237533241&4294967295,R=U+(k<<21&4294967295|k>>>11),k=I+(U^(R|~F))+V[12]+1700485571&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~U))+V[3]+2399980690&4294967295,F=I+(k<<10&4294967295|k>>>22),k=U+(I^(F|~R))+V[10]+4293915773&4294967295,U=F+(k<<15&4294967295|k>>>17),k=R+(F^(U|~I))+V[1]+2240044497&4294967295,R=U+(k<<21&4294967295|k>>>11),k=I+(U^(R|~F))+V[8]+1873313359&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~U))+V[15]+4264355552&4294967295,F=I+(k<<10&4294967295|k>>>22),k=U+(I^(F|~R))+V[6]+2734768916&4294967295,U=F+(k<<15&4294967295|k>>>17),k=R+(F^(U|~I))+V[13]+1309151649&4294967295,R=U+(k<<21&4294967295|k>>>11),k=I+(U^(R|~F))+V[4]+4149444226&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~U))+V[11]+3174756917&4294967295,F=I+(k<<10&4294967295|k>>>22),k=U+(I^(F|~R))+V[2]+718787259&4294967295,U=F+(k<<15&4294967295|k>>>17),k=R+(F^(U|~I))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(U+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+F&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var R=I-this.blockSize,V=this.B,U=this.h,F=0;F<I;){if(U==0)for(;F<=R;)a(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<I;)if(V[U++]=C.charCodeAt(F++),U==this.blockSize){a(this,V),U=0;break}}else for(;F<I;)if(V[U++]=C[F++],U==this.blockSize){a(this,V),U=0;break}}this.h=U,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var R=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.u(C),C=Array(16),I=R=0;4>I;++I)for(var V=0;32>V;V+=8)C[R++]=this.g[I]>>>V&255;return C};function l(C,I){var R=d;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function u(C,I){this.h=I;for(var R=[],V=!0,U=C.length-1;0<=U;U--){var F=C[U]|0;V&&F==I||(R[U]=F,V=!1)}this.g=R}var d={};function f(C){return-128<=C&&128>C?l(C,function(I){return new u([I|0],0>I?-1:0)}):new u([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return b;if(0>C)return N(p(-C));for(var I=[],R=1,V=0;C>=R;V++)I[V]=C/R|0,R*=4294967296;return new u(I,0)}function _(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return N(_(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(I,8)),V=b,U=0;U<C.length;U+=8){var F=Math.min(8,C.length-U),k=parseInt(C.substring(U,U+F),I);8>F?(F=p(Math.pow(I,F)),V=V.j(F).add(p(k))):(V=V.j(R),V=V.add(p(k)))}return V}var b=f(0),A=f(1),x=f(16777216);n=u.prototype,n.m=function(){if(L(this))return-N(this).m();for(var C=0,I=1,R=0;R<this.g.length;R++){var V=this.i(R);C+=(0<=V?V:4294967296+V)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(O(this))return"0";if(L(this))return"-"+N(this).toString(C);for(var I=p(Math.pow(C,6)),R=this,V="";;){var U=oe(R,I).g;R=K(R,U.j(I));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=U,O(R))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function O(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function L(C){return C.h==-1}n.l=function(C){return C=K(this,C),L(C)?-1:O(C)?0:1};function N(C){for(var I=C.g.length,R=[],V=0;V<I;V++)R[V]=~C.g[V];return new u(R,~C.h).add(A)}n.abs=function(){return L(this)?N(this):this},n.add=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],V=0,U=0;U<=I;U++){var F=V+(this.i(U)&65535)+(C.i(U)&65535),k=(F>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);V=k>>>16,F&=65535,k&=65535,R[U]=k<<16|F}return new u(R,R[R.length-1]&-2147483648?-1:0)};function K(C,I){return C.add(N(I))}n.j=function(C){if(O(this)||O(C))return b;if(L(this))return L(C)?N(this).j(N(C)):N(N(this).j(C));if(L(C))return N(this.j(N(C)));if(0>this.l(x)&&0>C.l(x))return p(this.m()*C.m());for(var I=this.g.length+C.g.length,R=[],V=0;V<2*I;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<C.g.length;U++){var F=this.i(V)>>>16,k=this.i(V)&65535,Lt=C.i(U)>>>16,Wt=C.i(U)&65535;R[2*V+2*U]+=k*Wt,H(R,2*V+2*U),R[2*V+2*U+1]+=F*Wt,H(R,2*V+2*U+1),R[2*V+2*U+1]+=k*Lt,H(R,2*V+2*U+1),R[2*V+2*U+2]+=F*Lt,H(R,2*V+2*U+2)}for(V=0;V<I;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=I;V<2*I;V++)R[V]=0;return new u(R,0)};function H(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function j(C,I){this.g=C,this.h=I}function oe(C,I){if(O(I))throw Error("division by zero");if(O(C))return new j(b,b);if(L(C))return I=oe(N(C),I),new j(N(I.g),N(I.h));if(L(I))return I=oe(C,N(I)),new j(N(I.g),I.h);if(30<C.g.length){if(L(C)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,V=I;0>=V.l(C);)R=ye(R),V=ye(V);var U=de(R,1),F=de(V,1);for(V=de(V,2),R=de(R,2);!O(V);){var k=F.add(V);0>=k.l(C)&&(U=U.add(R),F=k),V=de(V,1),R=de(R,1)}return I=K(C,U.j(I)),new j(U,I)}for(U=b;0<=C.l(I);){for(R=Math.max(1,Math.floor(C.m()/I.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=p(R),k=F.j(I);L(k)||0<k.l(C);)R-=V,F=p(R),k=F.j(I);O(F)&&(F=A),U=U.add(F),C=K(C,k)}return new j(U,C)}n.A=function(C){return oe(this,C).h},n.and=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)&C.i(V);return new u(R,this.h&C.h)},n.or=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)|C.i(V);return new u(R,this.h|C.h)},n.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],V=0;V<I;V++)R[V]=this.i(V)^C.i(V);return new u(R,this.h^C.h)};function ye(C){for(var I=C.g.length+1,R=[],V=0;V<I;V++)R[V]=C.i(V)<<1|C.i(V-1)>>>31;return new u(R,C.h)}function de(C,I){var R=I>>5;I%=32;for(var V=C.g.length-R,U=[],F=0;F<V;F++)U[F]=0<I?C.i(F+R)>>>I|C.i(F+R+1)<<32-I:C.i(F+R);return new u(U,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,Ga=u}).apply(typeof fw<"u"?fw:typeof self<"u"?self:typeof window<"u"?window:{});var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};var hS,ac,dS,Kd,ey,fS,mS,gS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,E){return h==Array.prototype||h==Object.prototype||(h[y]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kd=="object"&&kd];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var E=i;h=h.split(".");for(var S=0;S<h.length-1;S++){var G=h[S];if(!(G in E))break e;E=E[G]}h=h[h.length-1],S=E[h],y=y(S),y!=S&&y!=null&&e(E,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var E=0,S=!1,G={next:function(){if(!S&&E<h.length){var W=E++;return{value:y(W,h[W]),done:!1}}return S=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,E){return E})}});var u=u||{},d=this||self;function f(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,E){return h.call.apply(h.bind,arguments)}function b(h,y,E){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,S),h.apply(y,G)}}return function(){return h.apply(y,arguments)}}function A(h,y,E){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,A.apply(null,arguments)}function x(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function O(h,y){function E(){}E.prototype=y.prototype,h.aa=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(S,G,W){for(var le=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)le[Je-2]=arguments[Je];return y.prototype[G].apply(S,le)}}function L(h){const y=h.length;if(0<y){const E=Array(y);for(let S=0;S<y;S++)E[S]=h[S];return E}return[]}function N(h,y){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(f(S)){const G=h.length||0,W=S.length||0;h.length=G+W;for(let le=0;le<W;le++)h[G+le]=S[le]}else h.push(S)}}class K{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(h){return/^[\s\xa0]*$/.test(h)}function j(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var ye=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function de(h,y,E){for(const S in h)y.call(E,h[S],S,h)}function C(h,y){for(const E in h)y.call(void 0,h[E],E,h)}function I(h){const y={};for(const E in h)y[E]=h[E];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,y){let E,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(E in S)h[E]=S[E];for(let W=0;W<R.length;W++)E=R[W],Object.prototype.hasOwnProperty.call(S,E)&&(h[E]=S[E])}}function U(h){var y=1;h=h.split(":");const E=[];for(;0<y&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function F(h){d.setTimeout(()=>{throw h},0)}function k(){var h=qe;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Lt{constructor(){this.h=this.g=null}add(y,E){const S=Wt.get();S.set(y,E),this.h?this.h.next=S:this.g=S,this.h=S}}var Wt=new K(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Ee=!1,qe=new Lt,Xe=()=>{const h=d.Promise.resolve(void 0);ce=()=>{h.then(M)}};var M=()=>{for(var h;h=k();){try{h.h.call(h.g)}catch(E){F(E)}var y=Wt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Ee=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,y),d.removeEventListener("test",E,y)}catch{}return h})();function Te(h,y){if(ae.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ye){e:{try{oe(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else E=="mouseover"?y=h.fromElement:E=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Te.aa.h.call(this)}}O(Te,ae);var Ne={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function vt(h,y,E,S,G){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!S,this.ha=G,this.key=++Zt,this.da=this.fa=!1}function Ar(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Hr(h){this.src=h,this.g={},this.h=0}Hr.prototype.add=function(h,y,E,S,G){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var le=uo(h,y,S,G);return-1<le?(y=h[le],E||(y.fa=!1)):(y=new vt(y,this.src,W,!!S,G),y.fa=E,h.push(y)),y};function sa(h,y){var E=y.type;if(E in h.g){var S=h.g[E],G=Array.prototype.indexOf.call(S,y,void 0),W;(W=0<=G)&&Array.prototype.splice.call(S,G,1),W&&(Ar(y),h.g[E].length==0&&(delete h.g[E],h.h--))}}function uo(h,y,E,S){for(var G=0;G<h.length;++G){var W=h[G];if(!W.da&&W.listener==y&&W.capture==!!E&&W.ha==S)return G}return-1}var lr="closure_lm_"+(1e6*Math.random()|0),aa={};function co(h,y,E,S,G){if(Array.isArray(y)){for(var W=0;W<y.length;W++)co(h,y[W],E,S,G);return null}return E=rh(E),h&&h[ze]?h.K(y,E,p(S)?!!S.capture:!1,G):fm(h,y,E,!1,S,G)}function fm(h,y,E,S,G,W){if(!y)throw Error("Invalid event type");var le=p(G)?!!G.capture:!!G,Je=Ql(h);if(Je||(h[lr]=Je=new Hr(h)),E=Je.add(y,E,S,le,W),E.proxy)return E;if(S=nh(),E.proxy=S,S.src=h,S.listener=E,h.addEventListener)ge||(G=le),G===void 0&&(G=!1),h.addEventListener(y.toString(),S,G);else if(h.attachEvent)h.attachEvent(fo(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function nh(){function h(E){return y.call(h.src,h.listener,E)}const y=mm;return h}function ho(h,y,E,S,G){if(Array.isArray(y))for(var W=0;W<y.length;W++)ho(h,y[W],E,S,G);else S=p(S)?!!S.capture:!!S,E=rh(E),h&&h[ze]?(h=h.i,y=String(y).toString(),y in h.g&&(W=h.g[y],E=uo(W,E,S,G),-1<E&&(Ar(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ql(h))&&(y=h.g[y.toString()],h=-1,y&&(h=uo(y,E,S,G)),(E=-1<h?y[h]:null)&&oa(E))}function oa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ze])sa(y.i,h);else{var E=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(E,S,h.capture):y.detachEvent?y.detachEvent(fo(E),S):y.addListener&&y.removeListener&&y.removeListener(S),(E=Ql(y))?(sa(E,h),E.h==0&&(E.src=null,y[lr]=null)):Ar(h)}}}function fo(h){return h in aa?aa[h]:aa[h]="on"+h}function mm(h,y){if(h.da)h=!0;else{y=new Te(y,this);var E=h.listener,S=h.ha||h.src;h.fa&&oa(h),h=E.call(S,y)}return h}function Ql(h){return h=h[lr],h instanceof Hr?h:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function rh(h){return typeof h=="function"?h:(h[en]||(h[en]=function(y){return h.handleEvent(y)}),h[en])}function Ut(){te.call(this),this.i=new Hr(this),this.M=this,this.F=null}O(Ut,te),Ut.prototype[ze]=!0,Ut.prototype.removeEventListener=function(h,y,E,S){ho(this,h,y,E,S)};function Ft(h,y){var E,S=h.F;if(S)for(E=[];S;S=S.F)E.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new ae(y,h);else if(y instanceof ae)y.target=y.target||h;else{var G=y;y=new ae(S,h),V(y,G)}if(G=!0,E)for(var W=E.length-1;0<=W;W--){var le=y.g=E[W];G=Kr(le,S,!0,y)&&G}if(le=y.g=h,G=Kr(le,S,!0,y)&&G,G=Kr(le,S,!1,y)&&G,E)for(W=0;W<E.length;W++)le=y.g=E[W],G=Kr(le,S,!1,y)&&G}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var E=h.g[y],S=0;S<E.length;S++)Ar(E[S]);delete h.g[y],h.h--}}this.F=null},Ut.prototype.K=function(h,y,E,S){return this.i.add(String(h),y,!1,E,S)},Ut.prototype.L=function(h,y,E,S){return this.i.add(String(h),y,!0,E,S)};function Kr(h,y,E,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,W=0;W<y.length;++W){var le=y[W];if(le&&!le.da&&le.capture==E){var Je=le.listener,Dt=le.ha||le.src;le.fa&&sa(h.i,le),G=Je.call(Dt,S)!==!1&&G}}return G&&!S.defaultPrevented}function ih(h,y,E){if(typeof h=="function")E&&(h=A(h,E));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function $l(h){h.g=ih(()=>{h.g=null,h.i&&(h.i=!1,$l(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class gm extends te{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:$l(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(h){te.call(this),this.h=h,this.g={}}O(la,te);var Bi=[];function cn(h){de(h.g,function(y,E){this.g.hasOwnProperty(E)&&oa(y)},h),h.g={}}la.prototype.N=function(){la.aa.N.call(this),cn(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=d.JSON.stringify,_n=d.JSON.parse,pm=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Yl(){}Yl.prototype.h=null;function sh(h){return h.h||(h.h=h.i())}function ua(){}var Sr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fi(){ae.call(this,"d")}O(Fi,ae);function ur(){ae.call(this,"c")}O(ur,ae);var $n={},qi=null;function mo(){return qi=qi||new Ut}$n.La="serverreachability";function Xl(h){ae.call(this,$n.La,h)}O(Xl,ae);function Qr(h){const y=mo();Ft(y,new Xl(y))}$n.STAT_EVENT="statevent";function Gi(h,y){ae.call(this,$n.STAT_EVENT,h),this.stat=y}O(Gi,ae);function tn(h){const y=mo();Ft(y,new Gi(y,h))}$n.Ma="timingevent";function Jl(h,y){ae.call(this,$n.Ma,h),this.size=y}O(Jl,ae);function Hi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Wl(h,y,E,S,G,W){h.info(function(){if(h.g)if(W)for(var le="",Je=W.split("&"),Dt=0;Dt<Je.length;Dt++){var De=Je[Dt].split("=");if(1<De.length){var Gt=De[0];De=De[1];var Ht=Gt.split("_");le=2<=Ht.length&&Ht[1]=="type"?le+(Gt+"="+De+"&"):le+(Gt+"=redacted&")}}else le=null;else le=W;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+`
`+E+`
`+le})}function Zl(h,y,E,S,G,W,le){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+`
`+E+`
`+W+" "+le})}function $r(h,y,E,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ir(h,E)+(S?" "+S:"")})}function ah(h,y){h.info(function(){return"TIMEOUT: "+y})}Ki.prototype.info=function(){};function Ir(h,y){if(!h.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var S=E[h];if(!(2>S.length)){var G=S[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var le=1;le<G.length;le++)G[le]=""}}}}return Qn(E)}catch{return y}}var Et={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xr;function Qi(){}O(Qi,Yl),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},xr=new Qi;function Rr(h,y,E,S){this.j=h,this.i=y,this.l=E,this.R=S||1,this.U=new la(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oh}function oh(){this.i=null,this.g="",this.h=!1}var eu={},Yr={};function ca(h,y,E){h.L=1,h.v=fa(wt(y)),h.m=E,h.P=!0,Xr(h,null)}function Xr(h,y){h.F=Date.now(),cr(h),h.A=wt(h.v);var E=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Zr(E.i,"t",S),h.C=0,E=h.j.J,h.h=new oh,h.g=Th(h.j,E?y:null,!h.m),0<h.O&&(h.M=new gm(A(h.Y,h,h.g),h.O)),y=h.U,E=h.g,S=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(Bi[0]=G.toString()),G=Bi);for(var W=0;W<G.length;W++){var le=co(E,G[W],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Qr(),Wl(h.i,h.u,h.A,h.l,h.R,h.m)}Rr.prototype.ca=function(h){h=h.target;const y=this.M;y&&En(h)==3?y.j():this.Y(h)},Rr.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=En(this.g);var y=this.g.Ba();const as=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||Ht!=4||y==7||(y==8||0>=as?Qr(3):Qr(2)),go(this);var E=this.g.Z();this.X=E;t:if(Jr(this)){var S=pa(this.g);h="";var G=S.length,W=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),$i(this);var le="";break t}this.h.i=new d.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(W&&y==G-1)});S.length=0,this.h.g+=h,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=E==200,Zl(this.i,this.u,this.A,this.l,this.R,Ht,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Dt=this.g;if((Je=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Je)){var De=Je;break t}}De=null}if(E=De)$r(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,E);else{this.o=!1,this.s=3,tn(12),vn(this),$i(this);break e}}if(this.P){E=!0;let In;for(;!this.J&&this.C<le.length;)if(In=ha(this,le),In==Yr){Ht==4&&(this.s=4,tn(14),E=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(In==eu){this.s=4,tn(15),$r(this.i,this.l,le,"[Invalid Chunk]"),E=!1;break}else $r(this.i,this.l,In,null),Cr(this,In);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||le.length!=0||this.h.h||(this.s=1,tn(16),E=!1),this.o=this.o&&E,!E)$r(this.i,this.l,le,"[Invalid Chunked Response]"),vn(this),$i(this);else if(0<le.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),hu(Gt),Gt.M=!0,tn(11))}}else $r(this.i,this.l,le,null),Cr(this,le);Ht==4&&vn(this),this.o&&!this.J&&(Ht==4?bh(this.j,this):(this.o=!1,cr(this)))}else mh(this.g),E==400&&0<le.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),vn(this),$i(this)}}}catch{}finally{}};function Jr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ha(h,y){var E=h.C,S=y.indexOf(`
`,E);return S==-1?Yr:(E=Number(y.substring(E,S)),isNaN(E)?eu:(S+=1,S+E>y.length?Yr:(y=y.slice(S,S+E),h.C=S+E,y)))}Rr.prototype.cancel=function(){this.J=!0,vn(this)};function cr(h){h.S=Date.now()+h.I,It(h,h.I)}function It(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Hi(A(h.ba,h),y)}function go(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Rr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ah(this.i,this.A),this.L!=2&&(Qr(),tn(17)),vn(this),this.s=2,$i(this)):It(this,this.S-h)};function $i(h){h.j.G==0||h.J||bh(h.j,h)}function vn(h){go(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,cn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Cr(h,y){try{var E=h.j;if(E.G!=0&&(E.g==h||Yi(E.h,h))){if(!h.K&&Yi(E.h,h)&&E.G==3){try{var S=E.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)is(E),rs(E);else break e;cu(E),tn(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=Hi(A(E.Za,E),6e3));if(1>=lh(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ti(E,11)}else if((h.K||E.g==h)&&is(E),!H(y))for(G=E.Da.g.parse(y),y=0;y<G.length;y++){let De=G[y];if(E.T=De[0],De=De[1],E.G==2)if(De[0]=="c"){E.K=De[1],E.ia=De[2];const Gt=De[3];Gt!=null&&(E.la=Gt,E.j.info("VER="+E.la));const Ht=De[4];Ht!=null&&(E.Aa=Ht,E.j.info("SVER="+E.Aa));const as=De[5];as!=null&&typeof as=="number"&&0<as&&(S=1.5*as,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const In=h.g;if(In){const va=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var W=S.h;W.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Xi(W,W.h),W.h=null))}if(S.D){const ni=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;ni&&(S.ya=ni,Ge(S.I,S.D,ni))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var le=h;if(S.qa=wh(S,S.J?S.ia:null,S.W),le.K){Yn(S.h,le);var Je=le,Dt=S.L;Dt&&(Je.I=Dt),Je.B&&(go(Je),cr(Je)),S.g=le}else _h(S);0<E.i.length&&To(E)}else De[0]!="stop"&&De[0]!="close"||ti(E,7);else E.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ti(E,7):lu(E):De[0]!="noop"&&E.l&&E.l.ta(De),E.v=0)}}Qr(4)}catch{}}var ym=class{constructor(h,y){this.g=h,this.map=y}};function tu(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function lh(h){return h.h?1:h.g?h.g.size:0}function Yi(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Xi(h,y){h.g?h.g.add(y):h.h=y}function Yn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}tu.prototype.cancel=function(){if(this.i=bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const E of h.g.values())y=y.concat(E.D);return y}return L(h.i)}function uh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var y=[],E=h.length,S=0;S<E;S++)y.push(h[S]);return y}y=[],E=0;for(S in h)y[E++]=h[S];return y}function _m(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var y=[];h=h.length;for(var E=0;E<h;E++)y.push(E);return y}y=[],E=0;for(const S in h)y[E++]=S;return y}}}function po(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var E=_m(h),S=uh(h),G=S.length,W=0;W<G;W++)y.call(void 0,S[W],E&&E[W],h)}var ru=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yo(h,y){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var S=h[E].indexOf("="),G=null;if(0<=S){var W=h[E].substring(0,S);G=h[E].substring(S+1)}else W=h[E];y(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Wr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Wr){this.h=h.h,Ji(this,h.j),this.o=h.o,this.g=h.g,da(this,h.s),this.l=h.l;var y=h.i,E=new Nr;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),_o(this,E),this.m=h.m}else h&&(y=String(h).match(ru))?(this.h=!1,Ji(this,y[1]||"",!0),this.o=Wi(y[2]||""),this.g=Wi(y[3]||"",!0),da(this,y[4]),this.l=Wi(y[5]||"",!0),_o(this,y[6]||"",!0),this.m=Wi(y[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}Wr.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Xn(y,iu,!0),":");var E=this.g;return(E||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Xn(y,iu,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Xn(E,E.charAt(0)=="/"?su:ch,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Xn(E,Em)),h.join("")};function wt(h){return new Wr(h)}function Ji(h,y,E){h.j=E?Wi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function da(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function _o(h,y,E){y instanceof Nr?(h.i=y,hh(h.i,h.h)):(E||(y=Xn(y,bm)),h.i=new Nr(y,h.h))}function Ge(h,y,E){h.i.set(y,E)}function fa(h){return Ge(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Wi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Xn(h,y,E){return typeof h=="string"?(h=encodeURI(h).replace(y,vm),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var iu=/[#\/\?@]/g,ch=/[#\?:]/g,su=/[#\?]/g,bm=/[#\?@]/g,Em=/#/g;function Nr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function qt(h){h.g||(h.g=new Map,h.h=0,h.i&&yo(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}n=Nr.prototype,n.add=function(h,y){qt(this),this.i=null,h=Pn(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this};function vo(h,y){qt(h),y=Pn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function bo(h,y){return qt(h),y=Pn(h,y),h.g.has(y)}n.forEach=function(h,y){qt(this),this.g.forEach(function(E,S){E.forEach(function(G){h.call(y,G,S,this)},this)},this)},n.na=function(){qt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let S=0;S<y.length;S++){const G=h[S];for(let W=0;W<G.length;W++)E.push(y[S])}return E},n.V=function(h){qt(this);let y=[];if(typeof h=="string")bo(this,h)&&(y=y.concat(this.g.get(Pn(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)y=y.concat(h[E])}return y},n.set=function(h,y){return qt(this),this.i=null,h=Pn(this,h),bo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Zr(h,y,E){vo(h,y),0<E.length&&(h.i=null,h.g.set(Pn(h,y),L(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var S=y[E];const W=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var G=W;le[S]!==""&&(G+="="+encodeURIComponent(String(le[S]))),h.push(G)}}return this.i=h.join("&")};function Pn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function hh(h,y){y&&!h.j&&(qt(h),h.i=null,h.g.forEach(function(E,S){var G=S.toLowerCase();S!=G&&(vo(this,S),Zr(this,G,E))},h)),h.j=y}function au(h,y){const E=new Ki;if(d.Image){const S=new Image;S.onload=x(Sn,E,"TestLoadImage: loaded",!0,y,S),S.onerror=x(Sn,E,"TestLoadImage: error",!1,y,S),S.onabort=x(Sn,E,"TestLoadImage: abort",!1,y,S),S.ontimeout=x(Sn,E,"TestLoadImage: timeout",!1,y,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function dh(h,y){const E=new Ki,S=new AbortController,G=setTimeout(()=>{S.abort(),Sn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(W=>{clearTimeout(G),W.ok?Sn(E,"TestPingServer: ok",!0,y):Sn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),Sn(E,"TestPingServer: error",!1,y)})}function Sn(h,y,E,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(E)}catch{}}function hr(){this.g=new pm}function ou(h,y,E){const S=E||"";try{po(h,function(G,W){let le=G;p(G)&&(le=Qn(G)),y.push(S+W+"="+encodeURIComponent(le))})}catch(G){throw y.push(S+"type="+encodeURIComponent("_badmap")),G}}function Dr(h){this.l=h.Ub||null,this.j=h.eb||!1}O(Dr,Yl),Dr.prototype.g=function(){return new Mn(this.l,this.j)},Dr.prototype.i=(function(h){return function(){return h}})({});function Mn(h,y){Ut.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Mn,Ut),n=Mn.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Zi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?kr(this):Zi(this),this.readyState==3&&Eo(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,kr(this))},n.Qa=function(h){this.g&&(this.response=h,kr(this))},n.ga=function(){this.g&&kr(this)};function kr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Zi(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=y.next();return h.join(`\r
`)};function Zi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ma(h){let y="";return de(h,function(E,S){y+=S,y+=":",y+=E,y+=`\r
`}),y}function es(h,y,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=ma(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Ge(h,y,E))}function ut(h){Ut.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ut,Ut);var hn=/^https?$/i,ei=["POST","PUT"];n=ut.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xr.g(),this.v=this.o?sh(this.o):sh(xr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){ga(this,W);return}if(h=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)E.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const W of S.keys())E.set(W,S.get(W));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),G=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ei,y,void 0))||S||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,le]of E)this.g.setRequestHeader(W,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wo(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){ga(this,W)}};function ga(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ts(h),ns(h)}function ts(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),ns(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ns(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fh(this):this.bb())},n.bb=function(){fh(this)};function fh(h){if(h.h&&typeof u<"u"&&(!h.v[1]||En(h)!=4||h.Z()!=2)){if(h.u&&En(h)==4)ih(h.Ea,0,h);else if(Ft(h,"readystatechange"),En(h)==4){h.h=!1;try{const le=h.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var S;if(S=le===0){var G=String(h.D).match(ru)[1]||null;!G&&d.self&&d.self.location&&(G=d.self.location.protocol.slice(0,-1)),S=!hn.test(G?G.toLowerCase():"")}E=S}if(E)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var W=2<En(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",ts(h)}}finally{ns(h)}}}}function ns(h,y){if(h.g){wo(h);const E=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ft(h,"ready");try{E.onreadystatechange=S}catch{}}}function wo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function En(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),_n(y)}};function pa(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function mh(h){const y={};h=(h.g&&2<=En(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(H(h[S]))continue;var E=U(h[S]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=y[G]||[];y[G]=W,W.push(E)}C(y,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ya(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function gh(h){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ya("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ya("baseRetryDelayMs",5e3,h),this.cb=ya("retryDelaySeedMs",1e4,h),this.Wa=ya("forwardChannelMaxRetries",2,h),this.wa=ya("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new tu(h&&h.concurrentRequestLimit),this.Da=new hr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gh.prototype,n.la=8,n.G=1,n.connect=function(h,y,E,S){tn(0),this.W=h,this.H=y||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=wh(this,null,this.W),To(this)};function lu(h){if(ph(h),h.G==3){var y=h.U++,E=wt(h.I);if(Ge(E,"SID",h.K),Ge(E,"RID",y),Ge(E,"TYPE","terminate"),_a(h,E),y=new Rr(h,h.j,y),y.L=2,y.v=fa(wt(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=y.v,E=!0),E||(y.g=Th(y.j,null),y.g.ea(y.v)),y.F=Date.now(),cr(y)}du(h)}function rs(h){h.g&&(hu(h),h.g.cancel(),h.g=null)}function ph(h){rs(h),h.u&&(d.clearTimeout(h.u),h.u=null),is(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function To(h){if(!nu(h.h)&&!h.s){h.s=!0;var y=h.Ga;ce||Xe(),Ee||(ce(),Ee=!0),qe.add(y,h),h.B=0}}function wm(h,y){return lh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Hi(A(h.Ga,h,y),Eh(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new Rr(this,this.j,h);let W=this.o;if(this.S&&(W?(W=I(W),V(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=uu(this,G,y),E=wt(this.I),Ge(E,"RID",h),Ge(E,"CVER",22),this.D&&Ge(E,"X-HTTP-Session-Id",this.D),_a(this,E),W&&(this.O?y="headers="+encodeURIComponent(String(ma(W)))+"&"+y:this.m&&es(E,this.m,W)),Xi(this.h,G),this.Ua&&Ge(E,"TYPE","init"),this.P?(Ge(E,"$req",y),Ge(E,"SID","null"),G.T=!0,ca(G,E,null)):ca(G,E,y),this.G=2}}else this.G==3&&(h?yh(this,h):this.i.length==0||nu(this.h)||yh(this))};function yh(h,y){var E;y?E=y.l:E=h.U++;const S=wt(h.I);Ge(S,"SID",h.K),Ge(S,"RID",E),Ge(S,"AID",h.T),_a(h,S),h.m&&h.o&&es(S,h.m,h.o),E=new Rr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),y&&(h.i=y.D.concat(h.i)),y=uu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Xi(h.h,E),ca(E,S,y)}function _a(h,y){h.H&&de(h.H,function(E,S){Ge(y,S,E)}),h.l&&po({},function(E,S){Ge(y,S,E)})}function uu(h,y,E){E=Math.min(h.i.length,E);var S=h.l?A(h.l.Na,h.l,h):null;e:{var G=h.i;let W=-1;for(;;){const le=["count="+E];W==-1?0<E?(W=G[0].g,le.push("ofs="+W)):W=0:le.push("ofs="+W);let Je=!0;for(let Dt=0;Dt<E;Dt++){let De=G[Dt].g;const Gt=G[Dt].map;if(De-=W,0>De)W=Math.max(0,G[Dt].g-100),Je=!1;else try{ou(Gt,le,"req"+De+"_")}catch{S&&S(Gt)}}if(Je){S=le.join("&");break e}}}return h=h.i.splice(0,E),y.D=h,S}function _h(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ce||Xe(),Ee||(ce(),Ee=!0),qe.add(y,h),h.v=0}}function cu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Hi(A(h.Fa,h),Eh(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Hi(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),rs(this),vh(this))};function hu(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function vh(h){h.g=new Rr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=wt(h.qa);Ge(y,"RID","rpc"),Ge(y,"SID",h.K),Ge(y,"AID",h.T),Ge(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ge(y,"TO",h.ja),Ge(y,"TYPE","xmlhttp"),_a(h,y),h.m&&h.o&&es(y,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=fa(wt(y)),E.m=null,E.P=!0,Xr(E,h)}n.Za=function(){this.C!=null&&(this.C=null,rs(this),cu(this),tn(19))};function is(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function bh(h,y){var E=null;if(h.g==y){is(h),hu(h),h.g=null;var S=2}else if(Yi(h.h,y))E=y.D,Yn(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var G=h.B;S=mo(),Ft(S,new Jl(S,E)),To(h)}else _h(h);else if(G=y.s,G==3||G==0&&0<y.X||!(S==1&&wm(h,y)||S==2&&cu(h)))switch(E&&0<E.length&&(y=h.h,y.i=y.i.concat(E)),G){case 1:ti(h,5);break;case 4:ti(h,10);break;case 3:ti(h,6);break;default:ti(h,2)}}}function Eh(h,y){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*y}function ti(h,y){if(h.j.info("Error code "+y),y==2){var E=A(h.fb,h),S=h.Xa;const G=!S;S=new Wr(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ji(S,"https"),fa(S),G?au(S.toString(),E):dh(S.toString(),E)}else tn(2);h.G=0,h.l&&h.l.sa(y),du(h),ph(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function du(h){if(h.G=0,h.ka=[],h.l){const y=bn(h.h);(y.length!=0||h.i.length!=0)&&(N(h.ka,y),N(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function wh(h,y,E){var S=E instanceof Wr?wt(E):new Wr(E);if(S.g!="")y&&(S.g=y+"."+S.g),da(S,S.s);else{var G=d.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var W=new Wr(null);S&&Ji(W,S),y&&(W.g=y),G&&da(W,G),E&&(W.l=E),S=W}return E=h.D,y=h.ya,E&&y&&Ge(S,E,y),Ge(S,"VER",h.la),_a(h,S),S}function Th(h,y,E){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new ut(new Dr({eb:E})):new ut(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ah(){}n=Ah.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ao(){}Ao.prototype.g=function(h,y){return new wn(h,y)};function wn(h,y){Ut.call(this),this.g=new gh(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!H(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!H(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new ss(this)}O(wn,Ut),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){lu(this.g)},wn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Qn(h),h=E);y.i.push(new ym(y.Ya++,h)),y.G==3&&To(y)},wn.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,wn.aa.N.call(this)};function Sh(h){Fi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}O(Sh,Fi);function Ih(){ur.call(this),this.status=1}O(Ih,ur);function ss(h){this.g=h}O(ss,Ah),ss.prototype.ua=function(){Ft(this.g,"a")},ss.prototype.ta=function(h){Ft(this.g,new Sh(h))},ss.prototype.sa=function(h){Ft(this.g,new Ih)},ss.prototype.ra=function(){Ft(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,gS=function(){return new Ao},mS=function(){return mo()},fS=$n,ey={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Et.NO_ERROR=0,Et.TIMEOUT=8,Et.HTTP_ERROR=6,Kd=Et,nn.COMPLETE="complete",dS=nn,ua.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,ac=ua,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,hS=ut}).apply(typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{});const mw="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let Pl="10.14.0";const zs=new Vf("@firebase/firestore");function rl(){return zs.logLevel}function hO(n){zs.setLogLevel(n)}function se(n,...e){if(zs.logLevel<=Le.DEBUG){const t=e.map(Hy);zs.debug(`Firestore (${Pl}): ${n}`,...t)}}function Ct(n,...e){if(zs.logLevel<=Le.ERROR){const t=e.map(Hy);zs.error(`Firestore (${Pl}): ${n}`,...t)}}function Hn(n,...e){if(zs.logLevel<=Le.WARN){const t=e.map(Hy);zs.warn(`Firestore (${Pl}): ${n}`,...t)}}function Hy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function fe(n="Unexpected state"){const e=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: `+n;throw Ct(e),new Error(e)}function pe(n,e){n||fe()}function dO(n,e){n||fe()}function ue(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Tr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yt.UNAUTHENTICATED)))}shutdown(){}}class fO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mO{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0);let i=this.i;const a=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let l=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xt,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await a(this.currentUser)}))},d=f=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xt)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pe(typeof i.accessToken=="string"),new pS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new Yt(e)}}class gO{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pO{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new gO(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _S{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){pe(this.o===void 0);const i=l=>{l.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,se("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pe(typeof t.token=="string"),this.R=t.token,new _S(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class _O{getToken(){return Promise.resolve(new _S(""))}invalidateToken(){}start(e,t){}shutdown(){}}function vO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Ky{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=vO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%e.length))}return i}}function Se(n,e){return n<e?-1:n>e?1:0}function gl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}function vS(n){return n+"\0"}class ot{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ie(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ot(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ot(0,0))}static max(){return new ve(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ec{constructor(e,t,i){t===void 0?t=0:t>e.length&&fe(),i===void 0?i=e.length-t:i>e.length-t&&fe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ec.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),u=t.get(a);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ue extends Ec{construct(e,t,i){return new Ue(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ie(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ue(t)}static emptyPath(){return new Ue([])}}const bO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Ec{construct(e,t,i){return new ft(e,t,i)}static isValidIdentifier(e){return bO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ie(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ie(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ie(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(u=!u,a++):d!=="."||u?(i+=d,a++):(l(),a++)}if(l(),u)throw new ie(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(t)}static emptyPath(){return new ft([])}}class he{constructor(e){this.path=e}static fromPath(e){return new he(Ue.fromString(e))}static fromName(e){return new he(Ue.fromString(e).popFirst(5))}static empty(){return new he(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Ue(e.slice()))}}class pl{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function ty(n){return n.fields.find((e=>e.kind===2))}function La(n){return n.fields.filter((e=>e.kind!==2))}function EO(n,e){let t=Se(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let i=0;i<Math.min(n.fields.length,e.fields.length);++i)if(t=wO(n.fields[i],e.fields[i]),t!==0)return t;return Se(n.fields.length,e.fields.length)}pl.UNKNOWN_ID=-1;class Ha{constructor(e,t){this.fieldPath=e,this.kind=t}}function wO(n,e){const t=ft.comparator(n.fieldPath,e.fieldPath);return t!==0?t:Se(n.kind,e.kind)}class yl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yl(0,Kn.min())}}function bS(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=ve.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new Kn(a,he.empty(),e)}function ES(n){return new Kn(n.readTime,n.key,-1)}class Kn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Kn(ve.min(),he.empty(),-1)}static max(){return new Kn(ve.max(),he.empty(),-1)}}function Qy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}const wS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ws(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==wS)throw n;se("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):q.reject(t)}static resolve(e){return new q(((t,i)=>{t(e)}))}static reject(e){return new q(((t,i)=>{i(e)}))}static waitFor(e){return new q(((t,i)=>{let a=0,l=0,u=!1;e.forEach((d=>{++a,d.next((()=>{++l,u&&l===a&&t()}),(f=>i(f)))})),u=!0,l===a&&t()}))}static or(e){let t=q.resolve(!1);for(const i of e)t=t.next((a=>a?q.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new q(((i,a)=>{const l=e.length,u=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;t(e[p]).next((_=>{u[p]=_,++d,d===l&&i(u)}),(_=>a(_)))}}))}static doWhile(e,t){return new q(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}class jf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new dc(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const a=$y(i.target.error);this.V.reject(new dc(e,a))}}static open(e,t,i,a){try{return new jf(t,e.transaction(a,i))}catch(l){throw new dc(t,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AO(t)}}class Br{constructor(e,t,i){this.name=e,this.version=t,this.p=i,Br.S(zt())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),Ua(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ky())return!1;if(Br.v())return!0;const e=zt(),t=Br.S(e),i=0<t&&t<10,a=AS(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{i(new dc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?i(new ie(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?i(new ie(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):i(new dc(e,u))},a.onupgradeneeded=l=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;this.p.O(u,a.transaction,l.oldVersion,this.version).next((()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.M(e);const d=jf.open(this.db,e,l?"readonly":"readwrite",i),f=a(d).next((p=>(d.g(),p))).catch((p=>(d.abort(p),q.reject(p)))).toPromise();return f.catch((()=>{})),await d.m,f}catch(d){const f=d,p=f.name!=="FirebaseError"&&u<3;if(se("SimpleDb","Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class TO{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ua(this.B.delete())}}class dc extends ie{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zs(n){return n.name==="IndexedDbTransactionError"}class AO{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(se("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ua(i)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),Ua(this.store.add(e))}get(e){return Ua(this.store.get(e)).next((t=>(t===void 0&&(t=null),se("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),Ua(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),Ua(this.store.count())}U(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new q(((u,d)=>{l.onerror=f=>{d(f.target.error)},l.onsuccess=f=>{u(f.target.result)}}))}{const l=this.cursor(i),u=[];return this.W(l,((d,f)=>{u.push(f)})).next((()=>u))}}G(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new q(((a,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{a(u.target.result)}}))}j(e,t){se("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const a=this.cursor(i);return this.W(a,((l,u,d)=>d.delete()))}J(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.W(a,t)}Y(e){const t=this.cursor({});return new q(((i,a)=>{t.onerror=l=>{const u=$y(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((d=>{d?u.continue():i()})):i()}}))}W(e,t){const i=[];return new q(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void a();const f=new TO(d),p=t(d.primaryKey,d.value,f);if(p instanceof q){const _=p.catch((b=>(f.done(),q.reject(b))));i.push(_)}f.isDone?a():f.K===null?d.continue():d.continue(f.K)}})).next((()=>q.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ua(n){return new q(((e,t)=>{n.onsuccess=i=>{const a=i.target.result;e(a)},n.onerror=i=>{const a=$y(i.target.error);t(a)}}))}let gw=!1;function $y(n){const e=Br.S(zt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gw||(gw=!0,setTimeout((()=>{throw i}),0)),i}}return n}class SO{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Zs(t)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Ws(t)}await this.X(6e4)}))}}class IO{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const i=new Set;let a=t,l=!0;return q.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!i.has(u))return se("IndexBackfiller",`Processing collection: ${u}`),this.ne(e,u,a).next((d=>{a-=d,i.add(u)}));l=!1})))).next((()=>t-a))}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.re(a,l))).next((d=>(se("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>u.size))}))))}re(e,t){let i=e;return t.changes.forEach(((a,l)=>{const u=ES(l);Qy(u,i)>0&&(i=u)})),new Kn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kn.oe=-1;function zc(n){return n==null}function wc(n){return n===0&&1/n==-1/0}function SS(n){return typeof n=="number"&&Number.isInteger(n)&&!wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pw(e)),e=xO(n.get(t),e);return pw(e)}function xO(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function pw(n){return n+""}function Ur(n){const e=n.length;if(pe(e>=2),e===2)return pe(n.charAt(0)===""&&n.charAt(1)===""),Ue.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const u=n.indexOf("",l);switch((u<0||u>t)&&fe(),n.charAt(u+1)){case"":const d=n.substring(l,u);let f;a.length===0?f=d:(a+=d,f=a,a=""),i.push(f);break;case"":a+=n.substring(l,u),a+="\0";break;case"":a+=n.substring(l,u+1);break;default:fe()}l=u+2}return new Ue(i)}const yw=["userId","batchId"];function Qd(n,e){return[n,pn(e)]}function IS(n,e,t){return[n,pn(e),t]}const RO={},CO=["prefixPath","collectionGroup","readTime","documentId"],NO=["prefixPath","collectionGroup","documentId"],DO=["collectionGroup","readTime","prefixPath","documentId"],kO=["canonicalId","targetId"],VO=["targetId","path"],OO=["path","targetId"],PO=["collectionId","parent"],MO=["indexId","uid"],LO=["uid","sequenceNumber"],UO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jO=["indexId","uid","orderedDocumentKey"],zO=["userId","collectionPath","documentId"],BO=["userId","collectionPath","largestBatchId"],FO=["userId","collectionGroup","largestBatchId"],xS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qO=[...xS,"documentOverlays"],RS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CS=RS,Yy=[...CS,"indexConfiguration","indexState","indexEntries"],GO=Yy,HO=[...Yy,"globals"];class ny extends TS{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Bt(n,e){const t=ue(n);return Br.F(t._e,e)}function _w(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ea(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NS(n,e){const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e(n[i],i,n));return t}function DS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class lt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??ln.RED,this.left=a??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new ln(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return ln.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,t,i,a,l){return this}insert(e,t,i){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vw(this.data.getIterator())}getIteratorFrom(e){return new vw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new it(this.comparator);return t.data=e,t}}class vw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(n){return n.hasNext()?n.getNext():void 0}class Vn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new it(ft.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class kS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function KO(){return typeof atob<"u"}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new kS("Invalid base64 string: "+l):l}})(e);return new bt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(pe(!!n),typeof n=="string"){let e=0;const t=QO.exec(n);if(pe(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(n.seconds),nanos:gt(n.nanos)}}function gt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}function zf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Bf(n){const e=n.mapValue.fields.__previous_value__;return zf(e)?Bf(e):e}function Tc(n){const e=ki(n.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}class $O{constructor(e,t,i,a,l,u,d,f,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p}}class Bs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bs&&e.projectId===this.projectId&&e.database===this.database}}const Ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$d={nullValue:"NULL_VALUE"};function Fs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zf(n)?4:VS(n)?9007199254740991:Ff(n)?10:11:fe()}function Gr(n,e){if(n===e)return!0;const t=Fs(n);if(t!==Fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tc(n).isEqual(Tc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ki(a.timestampValue),d=ki(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Vi(a.bytesValue).isEqual(Vi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return gt(a.geoPointValue.latitude)===gt(l.geoPointValue.latitude)&&gt(a.geoPointValue.longitude)===gt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return gt(a.integerValue)===gt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=gt(a.doubleValue),d=gt(l.doubleValue);return u===d?wc(u)===wc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},d=l.mapValue.fields||{};if(_w(u)!==_w(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Gr(u[f],d[f])))return!1;return!0})(n,e);default:return fe()}}function Ac(n,e){return(n.values||[]).find((t=>Gr(t,e)))!==void 0}function qs(n,e){if(n===e)return 0;const t=Fs(n),i=Fs(e);if(t!==i)return Se(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=gt(l.integerValue||l.doubleValue),f=gt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return bw(n.timestampValue,e.timestampValue);case 4:return bw(Tc(n),Tc(e));case 5:return Se(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=Vi(l),f=Vi(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),f=u.split("/");for(let p=0;p<d.length&&p<f.length;p++){const _=Se(d[p],f[p]);if(_!==0)return _}return Se(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=Se(gt(l.latitude),gt(u.latitude));return d!==0?d:Se(gt(l.longitude),gt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ew(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var d,f,p,_;const b=l.fields||{},A=u.fields||{},x=(d=b.value)===null||d===void 0?void 0:d.arrayValue,O=(f=A.value)===null||f===void 0?void 0:f.arrayValue,L=Se(((p=x?.values)===null||p===void 0?void 0:p.length)||0,((_=O?.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:Ew(x,O)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ps.mapValue&&u===Ps.mapValue)return 0;if(l===Ps.mapValue)return 1;if(u===Ps.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=u.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let b=0;b<f.length&&b<_.length;++b){const A=Se(f[b],_[b]);if(A!==0)return A;const x=qs(d[f[b]],p[_[b]]);if(x!==0)return x}return Se(f.length,_.length)})(n.mapValue,e.mapValue);default:throw fe()}}function bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);const t=ki(n),i=ki(e),a=Se(t.seconds,i.seconds);return a!==0?a:Se(t.nanos,i.nanos)}function Ew(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=qs(t[a],i[a]);if(l)return l}return Se(t.length,i.length)}function _l(n){return ry(n)}function ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ki(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Vi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=ry(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${ry(t.fields[u])}`;return a+"}"})(n.mapValue):fe()}function Yd(n){switch(Fs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bf(n);return e?16+Yd(e):16;case 5:return 2*n.stringValue.length;case 6:return Vi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+Yd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return ea(i.fields,((l,u)=>{a+=l.length+Yd(u)})),a})(n.mapValue);default:throw fe()}}function Qa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iy(n){return!!n&&"integerValue"in n}function Sc(n){return!!n&&"arrayValue"in n}function ww(n){return!!n&&"nullValue"in n}function Tw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xd(n){return!!n&&"mapValue"in n}function Ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function fc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ea(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const OS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function YO(n){return"nullValue"in n?$d:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qa(Bs.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ff(n)?OS:{mapValue:{}}:fe()}function XO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qa(Bs.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?OS:"mapValue"in n?Ff(n)?{mapValue:{}}:Ps:fe()}function Aw(n,e){const t=qs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Sw(n,e){const t=qs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=ft.emptyPath(),i={},a=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,a),i={},a=[],t=d.popLast()}u?i[d.lastSegment()]=fc(u):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Xd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ea(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new un(fc(this.value))}}function PS(n){const e=[];return ea(n.fields,((t,i)=>{const a=new ft([t]);if(Xd(i)){const l=PS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Vn(e)}class dt{constructor(e,t,i,a,l,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dt(e,0,ve.min(),ve.min(),ve.min(),un.empty(),0)}static newFoundDocument(e,t,i,a){return new dt(e,1,t,ve.min(),i,a,0)}static newNoDocument(e,t){return new dt(e,2,t,ve.min(),ve.min(),un.empty(),0)}static newUnknownDocument(e,t){return new dt(e,3,t,ve.min(),ve.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gs{constructor(e,t){this.position=e,this.inclusive=t}}function Iw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=he.comparator(he.fromName(u.referenceValue),t.key):i=qs(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function xw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function JO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class MS{}class je extends MS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WO(e,t,i):t==="array-contains"?new tP(e,i):t==="in"?new FS(e,i):t==="not-in"?new nP(e,i):t==="array-contains-any"?new rP(e,i):new je(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ZO(e,i):new eP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(qs(t,this.value)):t!==null&&Fs(this.value)===Fs(t)&&this.matchesComparison(qs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends MS{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new et(e,t)}matches(e){return vl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vl(n){return n.op==="and"}function sy(n){return n.op==="or"}function Xy(n){return LS(n)&&vl(n)}function LS(n){for(const e of n.filters)if(e instanceof et)return!1;return!0}function ay(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+_l(n.value);if(Xy(n))return n.filters.map((e=>ay(e))).join(",");{const e=n.filters.map((t=>ay(t))).join(",");return`${n.op}(${e})`}}function US(n,e){return n instanceof je?(function(i,a){return a instanceof je&&i.op===a.op&&i.field.isEqual(a.field)&&Gr(i.value,a.value)})(n,e):n instanceof et?(function(i,a){return a instanceof et&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,d)=>l&&US(u,a.filters[d])),!0):!1})(n,e):void fe()}function jS(n,e){const t=n.filters.concat(e);return et.create(t,n.op)}function zS(n){return n instanceof je?(function(t){return`${t.field.canonicalString()} ${t.op} ${_l(t.value)}`})(n):n instanceof et?(function(t){return t.op.toString()+" {"+t.getFilters().map(zS).join(" ,")+"}"})(n):"Filter"}class WO extends je{constructor(e,t,i){super(e,t,i),this.key=he.fromName(i.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZO extends je{constructor(e,t){super(e,"in",t),this.keys=BS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eP extends je{constructor(e,t){super(e,"not-in",t),this.keys=BS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function BS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>he.fromName(i.referenceValue)))}class tP extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sc(t)&&Ac(t.arrayValue,this.value)}}class FS extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ac(this.value.arrayValue,t)}}class nP extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ac(this.value.arrayValue,t)}}class rP extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ac(this.value.arrayValue,i)))}}class iP{constructor(e,t=null,i=[],a=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=d,this.ue=null}}function oy(n,e=null,t=[],i=[],a=null,l=null,u=null){return new iP(n,e,t,i,a,l,u)}function $a(n){const e=ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ay(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>_l(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>_l(i))).join(",")),e.ue=t}return e.ue}function Bc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!US(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xw(n.startAt,e.startAt)&&xw(n.endAt,e.endAt)}function hf(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function df(n,e){return n.filters.filter((t=>t instanceof je&&t.field.isEqual(e)))}function Rw(n,e,t){let i=$d,a=!0;for(const l of df(n,e)){let u=$d,d=!0;switch(l.op){case"<":case"<=":u=YO(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,d=!1;break;case"!=":case"not-in":u=$d}Aw({value:i,inclusive:a},{value:u,inclusive:d})<0&&(i=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];Aw({value:i,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}function Cw(n,e,t){let i=Ps,a=!0;for(const l of df(n,e)){let u=Ps,d=!0;switch(l.op){case">=":case">":u=XO(l.value),d=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,d=!1;break;case"!=":case"not-in":u=Ps}Sw({value:i,inclusive:a},{value:u,inclusive:d})>0&&(i=u,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];Sw({value:i,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(i=u,a=t.inclusive);break}}return{value:i,inclusive:a}}class Mi{constructor(e,t=null,i=[],a=[],l=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qS(n,e,t,i,a,l,u,d){return new Mi(n,e,t,i,a,l,u,d)}function Ml(n){return new Mi(n)}function Nw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Jy(n){return n.collectionGroup!==null}function cl(n){const e=ue(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new it(ft.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ic(l,i))})),t.has(ft.keyField().canonicalString())||e.ce.push(new Ic(ft.keyField(),i))}return e.ce}function yn(n){const e=ue(n);return e.le||(e.le=HS(e,cl(n))),e.le}function GS(n){const e=ue(n);return e.he||(e.he=HS(e,n.explicitOrderBy)),e.he}function HS(n,e){if(n.limitType==="F")return oy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ic(a.field,l)}));const t=n.endAt?new Gs(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Gs(n.startAt.position,n.startAt.inclusive):null;return oy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ly(n,e){const t=n.filters.concat([e]);return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ff(n,e,t){return new Mi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return Bc(yn(n),yn(e))&&n.limitType===e.limitType}function KS(n){return`${$a(yn(n))}|lt:${n.limitType}`}function il(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>zS(a))).join(", ")}]`),zc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>_l(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>_l(a))).join(",")),`Target(${i})`})(yn(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):he.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of cl(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,d,f){const p=Iw(u,d,f);return u.inclusive?p<=0:p<0})(i.startAt,cl(i),a)||i.endAt&&!(function(u,d,f){const p=Iw(u,d,f);return u.inclusive?p>=0:p>0})(i.endAt,cl(i),a))})(n,e)}function QS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $S(n){return(e,t)=>{let i=!1;for(const a of cl(n)){const l=sP(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function sP(n,e,t){const i=n.field.isKeyField()?he.comparator(e.key,t.key):(function(l,u,d){const f=u.data.field(l),p=d.data.field(l);return f!==null&&p!==null?qs(f,p):fe()})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}class Li{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ea(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return DS(this.inner)}size(){return this.innerSize}}const aP=new lt(he.comparator);function On(){return aP}const YS=new lt(he.comparator);function oc(...n){let e=YS;for(const t of n)e=e.insert(t.key,t);return e}function XS(n){let e=YS;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function jr(){return mc()}function JS(){return mc()}function mc(){return new Li((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oP=new lt(he.comparator),lP=new it(he.comparator);function Re(...n){let e=lP;for(const t of n)e=e.add(t);return e}const uP=new it(Se);function Wy(){return uP}function Zy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function WS(n){return{integerValue:""+n}}function ZS(n,e){return SS(e)?WS(e):Zy(n,e)}class qf{constructor(){this._=void 0}}function cP(n,e,t){return n instanceof bl?(function(a,l){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zf(l)&&(l=Bf(l)),l&&(u.fields.__previous_value__=l),{mapValue:u}})(t,e):n instanceof Ya?tI(n,e):n instanceof Xa?nI(n,e):(function(a,l){const u=eI(a,l),d=Dw(u)+Dw(a.Pe);return iy(u)&&iy(a.Pe)?WS(d):Zy(a.serializer,d)})(n,e)}function hP(n,e,t){return n instanceof Ya?tI(n,e):n instanceof Xa?nI(n,e):t}function eI(n,e){return n instanceof El?(function(i){return iy(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class bl extends qf{}class Ya extends qf{constructor(e){super(),this.elements=e}}function tI(n,e){const t=rI(e);for(const i of n.elements)t.some((a=>Gr(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Xa extends qf{constructor(e){super(),this.elements=e}}function nI(n,e){let t=rI(e);for(const i of n.elements)t=t.filter((a=>!Gr(a,i)));return{arrayValue:{values:t}}}class El extends qf{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Dw(n){return gt(n.integerValue||n.doubleValue)}function rI(n){return Sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Gc{constructor(e,t){this.field=e,this.transform=t}}function dP(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Ya&&a instanceof Ya||i instanceof Xa&&a instanceof Xa?gl(i.elements,a.elements,Gr):i instanceof El&&a instanceof El?Gr(i.Pe,a.Pe):i instanceof bl&&a instanceof bl})(n.transform,e.transform)}class fP{constructor(e,t){this.version=e,this.transformResults=t}}class pt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pt}static exists(e){return new pt(void 0,e)}static updateTime(e){return new pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Gf{}function iI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ul(n.key,pt.none()):new Ll(n.key,n.data,pt.none());{const t=n.data,i=un.empty();let a=new it(ft.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Ui(n.key,i,new Vn(a.toArray()),pt.none())}}function mP(n,e,t){n instanceof Ll?(function(a,l,u){const d=a.value.clone(),f=Vw(a.fieldTransforms,l,u.transformResults);d.setAll(f),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ui?(function(a,l,u){if(!Jd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const d=Vw(a.fieldTransforms,l,u.transformResults),f=l.data;f.setAll(sI(a)),f.setAll(d),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function gc(n,e,t,i){return n instanceof Ll?(function(l,u,d,f){if(!Jd(l.precondition,u))return d;const p=l.value.clone(),_=Ow(l.fieldTransforms,f,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ui?(function(l,u,d,f){if(!Jd(l.precondition,u))return d;const p=Ow(l.fieldTransforms,f,u),_=u.data;return _.setAll(sI(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,i):(function(l,u,d){return Jd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function gP(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=eI(i.transform,a||null);l!=null&&(t===null&&(t=un.empty()),t.set(i.field,l))}return t||null}function kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&gl(i,a,((l,u)=>dP(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ll extends Gf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ui extends Gf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function sI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Vw(n,e,t){const i=new Map;pe(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,d=e.data.field(l.field);i.set(l.field,hP(u,d,t[a]))}return i}function Ow(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,cP(l,u,e))}return i}class Ul extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e_ extends Gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class t_{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&mP(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=JS();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(a.key)?null:d;const f=iI(u,d);f!==null&&i.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(ve.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Re())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,((t,i)=>kw(t,i)))&&gl(this.baseMutations,e.baseMutations,((t,i)=>kw(t,i)))}}class n_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){pe(e.mutations.length===i.length);let a=(function(){return oP})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new n_(e,t,i,a)}}class r_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class aI{constructor(e,t,i){this.alias=e,this.aggregateType=t,this.fieldPath=i}}class pP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Mt,Fe;function oI(n){switch(n){default:return fe();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function lI(n){if(n===void 0)return Ct("GRPC error has no .code"),X.UNKNOWN;switch(n){case Mt.OK:return X.OK;case Mt.CANCELLED:return X.CANCELLED;case Mt.UNKNOWN:return X.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return X.INTERNAL;case Mt.UNAVAILABLE:return X.UNAVAILABLE;case Mt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Mt.NOT_FOUND:return X.NOT_FOUND;case Mt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Mt.ABORTED:return X.ABORTED;case Mt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Mt.DATA_LOSS:return X.DATA_LOSS;default:return fe()}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";let mf=null;function uI(){return new TextEncoder}const yP=new Ga([4294967295,4294967295],0);function Pw(n){const e=uI().encode(n),t=new cS;return t.update(e),new Uint8Array(t.digest())}function Mw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ga([t,i],0),new Ga([a,l],0)]}class i_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new lc(`Invalid padding: ${t}`);if(i<0)throw new lc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new lc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new lc(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ga.fromNumber(this.Ie)}Ee(e,t,i){let a=e.add(t.multiply(Ga.fromNumber(i)));return a.compare(yP)===1&&(a=new Ga([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Pw(e),[i,a]=Mw(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(i,a,l);if(!this.de(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new i_(l,a,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=Pw(e),[i,a]=Mw(t);for(let l=0;l<this.hashCount;l++){const u=this.Ee(i,a,l);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Hc(ve.min(),a,new lt(Se),On(),Re())}}class Kc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Kc(i,t,Re(),Re(),Re())}}class Wd{constructor(e,t,i,a){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=a}}class cI{constructor(e,t){this.targetId=e,this.me=t}}class hI{constructor(e,t,i=bt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Lw{constructor(){this.fe=0,this.ge=jw(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),t=Re(),i=Re();return this.ge.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:fe()}})),new Kc(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=jw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _P{constructor(e){this.Le=e,this.Be=new Map,this.ke=On(),this.qe=Uw(),this.Qe=new lt(Se)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:fe()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,a)=>{this.ze(a)&&t(a)}))}He(e){const t=e.targetId,i=e.me.count,a=this.Je(t);if(a){const l=a.target;if(hf(l))if(i===0){const u=new he(l.path);this.Ue(t,u,dt.newNoDocument(u,ve.min()))}else pe(i===1);else{const u=this.Ye(t);if(u!==i){const d=this.Ze(e),f=d?this.Xe(d,e,u):1;if(f!==0){this.je(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}mf?.et((function(_,b,A,x,O){var L,N,K,H,j,oe;const ye={localCacheCount:_,existenceFilterCount:b.count,databaseId:A.database,projectId:A.projectId},de=b.unchangedNames;return de&&(ye.bloomFilter={applied:O===0,hashCount:(L=de?.hashCount)!==null&&L!==void 0?L:0,bitmapLength:(H=(K=(N=de?.bits)===null||N===void 0?void 0:N.bitmap)===null||K===void 0?void 0:K.length)!==null&&H!==void 0?H:0,padding:(oe=(j=de?.bits)===null||j===void 0?void 0:j.padding)!==null&&oe!==void 0?oe:0,mightContain:C=>{var I;return(I=x?.mightContain(C))!==null&&I!==void 0&&I}}),ye})(u,e.me,this.Le.tt(),d,f))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,d;try{u=Vi(i).toUint8Array()}catch(f){if(f instanceof kS)return Hn("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new i_(u,a,l)}catch(f){return Hn(f instanceof lc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),a++)})),a}rt(e){const t=new Map;this.Be.forEach(((l,u)=>{const d=this.Je(u);if(d){if(l.current&&hf(d.target)){const f=new he(d.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,dt.newNoDocument(f,e))}l.be&&(t.set(u,l.ve()),l.Ce())}}));let i=Re();this.qe.forEach(((l,u)=>{let d=!0;u.forEachWhile((f=>{const p=this.Je(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.ke.forEach(((l,u)=>u.setReadTime(e)));const a=new Hc(e,t,this.Qe,this.ke,i);return this.ke=On(),this.qe=Uw(),this.Qe=new lt(Se),a}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new it(Se),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Uw(){return new lt(he.comparator)}function jw(){return new lt(he.comparator)}const vP={asc:"ASCENDING",desc:"DESCENDING"},bP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EP={and:"AND",or:"OR"};class wP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function uy(n,e){return n.useProto3Json||zc(e)?e:{value:e}}function wl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TP(n,e){return wl(n,e.toTimestamp())}function Nt(n){return pe(!!n),ve.fromTimestamp((function(t){const i=ki(t);return new ot(i.seconds,i.nanos)})(n))}function s_(n,e){return cy(n,e).canonicalString()}function cy(n,e){const t=(function(a){return new Ue(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fI(n){const e=Ue.fromString(n);return pe(TI(e)),e}function xc(n,e){return s_(n.databaseId,e.path)}function Fr(n,e){const t=fI(e);if(t.get(1)!==n.databaseId.projectId)throw new ie(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ie(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(pI(t))}function mI(n,e){return s_(n.databaseId,e)}function gI(n){const e=fI(n);return e.length===4?Ue.emptyPath():pI(e)}function hy(n){return new Ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pI(n){return pe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zw(n,e,t){return{name:xc(n,e),fields:t.value.mapValue.fields}}function yI(n,e,t){const i=Fr(n,e.name),a=Nt(e.updateTime),l=e.createTime?Nt(e.createTime):ve.min(),u=new un({mapValue:{fields:e.fields}}),d=dt.newFoundDocument(i,a,l,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function AP(n,e){return"found"in e?(function(i,a){pe(!!a.found),a.found.name,a.found.updateTime;const l=Fr(i,a.found.name),u=Nt(a.found.updateTime),d=a.found.createTime?Nt(a.found.createTime):ve.min(),f=new un({mapValue:{fields:a.found.fields}});return dt.newFoundDocument(l,u,d,f)})(n,e):"missing"in e?(function(i,a){pe(!!a.missing),pe(!!a.readTime);const l=Fr(i,a.missing),u=Nt(a.readTime);return dt.newNoDocument(l,u)})(n,e):fe()}function SP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:fe()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(pe(_===void 0||typeof _=="string"),bt.fromBase64String(_||"")):(pe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),bt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const _=p.code===void 0?X.UNKNOWN:lI(p.code);return new ie(_,p.message||"")})(u);t=new hI(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Fr(n,i.document.name),l=Nt(i.document.updateTime),u=i.document.createTime?Nt(i.document.createTime):ve.min(),d=new un({mapValue:{fields:i.document.fields}}),f=dt.newFoundDocument(a,l,u,d),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Wd(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Fr(n,i.document),l=i.readTime?Nt(i.readTime):ve.min(),u=dt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Wd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Fr(n,i.document),l=i.removedTargetIds||[];t=new Wd([],l,a,null)}else{if(!("filter"in e))return fe();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new pP(a,l),d=i.targetId;t=new cI(d,u)}}return t}function Rc(n,e){let t;if(e instanceof Ll)t={update:zw(n,e.key,e.value)};else if(e instanceof Ul)t={delete:xc(n,e.key)};else if(e instanceof Ui)t={update:zw(n,e.key,e.data),updateMask:DP(e.fieldMask)};else{if(!(e instanceof e_))return fe();t={verify:xc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const d=u.transform;if(d instanceof bl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ya)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Xa)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof El)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw fe()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:TP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:fe()})(n,e.precondition)),t}function dy(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?pt.updateTime(Nt(l.updateTime)):l.exists!==void 0?pt.exists(l.exists):pt.none()})(e.currentDocument):pt.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(u,d){let f=null;if("setToServerValue"in d)pe(d.setToServerValue==="REQUEST_TIME"),f=new bl;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];f=new Ya(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];f=new Xa(_)}else"increment"in d?f=new El(u,d.increment):fe();const p=ft.fromServerFormat(d.fieldPath);return new Gc(p,f)})(n,a))):[];if(e.update){e.update.name;const a=Fr(n,e.update.name),l=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const p=f.fieldPaths||[];return new Vn(p.map((_=>ft.fromServerFormat(_))))})(e.updateMask);return new Ui(a,l,u,t,i)}return new Ll(a,l,t,i)}if(e.delete){const a=Fr(n,e.delete);return new Ul(a,t)}if(e.verify){const a=Fr(n,e.verify);return new e_(a,t)}return fe()}function IP(n,e){return n&&n.length>0?(pe(e!==void 0),n.map((t=>(function(a,l){let u=a.updateTime?Nt(a.updateTime):Nt(l);return u.isEqual(ve.min())&&(u=Nt(l)),new fP(u,a.transformResults||[])})(t,e)))):[]}function _I(n,e){return{documents:[mI(n,e.path)]}}function Hf(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mI(n,a);const l=(function(p){if(p.length!==0)return wI(et.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((_=>(function(A){return{field:ks(A.field),direction:RP(A.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=uy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{_t:t,parent:a}}function vI(n,e,t,i){const{_t:a,parent:l}=Hf(n,e),u={},d=[];let f=0;return t.forEach((p=>{const _=i?p.alias:"aggregate_"+f++;u[_]=p.alias,p.aggregateType==="count"?d.push({alias:_,count:{}}):p.aggregateType==="avg"?d.push({alias:_,avg:{field:ks(p.fieldPath)}}):p.aggregateType==="sum"&&d.push({alias:_,sum:{field:ks(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},ut:u,parent:l}}function bI(n){let e=gI(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){pe(i===1);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(b){const A=EI(b);return A instanceof et&&Xy(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(b){return b.map((A=>(function(O){return new Ic(sl(O.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let A;return A=typeof b=="object"?b.value:b,zc(A)?null:A})(t.limit));let f=null;t.startAt&&(f=(function(b){const A=!!b.before,x=b.values||[];return new Gs(x,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const A=!b.before,x=b.values||[];return new Gs(x,A)})(t.endAt)),qS(e,a,u,l,d,"F",f,p)}function xP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=sl(t.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=sl(t.unaryFilter.field);return je.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=sl(t.unaryFilter.field);return je.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=sl(t.unaryFilter.field);return je.create(u,"!=",{nullValue:"NULL_VALUE"});default:return fe()}})(n):n.fieldFilter!==void 0?(function(t){return je.create(sl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return et.create(t.compositeFilter.filters.map((i=>EI(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fe()}})(t.compositeFilter.op))})(n):fe()}function RP(n){return vP[n]}function CP(n){return bP[n]}function NP(n){return EP[n]}function ks(n){return{fieldPath:n.canonicalString()}}function sl(n){return ft.fromServerFormat(n.fieldPath)}function wI(n){return n instanceof je?(function(t){if(t.op==="=="){if(Tw(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NAN"}};if(ww(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tw(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NAN"}};if(ww(t.value))return{unaryFilter:{field:ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ks(t.field),op:CP(t.op),value:t.value}}})(n):n instanceof et?(function(t){const i=t.getFilters().map((a=>wI(a)));return i.length===1?i[0]:{compositeFilter:{op:NP(t.op),filters:i}}})(n):fe()}function DP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function TI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Si{constructor(e,t,i,a,l=ve.min(),u=ve.min(),d=bt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class AI{constructor(e){this.ct=e}}function kP(n,e){let t;if(e.document)t=yI(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=he.fromSegments(e.noDocument.path),a=Wa(e.noDocument.readTime);t=dt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return fe();{const i=he.fromSegments(e.unknownDocument.path),a=Wa(e.unknownDocument.version);t=dt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new ot(a[0],a[1]);return ve.fromTimestamp(l)})(e.readTime)),t}function Bw(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,u){return{name:xc(l,u.key),fields:u.data.value.mapValue.fields,updateTime:wl(l,u.version.toTimestamp()),createTime:wl(l,u.createTime.toTimestamp())}})(n.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ja(e.version)};else{if(!e.isUnknownDocument())return fe();i.unknownDocument={path:t.path.toArray(),version:Ja(e.version)}}return i}function gf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ja(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wa(n){const e=new ot(n.seconds,n.nanoseconds);return ve.fromTimestamp(e)}function ja(n,e){const t=(e.baseMutations||[]).map((l=>dy(n.ct,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];u.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>dy(n.ct,l))),a=ot.fromMillis(e.localWriteTimeMs);return new t_(e.batchId,a,t,i)}function uc(n){const e=Wa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Wa(n.lastLimboFreeSnapshotVersion):ve.min();let i;return i=(function(l){return l.documents!==void 0})(n.query)?(function(l){return pe(l.documents.length===1),yn(Ml(gI(l.documents[0])))})(n.query):(function(l){return yn(bI(l))})(n.query),new Si(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bt.fromBase64String(n.resumeToken))}function SI(n,e){const t=Ja(e.snapshotVersion),i=Ja(e.lastLimboFreeSnapshotVersion);let a;a=hf(e.target)?_I(n.ct,e.target):Hf(n.ct,e.target)._t;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$a(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function a_(n){const e=bI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ff(e,e.limit,"L"):e}function Dp(n,e){return new r_(e.largestBatchId,dy(n.ct,e.overlayMutation))}function Fw(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function qw(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ja(i.readTime),documentKey:pn(i.documentKey.path),largestBatchId:i.largestBatchId}}class VP{getBundleMetadata(e,t){return Gw(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:Wa(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return Gw(e).put((function(a){return{bundleId:a.id,createTime:Ja(Nt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return Hw(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:a_(l.bundledQuery),readTime:Wa(l.readTime)}})(i)}))}saveNamedQuery(e,t){return Hw(e).put((function(a){return{name:a.name,readTime:Ja(Nt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function Gw(n){return Bt(n,"bundles")}function Hw(n){return Bt(n,"namedQueries")}class Kf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const i=t.uid||"";return new Kf(e,i)}getOverlay(e,t){return Ju(e).get(Fw(this.userId,t)).next((i=>i?Dp(this.serializer,i):null))}getOverlays(e,t){const i=jr();return q.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,u)=>{const d=new r_(t,u);a.push(this.ht(e,d))})),q.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((u=>a.add(pn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const d=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);l.push(Ju(e).j("collectionPathOverlayIndex",d))})),q.waitFor(l)}getOverlaysForCollection(e,t,i){const a=jr(),l=pn(t),u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Ju(e).U("collectionPathOverlayIndex",u).next((d=>{for(const f of d){const p=Dp(this.serializer,f);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=jr();let u;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ju(e).J({index:"collectionGroupOverlayIndex",range:d},((f,p,_)=>{const b=Dp(this.serializer,p);l.size()<a||b.largestBatchId===u?(l.set(b.getKey(),b),u=b.largestBatchId):_.done()})).next((()=>l))}ht(e,t){return Ju(e).put((function(a,l,u){const[d,f,p]=Fw(l,u.mutation.key);return{userId:l,collectionPath:f,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Rc(a.ct,u.mutation)}})(this.serializer,this.userId,t))}}function Ju(n){return Bt(n,"documentOverlays")}class OP{Pt(e){return Bt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const i=t?.value;return i?bt.fromUint8Array(i):bt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class za{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(gt(e.integerValue));else if("doubleValue"in e){const i=gt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),wc(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=ki(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?VS(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ff(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):fe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const i=e.fields||{};this.dt(t,55);for(const a of Object.keys(i))this.Vt(a,t),this.Tt(i[a],t)}wt(e,t){var i,a;const l=e.fields||{};this.dt(t,53);const u="value",d=((a=(i=l[u].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.dt(t,15),t.At(gt(d)),this.Vt(u,t),this.Tt(l[u],t)}bt(e,t){const i=e.values||[];this.dt(t,50);for(const a of i)this.Tt(a,t)}yt(e,t){this.dt(t,37),he.fromName(e).path.forEach((i=>{this.dt(t,60),this.Dt(i,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}za.vt=new za;function PP(n){if(n===0)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Kw(n){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const u=PP(255&i[l]);if(a+=u,u!==8)break}return a})(n);return Math.ceil(e/8)}class MP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const a=t.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const a=t.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const t=this.qt(e),i=Kw(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Kt(e){const t=this.qt(e),i=Kw(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class LP{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class UP{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Wu{constructor(){this.jt=new MP,this.Ht=new LP(this.jt),this.Jt=new UP(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Ba{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ba(this.indexId,this.documentKey,this.arrayValue,i)}}function Ns(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Qw(n.arrayValue,e.arrayValue),t!==0?t:(t=Qw(n.directionalValue,e.directionalValue),t!==0?t:he.comparator(n.documentKey,e.documentKey)))}function Qw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}class $w{constructor(e){this.Xt=new it(((t,i)=>ft.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(pe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=ty(e);if(t!==void 0&&!this.sn(t))return!1;const i=La(e);let a=new Set,l=0,u=0;for(;l<i.length&&this.sn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const f=i[l];if(!this.on(d,f)||!this._n(this.en[u++],f))return!1}++l}for(;l<i.length;++l){const d=i[l];if(u>=this.en.length||!this._n(this.en[u++],d))return!1}return!0}an(){if(this.nn)return null;let e=new it(ft.comparator);const t=[];for(const i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Ha(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Ha(i.field,0))}for(const i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Ha(i.field,i.dir==="asc"?0:1)));return new pl(pl.UNKNOWN_ID,this.collectionId,t,yl.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function II(n){var e,t;if(pe(n instanceof je||n instanceof et),n instanceof je){if(n instanceof FS){const a=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>je.create(n.field,"==",l))))||[];return et.create(a,"or")}return n}const i=n.filters.map((a=>II(a)));return et.create(i,n.op)}function jP(n){if(n.getFilters().length===0)return[];const e=gy(II(n));return pe(xI(e)),fy(e)||my(e)?[e]:e.getFilters()}function fy(n){return n instanceof je}function my(n){return n instanceof et&&Xy(n)}function xI(n){return fy(n)||my(n)||(function(t){if(t instanceof et&&sy(t)){for(const i of t.getFilters())if(!fy(i)&&!my(i))return!1;return!0}return!1})(n)}function gy(n){if(pe(n instanceof je||n instanceof et),n instanceof je)return n;if(n.filters.length===1)return gy(n.filters[0]);const e=n.filters.map((i=>gy(i)));let t=et.create(e,n.op);return t=pf(t),xI(t)?t:(pe(t instanceof et),pe(vl(t)),pe(t.filters.length>1),t.filters.reduce(((i,a)=>o_(i,a))))}function o_(n,e){let t;return pe(n instanceof je||n instanceof et),pe(e instanceof je||e instanceof et),t=n instanceof je?e instanceof je?(function(a,l){return et.create([a,l],"and")})(n,e):Yw(n,e):e instanceof je?Yw(e,n):(function(a,l){if(pe(a.filters.length>0&&l.filters.length>0),vl(a)&&vl(l))return jS(a,l.getFilters());const u=sy(a)?a:l,d=sy(a)?l:a,f=u.filters.map((p=>o_(p,d)));return et.create(f,"or")})(n,e),pf(t)}function Yw(n,e){if(vl(e))return jS(e,n.getFilters());{const t=e.filters.map((i=>o_(n,i)));return et.create(t,"or")}}function pf(n){if(pe(n instanceof je||n instanceof et),n instanceof je)return n;const e=n.getFilters();if(e.length===1)return pf(e[0]);if(LS(n))return n;const t=e.map((a=>pf(a))),i=[];return t.forEach((a=>{a instanceof je?i.push(a):a instanceof et&&(a.op===n.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:et.create(i,n.op)}class zP{constructor(){this.un=new l_}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Kn.min())}updateCollectionGroup(e,t,i){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class l_{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new it(Ue.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new it(Ue.comparator)).toArray()}}const Od=new Uint8Array(0);class BP{constructor(e,t){this.databaseId=t,this.cn=new l_,this.ln=new Li((i=>$a(i)),((i,a)=>Bc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const l={collectionId:i,parent:pn(a)};return Xw(e).put(l)}return q.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[vS(t),""],!1,!0);return Xw(e).U(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;i.push(Ur(u.parent))}return i}))}addFieldIndex(e,t){const i=Zu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const u=tl(e);return l.next((d=>{u.put(qw(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Zu(e),a=tl(e),l=el(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Zu(e),i=el(e),a=tl(e);return t.j().next((()=>i.j())).next((()=>a.j()))}createTargetIndexes(e,t){return q.forEach(this.hn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new $w(i).an();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=el(e);let a=!0;const l=new Map;return q.forEach(this.hn(t),(u=>this.Pn(e,u).next((d=>{a&&(a=!!d),l.set(u,d)})))).next((()=>{if(a){let u=Re();const d=[];return q.forEach(l,((f,p)=>{se("IndexedDbIndexManager",`Using index ${(function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map((oe=>`${oe.fieldPath}:${oe.kind}`)).join(",")}`})(f)} to execute ${$a(t)}`);const _=(function(j,oe){const ye=ty(oe);if(ye===void 0)return null;for(const de of df(j,ye.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(p,f),b=(function(j,oe){const ye=new Map;for(const de of La(oe))for(const C of df(j,de.fieldPath))switch(C.op){case"==":case"in":ye.set(de.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return ye.set(de.fieldPath.canonicalString(),C.value),Array.from(ye.values())}return null})(p,f),A=(function(j,oe){const ye=[];let de=!0;for(const C of La(oe)){const I=C.kind===0?Rw(j,C.fieldPath,j.startAt):Cw(j,C.fieldPath,j.startAt);ye.push(I.value),de&&(de=I.inclusive)}return new Gs(ye,de)})(p,f),x=(function(j,oe){const ye=[];let de=!0;for(const C of La(oe)){const I=C.kind===0?Cw(j,C.fieldPath,j.endAt):Rw(j,C.fieldPath,j.endAt);ye.push(I.value),de&&(de=I.inclusive)}return new Gs(ye,de)})(p,f),O=this.In(f,p,A),L=this.In(f,p,x),N=this.Tn(f,p,b),K=this.En(f.indexId,_,O,A.inclusive,L,x.inclusive,N);return q.forEach(K,(H=>i.G(H,t.limit).next((j=>{j.forEach((oe=>{const ye=he.fromSegments(oe.documentKey);u.has(ye)||(u=u.add(ye),d.push(ye))}))}))))})).next((()=>d))}return q.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=jP(et.create(e.filters,"and")).map((i=>oy(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,i,a,l,u,d){const f=(t!=null?t.length:1)*Math.max(i.length,l.length),p=f/(t!=null?t.length:1),_=[];for(let b=0;b<f;++b){const A=t?this.dn(t[b/p]):Od,x=this.An(e,A,i[b%p],a),O=this.Rn(e,A,l[b%p],u),L=d.map((N=>this.An(e,A,N,!0)));_.push(...this.createRange(x,O,L))}return _}An(e,t,i,a){const l=new Ba(e,he.empty(),t,i);return a?l:l.Zt()}Rn(e,t,i,a){const l=new Ba(e,he.empty(),t,i);return a?l.Zt():l}Pn(e,t){const i=new $w(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const d of l)i.rn(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u}))}getIndexType(e,t){let i=2;const a=this.hn(t);return q.forEach(a,(l=>this.Pn(e,l).next((u=>{u?i!==0&&u.fields.length<(function(f){let p=new it(ft.comparator),_=!1;for(const b of f.filters)for(const A of b.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?_=!0:p=p.add(A.field));for(const b of f.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&i===2?1:i))}Vn(e,t){const i=new Wu;for(const a of La(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=i.Yt(a.kind);za.vt.It(l,u)}return i.zt()}dn(e){const t=new Wu;return za.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const i=new Wu;return za.vt.It(Qa(this.databaseId,t),i.Yt((function(l){const u=La(l);return u.length===0?0:u[u.length-1].kind})(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let a=[];a.push(new Wu);let l=0;for(const u of La(e)){const d=i[l++];for(const f of a)if(this.fn(t,u.fieldPath)&&Sc(d))a=this.gn(a,u,d);else{const p=f.Yt(u.kind);za.vt.It(d,p)}}return this.pn(a)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){const a=[...e],l=[];for(const u of i.arrayValue.values||[])for(const d of a){const f=new Wu;f.seed(d.zt()),za.vt.It(u,f.Yt(t.kind)),l.push(f)}return l}fn(e,t){return!!e.filters.find((i=>i instanceof je&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Zu(e),a=tl(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next((l=>{const u=[];return q.forEach(l,(d=>a.get([d.indexId,this.uid]).next((f=>{u.push((function(_,b){const A=b?new yl(b.sequenceNumber,new Kn(Wa(b.readTime),new he(Ur(b.documentKey)),b.largestBatchId)):yl.empty(),x=_.fields.map((([O,L])=>new Ha(ft.fromServerFormat(O),L)));return new pl(_.indexId,_.collectionGroup,x,A)})(d,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Se(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Zu(e),l=tl(e);return this.yn(e).next((u=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((d=>q.forEach(d,(f=>l.put(qw(f.indexId,this.uid,u,i))))))))}updateIndexEntries(e,t){const i=new Map;return q.forEach(t,((a,l)=>{const u=i.get(a.collectionGroup);return(u?q.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),q.forEach(d,(f=>this.wn(e,a,f).next((p=>{const _=this.Sn(l,f);return p.isEqual(_)?q.resolve():this.bn(e,l,f,p,_)})))))))}))}Dn(e,t,i,a){return el(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,a){return el(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const a=el(e);let l=new it(Ns);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},((u,d)=>{l=l.add(new Ba(i.indexId,t,d.arrayValue,d.directionalValue))})).next((()=>l))}Sn(e,t){let i=new it(Ns);const a=this.Vn(t,e);if(a==null)return i;const l=ty(t);if(l!=null){const u=e.data.field(l.fieldPath);if(Sc(u))for(const d of u.arrayValue.values||[])i=i.add(new Ba(t.indexId,e.key,this.dn(d),a))}else i=i.add(new Ba(t.indexId,e.key,Od,a));return i}bn(e,t,i,a,l){se("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return(function(f,p,_,b,A){const x=f.getIterator(),O=p.getIterator();let L=Zo(x),N=Zo(O);for(;L||N;){let K=!1,H=!1;if(L&&N){const j=_(L,N);j<0?H=!0:j>0&&(K=!0)}else L!=null?H=!0:K=!0;K?(b(N),N=Zo(O)):H?(A(L),L=Zo(x)):(L=Zo(x),N=Zo(O))}})(a,l,Ns,(d=>{u.push(this.Dn(e,t,i,d))}),(d=>{u.push(this.vn(e,t,i,d))})),q.waitFor(u)}yn(e){let t=1;return tl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((u,d)=>Ns(u,d))).filter(((u,d,f)=>!d||Ns(u,f[d-1])!==0));const a=[];a.push(e);for(const u of i){const d=Ns(u,e),f=Ns(u,t);if(d===0)a[0]=e.Zt();else if(d>0&&f<0)a.push(u),a.push(u.Zt());else if(f>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Cn(a[u],a[u+1]))return[];const d=[a[u].indexId,this.uid,a[u].arrayValue,a[u].directionalValue,Od,[]],f=[a[u+1].indexId,this.uid,a[u+1].arrayValue,a[u+1].directionalValue,Od,[]];l.push(IDBKeyRange.bound(d,f))}return l}Cn(e,t){return Ns(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Jw)}getMinOffset(e,t){return q.mapArray(this.hn(t),(i=>this.Pn(e,i).next((a=>a||fe())))).next(Jw)}}function Xw(n){return Bt(n,"collectionParents")}function el(n){return Bt(n,"indexEntries")}function Zu(n){return Bt(n,"indexConfiguration")}function tl(n){return Bt(n,"indexState")}function Jw(n){pe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;Qy(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Kn(e.readTime,e.documentKey,t)}const Ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mn{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function RI(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let d=0;const f=i.J({range:u},((_,b,A)=>(d++,A.delete())));l.push(f.next((()=>{pe(d===1)})));const p=[];for(const _ of t.mutations){const b=IS(e,_.key.path,t.batchId);l.push(a.delete(b)),p.push(_.key)}return q.waitFor(l).next((()=>p))}function yf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw fe();e=n.noDocument}return JSON.stringify(e).length}mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);class Qf{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Fn={}}static lt(e,t,i,a){pe(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new Qf(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ds(e).J({index:"userMutationsIndex",range:i},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=al(e),u=Ds(e);return u.add({}).next((d=>{pe(typeof d=="number");const f=new t_(d,t,i,a),p=(function(x,O,L){const N=L.baseMutations.map((H=>Rc(x.ct,H))),K=L.mutations.map((H=>Rc(x.ct,H)));return{userId:O,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:N,mutations:K}})(this.serializer,this.userId,f),_=[];let b=new it(((A,x)=>Se(A.canonicalString(),x.canonicalString())));for(const A of a){const x=IS(this.userId,A.key.path,d);b=b.add(A.key.path.popLast()),_.push(u.put(p)),_.push(l.put(x,RO))}return b.forEach((A=>{_.push(this.indexManager.addToCollectionParentIndex(e,A))})),e.addOnCommittedListener((()=>{this.Fn[d]=f.keys()})),q.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Ds(e).get(t).next((i=>i?(pe(i.userId===this.userId),ja(this.serializer,i)):null))}Mn(e,t){return this.Fn[t]?q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Fn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Ds(e).J({index:"userMutationsIndex",range:a},((u,d,f)=>{d.userId===this.userId&&(pe(d.batchId>=i),l=ja(this.serializer,d)),f.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ds(e).J({index:"userMutationsIndex",range:t,reverse:!0},((a,l,u)=>{i=l.batchId,u.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ds(e).U("userMutationsIndex",t).next((i=>i.map((a=>ja(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Qd(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return al(e).J({range:a},((u,d,f)=>{const[p,_,b]=u,A=Ur(_);if(p===this.userId&&t.path.isEqual(A))return Ds(e).get(b).next((x=>{if(!x)throw fe();pe(x.userId===this.userId),l.push(ja(this.serializer,x))}));f.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(Se);const a=[];return t.forEach((l=>{const u=Qd(this.userId,l.path),d=IDBKeyRange.lowerBound(u),f=al(e).J({range:d},((p,_,b)=>{const[A,x,O]=p,L=Ur(x);A===this.userId&&l.path.isEqual(L)?i=i.add(O):b.done()}));a.push(f)})),q.waitFor(a).next((()=>this.xn(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=Qd(this.userId,i),u=IDBKeyRange.lowerBound(l);let d=new it(Se);return al(e).J({range:u},((f,p,_)=>{const[b,A,x]=f,O=Ur(A);b===this.userId&&i.isPrefixOf(O)?O.length===a&&(d=d.add(x)):_.done()})).next((()=>this.xn(e,d)))}xn(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Ds(e).get(l).next((u=>{if(u===null)throw fe();pe(u.userId===this.userId),i.push(ja(this.serializer,u))})))})),q.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return RI(e._e,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),q.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return q.resolve();const i=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return al(e).J({range:i},((l,u,d)=>{if(l[0]===this.userId){const f=Ur(l[1]);a.push(f)}else d.done()})).next((()=>{pe(a.length===0)}))}))}containsKey(e,t){return CI(e,this.userId,t)}Nn(e){return NI(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function CI(n,e,t){const i=Qd(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let u=!1;return al(n).J({range:l,H:!0},((d,f,p)=>{const[_,b,A]=d;_===e&&b===a&&(u=!0),p.done()})).next((()=>u))}function Ds(n){return Bt(n,"mutations")}function al(n){return Bt(n,"documentMutations")}function NI(n){return Bt(n,"mutationQueues")}class Za{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Za(0)}static kn(){return new Za(-1)}}class FP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const i=new Za(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>ve.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.qn(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Qn(e,a))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nl(e).delete(t.targetId))).next((()=>this.qn(e))).next((i=>(pe(i.targetCount>0),i.targetCount-=1,this.Qn(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return nl(e).J(((u,d)=>{const f=uc(d);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(a++,l.push(this.removeTargetData(e,f)))})).next((()=>q.waitFor(l))).next((()=>a))}forEachTarget(e,t){return nl(e).J(((i,a)=>{const l=uc(a);t(l)}))}qn(e){return Zw(e).get("targetGlobalKey").next((t=>(pe(t!==null),t)))}Qn(e,t){return Zw(e).put("targetGlobalKey",t)}Kn(e,t){return nl(e).put(SI(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const i=$a(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return nl(e).J({range:a,index:"queryTargetsIndex"},((u,d,f)=>{const p=uc(d);Bc(t,p.target)&&(l=p,f.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=Vs(e);return t.forEach((u=>{const d=pn(u.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,u))})),q.waitFor(a)}removeMatchingKeys(e,t,i){const a=Vs(e);return q.forEach(t,(l=>{const u=pn(l.path);return q.waitFor([a.delete([i,u]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=Vs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=Vs(e);let l=Re();return a.J({range:i,H:!0},((u,d,f)=>{const p=Ur(u[1]),_=new he(p);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=pn(t.path),a=IDBKeyRange.bound([i],[vS(i)],!1,!0);let l=0;return Vs(e).J({index:"documentTargetsIndex",H:!0,range:a},(([u,d],f,p)=>{u!==0&&(l++,p.done())})).next((()=>l>0))}ot(e,t){return nl(e).get(t).next((i=>i?uc(i):null))}}function nl(n){return Bt(n,"targets")}function Zw(n){return Bt(n,"targetGlobal")}function Vs(n){return Bt(n,"targetDocuments")}function eT([n,e],[t,i]){const a=Se(n,t);return a===0?Se(e,i):a}class qP{constructor(e){this.Un=e,this.buffer=new it(eT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();eT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zs(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ws(t)}await this.Hn(3e5)}))}}class GP{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(kn.oe);const i=new qP(t);return this.Jn.forEachTarget(e,(a=>i.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>i.zn(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Ww)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ww):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,a,l,u,d,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,u=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(i=b,d=Date.now(),this.removeTargets(e,i,t)))).next((b=>(l=b,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((b=>(p=Date.now(),rl()<=Le.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(d-u)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${b} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function kI(n,e){return new GP(n,e)}class HP{constructor(e,t){this.db=e,this.garbageCollector=kI(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}er(e){let t=0;return this.Zn(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((i,a)=>t(a)))}addReference(e,t,i){return Pd(e,i)}removeReference(e,t,i){return Pd(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Pd(e,t)}nr(e,t){return(function(a,l){let u=!1;return NI(a).Y((d=>CI(a,d,l).next((f=>(f&&(u=!0),q.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(e,((u,d)=>{if(d<=t){const f=this.nr(e,u).next((p=>{if(!p)return l++,i.getEntry(e,u).next((()=>(i.removeEntry(u,ve.min()),Vs(e).delete((function(b){return[0,pn(b.path)]})(u)))))}));a.push(f)}})).next((()=>q.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Pd(e,t)}tr(e,t){const i=Vs(e);let a,l=kn.oe;return i.J({index:"documentTargetsIndex"},(([u,d],{path:f,sequenceNumber:p})=>{u===0?(l!==kn.oe&&t(new he(Ur(a)),l),l=p,a=f):l=kn.oe})).next((()=>{l!==kn.oe&&t(new he(Ur(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pd(n,e){return Vs(n).put((function(i,a){return{targetId:0,path:pn(i.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}class VI{constructor(){this.changes=new Li((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Pa(e).put(i)}removeEntry(e,t,i){return Pa(e).delete((function(l,u){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],gf(u),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.rr(e,i))))}getEntry(e,t){let i=dt.newInvalidDocument(t);return Pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ec(t))},((a,l)=>{i=this.ir(t,l)})).next((()=>i))}sr(e,t){let i={size:0,document:dt.newInvalidDocument(t)};return Pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ec(t))},((a,l)=>{i={document:this.ir(t,l),size:yf(l)}})).next((()=>i))}getEntries(e,t){let i=On();return this._r(e,t,((a,l)=>{const u=this.ir(a,l);i=i.insert(a,u)})).next((()=>i))}ar(e,t){let i=On(),a=new lt(he.comparator);return this._r(e,t,((l,u)=>{const d=this.ir(l,u);i=i.insert(l,d),a=a.insert(l,yf(u))})).next((()=>({documents:i,ur:a})))}_r(e,t,i){if(t.isEmpty())return q.resolve();let a=new it(rT);t.forEach((f=>a=a.add(f)));const l=IDBKeyRange.bound(ec(a.first()),ec(a.last())),u=a.getIterator();let d=u.getNext();return Pa(e).J({index:"documentKeyIndex",range:l},((f,p,_)=>{const b=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&rT(d,b)<0;)i(d,null),d=u.getNext();d&&d.isEqual(b)&&(i(d,p),d=u.hasNext()?u.getNext():null),d?_.$(ec(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),gf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pa(e).U(IDBKeyRange.bound(d,f,!0)).next((p=>{l?.incrementDocumentReadCount(p.length);let _=On();for(const b of p){const A=this.ir(he.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);A.isFoundDocument()&&(qc(t,A)||a.has(A.key))&&(_=_.insert(A.key,A))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=On();const u=nT(t,i),d=nT(t,Kn.max());return Pa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},((f,p,_)=>{const b=this.ir(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(b.key,b),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new QP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return tT(e).get("remoteDocumentGlobalKey").next((t=>(pe(!!t),t)))}rr(e,t){return tT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const i=kP(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(ve.min())))return i}return dt.newInvalidDocument(e)}}function OI(n){return new KP(n)}class QP extends VI{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Li((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new it(((l,u)=>Se(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const d=this.lr.get(l);if(t.push(this.cr.removeEntry(e,l,d.readTime)),u.isValidDocument()){const f=Bw(this.cr.serializer,u);a=a.add(l.path.popLast());const p=yf(f);i+=p-d.size,t.push(this.cr.addEntry(e,l,f))}else if(i-=d.size,this.trackRemovals){const f=Bw(this.cr.serializer,u.convertToNoDocument(ve.min()));t.push(this.cr.addEntry(e,l,f))}})),a.forEach((l=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.cr.updateMetadata(e,i)),q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:i,ur:a})=>(a.forEach(((l,u)=>{this.lr.set(l,{size:u,readTime:i.get(l).readTime})})),i)))}}function tT(n){return Bt(n,"remoteDocumentGlobal")}function Pa(n){return Bt(n,"remoteDocumentsV14")}function ec(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nT(n,e){const t=e.documentKey.path.toArray();return[n,gf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rT(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Se(t[l],i[l]),a)return a;return a=Se(t.length,i.length),a||(a=Se(t[t.length-2],i[i.length-2]),a||Se(t[t.length-1],i[i.length-1]))}class $P{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PI{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&gc(i.mutation,a,Vn.empty(),ot.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Re()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Re()){const a=jr();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=oc();return l.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=jr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Re())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,a){let l=On();const u=mc(),d=(function(){return mc()})();return t.forEach(((f,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Ui)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),gc(_.mutation,p,_.mutation.getFieldMask(),ot.now())):u.set(p.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>{var b;return d.set(p,new $P(_,(b=u.get(p))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,t){const i=mc();let a=new lt(((u,d)=>u-d)),l=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let _=i.get(f)||Vn.empty();_=d.applyToLocalView(p,_),i.set(f,_);const b=(a.get(d.batchId)||Re()).add(f);a=a.insert(d.batchId,b)}))})).next((()=>{const u=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,_=f.value,b=JS();_.forEach((A=>{if(!l.has(A)){const x=iI(t.get(A),i.get(A));x!==null&&b.set(A,x),l=l.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,b))}return q.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return he.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):q.resolve(jr());let d=-1,f=l;return u.next((p=>q.forEach(p,((_,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(_)?q.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{f=f.insert(_,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,f,p,Re()))).next((_=>({batchId:d,changes:XS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((i=>{let a=oc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=oc();return this.indexManager.getCollectionParents(e,l).next((d=>q.forEach(d,(f=>{const p=(function(b,A){return new Mi(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((_=>{_.forEach(((b,A)=>{u=u.insert(b,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((f,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,dt.newInvalidDocument(_)))}));let d=oc();return u.forEach(((f,p)=>{const _=l.get(f);_!==void 0&&gc(_.mutation,p,Vn.empty(),ot.now()),qc(t,p)&&(d=d.insert(f,p))})),d}))}}class YP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Nt(a.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(a){return{name:a.name,query:a_(a.bundledQuery),readTime:Nt(a.readTime)}})(t)),q.resolve()}}class XP{constructor(){this.overlays=new lt(he.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=jr();return q.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.ht(e,t,l)})),q.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(i)),q.resolve()}getOverlaysForCollection(e,t,i){const a=jr(),l=t.length+1,u=new he(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return q.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new lt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=jr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=jr(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,_)=>d.set(p,_))),!(d.size()>=a)););return q.resolve(d)}ht(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new r_(t,i));let l=this.Ir.get(t);l===void 0&&(l=Re(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}class JP{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class u_{constructor(){this.Tr=new it(Qt.Er),this.dr=new it(Qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Qt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Qt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new he(new Ue([])),i=new Qt(t,e),a=new Qt(t,e+1),l=[];return this.dr.forEachInRange([i,a],(u=>{this.Vr(u),l.push(u.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new he(new Ue([])),i=new Qt(t,e),a=new Qt(t,e+1);let l=Re();return this.dr.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Qt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Qt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return he.comparator(e.key,t.key)||Se(e.wr,t.wr)}static Ar(e,t){return Se(e.wr,t.wr)||he.comparator(e.key,t.key)}}class WP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new it(Qt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new t_(l,t,i,a);this.mutationQueue.push(u);for(const d of a)this.br=this.br.add(new Qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return q.resolve(u)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.vr(i),l=a<0?0:a;return q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Qt(t,0),a=new Qt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,a],(u=>{const d=this.Dr(u.wr);l.push(d)})),q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new it(Se);return t.forEach((a=>{const l=new Qt(a,0),u=new Qt(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,u],(d=>{i=i.add(d.wr)}))})),q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;he.isDocumentKey(l)||(l=l.child(""));const u=new Qt(new he(l),0);let d=new it(Se);return this.br.forEachWhile((f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(f.wr)),!0)}),u),q.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((i=>{const a=this.Dr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return q.forEach(t.mutations,(a=>{const l=new Qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Qt(t,0),a=this.br.firstAfterOrEqual(i);return q.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZP{constructor(e){this.Mr=e,this.docs=(function(){return new lt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return q.resolve(i?i.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let i=On();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():dt.newInvalidDocument(a))})),q.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=On();const u=t.path,d=new he(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||Qy(ES(_),i)<=0||(a.has(_.key)||qc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return q.resolve(l)}getAllFromCollectionGroup(e,t,i,a){fe()}Or(e,t){return q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new eM(this)}getSize(e){return q.resolve(this.size)}}class eM extends VI{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.cr.addEntry(e,a)):this.cr.removeEntry(i)})),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class tM{constructor(e){this.persistence=e,this.Nr=new Li((t=>$a(t)),Bc),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Lr=0,this.Br=new u_,this.targetCount=0,this.kr=Za.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,a)=>t(a))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),q.waitFor(l).next((()=>a))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return q.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),q.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return q.resolve(i)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}}class c_{constructor(e,t){this.qr={},this.overlays={},this.Qr=new kn(0),this.Kr=!1,this.Kr=!0,this.$r=new JP,this.referenceDelegate=e(this),this.Ur=new tM(this),this.indexManager=new zP,this.remoteDocumentCache=(function(a){return new ZP(a)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new AI(t),this.Gr=new YP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new WP(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const a=new nM(this.Qr.next());return this.referenceDelegate.zr(),i(a).next((l=>this.referenceDelegate.jr(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Hr(e,t){return q.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class nM extends TS{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new u_,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),q.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((a=>this.Xr.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.Xr.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,(i=>{const a=he.fromPath(i);return this.ei(e,a).next((l=>{l||t.removeEntry(a,ve.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class _f{constructor(e,t){this.persistence=e,this.ti=new Li((i=>pn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=kI(this,t)}static Zr(e,t){return new _f(e,t)}zr(){}jr(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}er(e){let t=0;return this.Zn(e,(i=>{t++})).next((()=>t))}Zn(e,t){return q.forEach(this.ti,((i,a)=>this.nr(e,i,a).next((l=>l?q.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.Or(e,(u=>this.nr(e,u,t).next((d=>{d||(i++,l.removeEntry(u,ve.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ti.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,t,i){return this.ti.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),q.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yd(e.data.value)),t}nr(e,t,i){return q.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.ti.get(t);return q.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class rM{constructor(e){this.serializer=e}O(e,t,i,a){const l=new jf("createOrUpgrade",t);i<1&&a>=1&&((function(f){f.createObjectStore("owner")})(e),(function(f){f.createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yw,{unique:!0}),f.createObjectStore("documentMutations")})(e),iT(e),(function(f){f.createObjectStore("remoteDocuments")})(e));let u=q.resolve();return i<3&&a>=3&&(i!==0&&((function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")})(e),iT(e)),u=u.next((()=>(function(f){const p=f.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)})(l)))),i<4&&a>=4&&(i!==0&&(u=u.next((()=>(function(f,p){return p.store("mutations").U().next((_=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yw,{unique:!0});const b=p.store("mutations"),A=_.map((x=>b.put(x)));return q.waitFor(A)}))})(e,l)))),u=u.next((()=>{(function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),i<5&&a>=5&&(u=u.next((()=>this.ni(l)))),i<6&&a>=6&&(u=u.next((()=>((function(f){f.createObjectStore("remoteDocumentGlobal")})(e),this.ri(l))))),i<7&&a>=7&&(u=u.next((()=>this.ii(l)))),i<8&&a>=8&&(u=u.next((()=>this.si(e,l)))),i<9&&a>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(u=u.next((()=>this.oi(l)))),i<11&&a>=11&&(u=u.next((()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(f){f.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),i<12&&a>=12&&(u=u.next((()=>{(function(f){const p=f.createObjectStore("documentOverlays",{keyPath:zO});p.createIndex("collectionPathOverlayIndex",BO,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",FO,{unique:!1})})(e)}))),i<13&&a>=13&&(u=u.next((()=>(function(f){const p=f.createObjectStore("remoteDocumentsV14",{keyPath:CO});p.createIndex("documentKeyIndex",NO),p.createIndex("collectionGroupIndex",DO)})(e))).next((()=>this._i(e,l))).next((()=>e.deleteObjectStore("remoteDocuments")))),i<14&&a>=14&&(u=u.next((()=>this.ai(e,l)))),i<15&&a>=15&&(u=u.next((()=>(function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:MO}).createIndex("sequenceNumberIndex",LO,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:UO}).createIndex("documentKeyIndex",jO,{unique:!1})})(e)))),i<16&&a>=16&&(u=u.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),i<17&&a>=17&&(u=u.next((()=>{(function(f){f.createObjectStore("globals",{keyPath:"name"})})(e)}))),u}ri(e){let t=0;return e.store("remoteDocuments").J(((i,a)=>{t+=yf(a)})).next((()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)}))}ni(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next((a=>q.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",u).next((d=>q.forEach(d,(f=>{pe(f.userId===l.userId);const p=ja(this.serializer,f);return RI(e,l.userId,p).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const l=[];return i.J(((u,d)=>{const f=new Ue(u),p=(function(b){return[0,pn(b)]})(f);l.push(t.get(p).next((_=>_?q.resolve():(b=>t.put({targetId:0,path:pn(b),sequenceNumber:a.highestListenSequenceNumber}))(f))))})).next((()=>q.waitFor(l)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:PO});const i=t.store("collectionParents"),a=new l_,l=u=>{if(a.add(u)){const d=u.lastSegment(),f=u.popLast();return i.put({collectionId:d,parent:pn(f)})}};return t.store("remoteDocuments").J({H:!0},((u,d)=>{const f=new Ue(u);return l(f.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([u,d,f],p)=>{const _=Ur(d);return l(_.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((i,a)=>{const l=uc(a),u=SI(this.serializer,l);return t.put(u)}))}_i(e,t){const i=t.store("remoteDocuments"),a=[];return i.J(((l,u)=>{const d=t.store("remoteDocumentsV14"),f=(function(b){return b.document?new he(Ue.fromString(b.document.name).popFirst(5)):b.noDocument?he.fromSegments(b.noDocument.path):b.unknownDocument?he.fromSegments(b.unknownDocument.path):fe()})(u).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(d.put(p))})).next((()=>q.waitFor(a)))}ai(e,t){const i=t.store("mutations"),a=OI(this.serializer),l=new c_($f.Zr,this.serializer.ct);return i.U().next((u=>{const d=new Map;return u.forEach((f=>{var p;let _=(p=d.get(f.userId))!==null&&p!==void 0?p:Re();ja(this.serializer,f).keys().forEach((b=>_=_.add(b))),d.set(f.userId,_)})),q.forEach(d,((f,p)=>{const _=new Yt(p),b=Kf.lt(this.serializer,_),A=l.getIndexManager(_),x=Qf.lt(_,this.serializer,A,l.referenceDelegate);return new PI(a,x,b,A).recalculateAndSaveOverlaysForDocumentKeys(new ny(t,kn.oe),f).next()}))}))}}function iT(n){n.createObjectStore("targetDocuments",{keyPath:VO}).createIndex("documentTargetsIndex",OO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kO,{unique:!0}),n.createObjectStore("targetGlobal")}const kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class h_{constructor(e,t,i,a,l,u,d,f,p,_,b=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=l,this.window=u,this.document=d,this.ci=p,this.li=_,this.hi=b,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!h_.D())throw new ie(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HP(this,a),this.Ai=t+"main",this.serializer=new AI(f),this.Ri=new Br(this.Ai,this.hi,new rM(this.serializer)),this.$r=new OP,this.Ur=new FP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OI(this.serializer),this.Gr=new VP,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,_===!1&&Ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(X.FAILED_PRECONDITION,kp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new kn(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Zs(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return tc(e).get("owner").next((t=>q.resolve(this.vi(t))))}Ci(e){return Md(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Bt(t,"clientMetadata");return i.U().next((a=>{const l=this.xi(a,18e5),u=a.filter((d=>l.indexOf(d)===-1));return q.forEach(u,(d=>i.delete(d.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):tc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ie(X.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Md(e).U().next((i=>this.xi(i,5e3).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||u&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&se("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ny(e,kn.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Md(e).U().next((t=>this.xi(t,18e5).map((i=>i.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Qf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BP(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Kf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){se("IndexedDbPersistence","Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(f){return f===17?HO:f===16?GO:f===15?Yy:f===14?CS:f===13?RS:f===12?qO:f===11?xS:void fe()})(this.hi);let u;return this.Ri.runTransaction(e,a,l,(d=>(u=new ny(d,this.Qr?this.Qr.next():kn.oe),t==="readwrite-primary"?this.wi(u).next((f=>!!f||this.Si(u))).next((f=>{if(!f)throw Ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ie(X.FAILED_PRECONDITION,wS);return i(u)})).next((f=>this.Di(u).next((()=>f)))):this.Ki(u).next((()=>i(u)))))).then((d=>(u.raiseOnCommittedEvent(),d)))}Ki(e){return tc(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(X.FAILED_PRECONDITION,kp)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tc(e).put("owner",t)}static D(){return Br.D()}bi(e){const t=tc(e);return t.get("owner").next((i=>this.vi(i)?(se("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve()))}Mi(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Ct(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;oA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ct("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tc(n){return Bt(n,"owner")}function Md(n){return Bt(n,"clientMetadata")}function d_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class f_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=a}static Wi(e,t){let i=Re(),a=Re();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new f_(e,t.fromCache,i,a)}}class iM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return oA()?8:AS(zt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Yi(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.Zi(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new iM;return this.Xi(e,t,u).next((d=>{if(l.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>l.result))}es(e,t,i,a){return i.documentReadCount<this.ji?(rl()<=Le.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(rl()<=Le.DEBUG&&se("QueryEngine","Query:",il(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(rl()<=Le.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(t))):q.resolve())}Yi(e,t){if(Nw(t))return q.resolve(null);let i=yn(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ff(t,null,"F"),i=yn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=Re(...l);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const p=this.ts(t,d);return this.ns(t,p,u,f.readTime)?this.Yi(e,ff(t,null,"F")):this.rs(e,p,t,f)}))))})))))}Zi(e,t,i,a){return Nw(t)||a.isEqual(ve.min())?q.resolve(null):this.Ji.getDocuments(e,i).next((l=>{const u=this.ts(t,l);return this.ns(t,u,i,a)?q.resolve(null):(rl()<=Le.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),il(t)),this.rs(e,u,t,bS(a,-1)).next((d=>d)))}))}ts(e,t){let i=new it($S(e));return t.forEach(((a,l)=>{qc(e,l)&&(i=i.add(l))})),i}ns(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(e,t,i){return rl()<=Le.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",il(t)),this.Ji.getDocumentsMatchingQuery(e,t,Kn.min(),i)}rs(e,t,i,a){return this.Ji.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}class sM{constructor(e,t,i,a){this.persistence=e,this.ss=t,this.serializer=a,this.os=new lt(Se),this._s=new Li((l=>$a(l)),Bc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function LI(n,e,t,i){return new sM(n,e,t,i)}async function UI(n,e){const t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],d=[];let f=Re();for(const p of a){u.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next((p=>({hs:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function aM(n,e){const t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,_){const b=p.batch,A=b.keys();let x=q.resolve();return A.forEach((O=>{x=x.next((()=>_.getEntry(f,O))).next((L=>{const N=p.docVersions.get(O);pe(N!==null),L.version.compareTo(N)<0&&(b.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),_.addEntry(L)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(f,b)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Re();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function jI(n){const e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function oM(n,e){const t=ue(n),i=e.snapshotVersion;let a=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});a=t.os;const d=[];e.targetChanges.forEach(((_,b)=>{const A=a.get(b);if(!A)return;d.push(t.Ur.removeMatchingKeys(l,_.removedDocuments,b).next((()=>t.Ur.addMatchingKeys(l,_.addedDocuments,b))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?x=x.withResumeToken(bt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,i)),a=a.insert(b,x),(function(L,N,K){return L.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(A,x,_)&&d.push(t.Ur.updateTargetData(l,x))}));let f=On(),p=Re();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(zI(l,u,e.documentUpdates).next((_=>{f=_.Ps,p=_.Is}))),!i.isEqual(ve.min())){const _=t.Ur.getLastRemoteSnapshotVersion(l).next((b=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return q.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,p))).next((()=>f))})).then((l=>(t.os=a,l)))}function zI(n,e,t){let i=Re(),a=Re();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=On();return t.forEach(((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(ve.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):se("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{Ps:u,Is:a}}))}function lM(n,e){const t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Tl(n,e){const t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Ur.getTargetData(i,e).next((l=>l?(a=l,q.resolve(a)):t.Ur.allocateTargetId(i).next((u=>(a=new Si(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function Al(n,e,t){const i=ue(n),a=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Zs(u))throw u;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.os=i.os.remove(e),i._s.delete(a.target)}function vf(n,e,t){const i=ue(n);let a=ve.min(),l=Re();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,p,_){const b=ue(f),A=b._s.get(_);return A!==void 0?q.resolve(b.os.get(A)):b.Ur.getTargetData(p,_)})(i,u,yn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(u,d.targetId).next((f=>{l=f}))})).next((()=>i.ss.getDocumentsMatchingQuery(u,e,t?a:ve.min(),t?l:Re()))).next((d=>(qI(i,QS(e),d),{documents:d,Ts:l})))))}function BI(n,e){const t=ue(n),i=ue(t.Ur),a=t.os.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.ot(l,e).next((u=>u?u.target:null))))}function FI(n,e){const t=ue(n),i=t.us.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.cs.getAllFromCollectionGroup(a,e,bS(i,-1),Number.MAX_SAFE_INTEGER))).then((a=>(qI(t,e,a),a)))}function qI(n,e,t){let i=n.us.get(e)||ve.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.us.set(e,i)}async function uM(n,e,t,i){const a=ue(n);let l=Re(),u=On();for(const p of t){const _=e.Es(p.metadata.name);p.document&&(l=l.add(_));const b=e.ds(p);b.setReadTime(e.As(p.metadata.readTime)),u=u.insert(_,b)}const d=a.cs.newChangeBuffer({trackRemovals:!0}),f=await Tl(a,(function(_){return yn(Ml(Ue.fromString(`__bundle__/docs/${_}`)))})(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",(p=>zI(p,d,u).next((_=>(d.apply(p),_))).next((_=>a.Ur.removeMatchingKeysForTargetId(p,f.targetId).next((()=>a.Ur.addMatchingKeys(p,l,f.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(p,_.Ps,_.Is))).next((()=>_.Ps))))))}async function cM(n,e,t=Re()){const i=await Tl(n,yn(a_(e.bundledQuery))),a=ue(n);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Nt(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return a.Gr.saveNamedQuery(l,e);const d=i.withResumeToken(bt.EMPTY_BYTE_STRING,u);return a.os=a.os.insert(d.targetId,d),a.Ur.updateTargetData(l,d).next((()=>a.Ur.removeMatchingKeysForTargetId(l,i.targetId))).next((()=>a.Ur.addMatchingKeys(l,t,i.targetId))).next((()=>a.Gr.saveNamedQuery(l,e)))}))}function sT(n,e){return`firestore_clients_${n}_${e}`}function aT(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Vp(n,e){return`firestore_targets_${n}_${e}`}class bf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Rs(e,t,i){const a=JSON.parse(i);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new ie(a.error.code,a.error.message))),u?new bf(e,t,a.state,l):(Ct("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ie(i.error.code,i.error.message))),l?new pc(e,i.state,a):(Ct("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ef{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=Wy();for(let u=0;a&&u<i.activeTargetIds.length;++u)a=SS(i.activeTargetIds[u]),l=l.add(i.activeTargetIds[u]);return a?new Ef(e,l):(Ct("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class m_{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new m_(t.clientId,t.onlineState):(Ct("SharedClientState",`Failed to parse online state: ${e}`),null)}}class py{constructor(){this.activeTargetIds=Wy()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Op{constructor(e,t,i,a,l){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new lt(Se),this.started=!1,this.bs=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ds=sT(this.persistenceKey,this.ps),this.vs=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new py),this.Cs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.xs=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.Os=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const i of e){if(i===this.ps)continue;const a=this.getItem(sT(this.persistenceKey,i));if(a){const l=Ef.Rs(i,a);l&&(this.Ss=this.Ss.insert(l.clientId,l))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const i=this.Ls(t);i&&this.Bs(i)}for(const i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Vp(this.persistenceKey,e));if(a){const l=pc.Rs(e,a);l&&(i=l.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vp(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.Qs(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return se("SharedClientState","READ",e,t),t}setItem(e,t){se("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(se("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const i=this.Gs(t.key);return this.zs(i,null)}{const i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){const i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){const i=(function(l){let u=kn.oe;if(l!=null)try{const d=JSON.parse(l);pe(typeof d=="number"),u=d}catch(d){Ct("SharedClientState","Failed to read sequence number from WebStorage",d)}return u})(t.newValue);i!==kn.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){const i=this.Xs(t.newValue);await Promise.all(i.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){const a=new bf(this.currentUser,e,t,i),l=aT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Vs())}Qs(e){const t=aT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){const a=Vp(this.persistenceKey,e),l=new pc(e,t,i);this.setItem(a,l.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const i=this.Gs(e);return Ef.Rs(i,t)}Hs(e,t){const i=this.Fs.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return bf.Rs(new Yt(l),a,t)}Ys(e,t){const i=this.Ms.exec(e),a=Number(i[1]);return pc.Rs(a,t)}Ls(e){return m_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const i=t?this.Ss.insert(e,t):this.Ss.remove(e),a=this.ks(this.Ss),l=this.ks(i),u=[],d=[];return l.forEach((f=>{a.has(f)||u.push(f)})),a.forEach((f=>{l.has(f)||d.push(f)})),this.syncEngine.io(u,d).then((()=>{this.Ss=i}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Wy();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class GI{constructor(){this.so=new py,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new py,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hM{_o(e){}shutdown(){}}class oT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ld=null;function Pp(){return Ld===null?Ld=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ld++,"0x"+Ld.toString(16)}const dM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const fn="WebChannelConnection";class mM extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(t,i,a,l,u){const d=Pp(),f=this.xo(t,i.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${d}:`,f,a);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,u),this.No(t,f,p,a).then((_=>(se("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw Hn("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",f,"request:",a),_}))}Lo(t,i,a,l,u,d){return this.Mo(t,i,a,l,u)}Oo(t,i,a){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,u)=>t[u]=l)),a&&a.headers.forEach(((l,u)=>t[u]=l))}xo(t,i){const a=dM[t];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,a){const l=Pp();return new Promise(((u,d)=>{const f=new hS;f.setWithCredentials(!0),f.listenOnce(dS.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Kd.NO_ERROR:const _=f.getResponseJson();se(fn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case Kd.TIMEOUT:se(fn,`RPC '${e}' ${l} timed out`),d(new ie(X.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const b=f.getStatus();if(se(fn,`RPC '${e}' ${l} failed with status:`,b,"response text:",f.getResponseText()),b>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const x=A?.error;if(x&&x.status&&x.message){const O=(function(N){const K=N.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(K)>=0?K:X.UNKNOWN})(x.status);d(new ie(O,x.message))}else d(new ie(X.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ie(X.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{se(fn,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(a);se(fn,`RPC '${e}' ${l} sending request:`,a),f.send(t,"POST",p,i,15)}))}Bo(e,t,i){const a=Pp(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gS(),d=mS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=l.join("");se(fn,`Creating RPC '${e}' stream ${a}: ${_}`,f);const b=u.createWebChannel(_,f);let A=!1,x=!1;const O=new fM({Io:N=>{x?se(fn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(A||(se(fn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),A=!0),se(fn,`RPC '${e}' stream ${a} sending:`,N),b.send(N))},To:()=>b.close()}),L=(N,K,H)=>{N.listen(K,(j=>{try{H(j)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return L(b,ac.EventType.OPEN,(()=>{x||(se(fn,`RPC '${e}' stream ${a} transport opened.`),O.yo())})),L(b,ac.EventType.CLOSE,(()=>{x||(x=!0,se(fn,`RPC '${e}' stream ${a} transport closed`),O.So())})),L(b,ac.EventType.ERROR,(N=>{x||(x=!0,Hn(fn,`RPC '${e}' stream ${a} transport errored:`,N),O.So(new ie(X.UNAVAILABLE,"The operation could not be completed")))})),L(b,ac.EventType.MESSAGE,(N=>{var K;if(!x){const H=N.data[0];pe(!!H);const j=H,oe=j.error||((K=j[0])===null||K===void 0?void 0:K.error);if(oe){se(fn,`RPC '${e}' stream ${a} received error:`,oe);const ye=oe.status;let de=(function(R){const V=Mt[R];if(V!==void 0)return lI(V)})(ye),C=oe.message;de===void 0&&(de=X.INTERNAL,C="Unknown error status: "+ye+" with message "+oe.message),x=!0,O.So(new ie(de,C)),b.close()}else se(fn,`RPC '${e}' stream ${a} received:`,H),O.bo(H)}})),L(d,fS.STAT_EVENT,(N=>{N.stat===ey.PROXY?se(fn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===ey.NOPROXY&&se(fn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{O.wo()}),0),O}}function HI(){return typeof window<"u"?window:null}function Zd(){return typeof document<"u"?document:null}function Qc(n){return new wP(n,!0)}class g_{constructor(e,t,i=1e3,a=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,t-i);a>0&&se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class KI{constructor(e,t,i,a,l,u,d,f){this.ui=e,this.Ho=i,this.Jo=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new g_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Ct(t.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.Yo===t&&this.P_(i,a)}),(i=>{e((()=>{const a=new ie(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{i((()=>this.I_(a)))})),this.stream.onMessage((a=>{i((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gM extends KI{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=SP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ve.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ve.min():u.readTime?Nt(u.readTime):ve.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=hy(this.serializer),t.addTarget=(function(l,u){let d;const f=u.target;if(d=hf(f)?{documents:_I(l,f)}:{query:Hf(l,f)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=dI(l,u.resumeToken);const p=uy(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(ve.min())>0){d.readTime=wl(l,u.snapshotVersion.toTimestamp());const p=uy(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=xP(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=hy(this.serializer),t.removeTarget=e,this.a_(t)}}class pM extends KI{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=IP(e.writeResults,e.commitTime),i=Nt(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=hy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Rc(this.serializer,i)))};this.a_(t)}}class yM extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ie(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Mo(e,cy(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(X.UNKNOWN,l.toString())}))}Lo(e,t,i,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,cy(t,i),a,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ie(X.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class _M{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ct(t),this.D_=!1):se("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class vM{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((u=>{i.enqueueAndForget((async()=>{ta(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const p=ue(f);p.L_.add(4),await jl(p),p.q_.set("Unknown"),p.L_.delete(4),await $c(p)})(this))}))})),this.q_=new _M(i,a)}}async function $c(n){if(ta(n))for(const e of n.B_)await e(!0)}async function jl(n){for(const e of n.B_)await e(!1)}function Yf(n,e){const t=ue(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),__(t)?y_(t):Bl(t).r_()&&p_(t,e))}function Sl(n,e){const t=ue(n),i=Bl(t);t.N_.delete(e),i.r_()&&QI(t,e),t.N_.size===0&&(i.r_()?i.o_():ta(t)&&t.q_.set("Unknown"))}function p_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bl(n).A_(e)}function QI(n,e){n.Q_.xe(e),Bl(n).R_(e)}function y_(n){n.Q_=new _P({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Bl(n).start(),n.q_.v_()}function __(n){return ta(n)&&!Bl(n).n_()&&n.N_.size>0}function ta(n){return ue(n).L_.size===0}function $I(n){n.Q_=void 0}async function bM(n){n.q_.set("Online")}async function EM(n){n.N_.forEach(((e,t)=>{p_(n,e)}))}async function wM(n,e){$I(n),__(n)?(n.q_.M_(e),y_(n)):n.q_.set("Unknown")}async function TM(n,e,t){if(n.q_.set("Online"),e instanceof hI&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,u),a.N_.delete(d),a.Q_.removeTarget(d))})(n,e)}catch(i){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wf(n,i)}else if(e instanceof Wd?n.Q_.Ke(e):e instanceof cI?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ve.min()))try{const i=await jI(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const d=l.Q_.rt(u);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=l.N_.get(p);_&&l.N_.set(p,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,p)=>{const _=l.N_.get(f);if(!_)return;l.N_.set(f,_.withResumeToken(bt.EMPTY_BYTE_STRING,_.snapshotVersion)),QI(l,f);const b=new Si(_.target,f,p,_.sequenceNumber);p_(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){se("RemoteStore","Failed to raise snapshot:",i),await wf(n,i)}}async function wf(n,e,t){if(!Zs(e))throw e;n.L_.add(1),await jl(n),n.q_.set("Offline"),t||(t=()=>jI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await $c(n)}))}function YI(n,e){return e().catch((t=>wf(n,t,e)))}async function zl(n){const e=ue(n),t=Hs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AM(e);)try{const a=await lM(e.localStore,i);if(a===null){e.O_.length===0&&t.o_();break}i=a.batchId,SM(e,a)}catch(a){await wf(e,a)}XI(e)&&JI(e)}function AM(n){return ta(n)&&n.O_.length<10}function SM(n,e){n.O_.push(e);const t=Hs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XI(n){return ta(n)&&!Hs(n).n_()&&n.O_.length>0}function JI(n){Hs(n).start()}async function IM(n){Hs(n).p_()}async function xM(n){const e=Hs(n);for(const t of n.O_)e.m_(t.mutations)}async function RM(n,e,t){const i=n.O_.shift(),a=n_.from(i,e,t);await YI(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await zl(n)}async function CM(n,e){e&&Hs(n).V_&&await(async function(i,a){if((function(u){return oI(u)&&u!==X.ABORTED})(a.code)){const l=i.O_.shift();Hs(i).s_(),await YI(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await zl(i)}})(n,e),XI(n)&&JI(n)}async function lT(n,e){const t=ue(n);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const i=ta(t);t.L_.add(3),await jl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await $c(t)}async function yy(n,e){const t=ue(n);e?(t.L_.delete(2),await $c(t)):e||(t.L_.add(2),await jl(t),t.q_.set("Unknown"))}function Bl(n){return n.K_||(n.K_=(function(t,i,a){const l=ue(t);return l.w_(),new gM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Eo:bM.bind(null,n),Ro:EM.bind(null,n),mo:wM.bind(null,n),d_:TM.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),__(n)?y_(n):n.q_.set("Unknown")):(await n.K_.stop(),$I(n))}))),n.K_}function Hs(n){return n.U_||(n.U_=(function(t,i,a){const l=ue(t);return l.w_(),new pM(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IM.bind(null,n),mo:CM.bind(null,n),f_:xM.bind(null,n),g_:RM.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await zl(n)):(await n.U_.stop(),n.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}class v_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,d=new v_(e,t,u,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(n,e){if(Ct("AsyncQueue",`${e}: ${n}`),Zs(n))return new ie(X.UNAVAILABLE,`${e}: ${n}`);throw n}class hl{constructor(e){this.comparator=e?(t,i)=>e(t,i)||he.comparator(t.key,i.key):(t,i)=>he.comparator(t.key,i.key),this.keyedMap=oc(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new hl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class uT{constructor(){this.W_=new lt(he.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Il{constructor(e,t,i,a,l,u,d,f,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Il(e,t,hl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class NM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class DM{constructor(){this.queries=cT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const a=ue(t),l=a.queries;a.queries=cT(),l.forEach(((u,d)=>{for(const f of d.j_)f.onError(i)}))})(this,new ie(X.ABORTED,"Firestore shutting down"))}}function cT(){return new Li((n=>KS(n)),Fc)}async function b_(n,e){const t=ue(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.H_()&&e.J_()&&(i=2):(l=new NM,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(a,!0);break;case 1:l.z_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const d=Fl(u,`Initialization of query '${il(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&w_(t)}async function E_(n,e){const t=ue(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.j_.indexOf(e);u>=0&&(l.j_.splice(u,1),l.j_.length===0?a=e.J_()?0:1:!l.H_()&&e.J_()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function kM(n,e){const t=ue(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const d of u.j_)d.X_(a)&&(i=!0);u.z_=a}}i&&w_(t)}function VM(n,e,t){const i=ue(n),a=i.queries.get(e);if(a)for(const l of a.j_)l.onError(t);i.queries.delete(e)}function w_(n){n.Y_.forEach((e=>{e.next()}))}var _y,hT;(hT=_y||(_y={})).ea="default",hT.Cache="cache";class T_{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_y.Cache}}class OM{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class dT{constructor(e){this.serializer=e}Es(e){return Fr(this.serializer,e)}ds(e){return e.metadata.exists?yI(this.serializer,e.document,!1):dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Nt(e)}}class PM{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WI(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const i=Ue.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,i=new dT(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.Es(a.metadata.name);for(const u of a.metadata.queries){const d=(t.get(u)||Re()).add(l);t.set(u,d)}}return t}async complete(){const e=await uM(this.localStore,new dT(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const i of this.queries)await cM(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function WI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZI{constructor(e){this.key=e}}class ex{constructor(e){this.key=e}}class tx{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=$S(e),this.Ra=new hl(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new uT,a=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,b)=>{const A=a.get(_),x=qc(this.query,b)?b:null,O=!!A&&this.mutatedKeys.has(A.key),L=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let N=!1;A&&x?A.data.isEqual(x.data)?O!==L&&(i.track({type:3,doc:x}),N=!0):this.ga(A,x)||(i.track({type:2,doc:x}),N=!0,(f&&this.Aa(x,f)>0||p&&this.Aa(x,p)<0)&&(d=!0)):!A&&x?(i.track({type:0,doc:x}),N=!0):A&&!x&&(i.track({type:1,doc:A}),N=!0,(f||p)&&(d=!0)),N&&(x?(u=u.add(x),l=L?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{Ra:u,fa:i,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,b)=>(function(x,O){const L=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return L(x)-L(O)})(_.type,b.type)||this.Aa(_.doc,b.doc))),this.pa(i),a=a!=null&&a;const d=t&&!a?this.ya():[],f=this.da.size===0&&this.current&&!a?1:0,p=f!==this.Ea;return this.Ea=f,u.length!==0||p?{snapshot:new Il(this.query,e.Ra,l,u,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new ex(i))})),this.da.forEach((i=>{e.has(i)||t.push(new ZI(i))})),t}ba(e){this.Ta=e.Ts,this.da=Re();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Il.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class MM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LM{constructor(e){this.key=e,this.va=!1}}class UM{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Li((d=>KS(d)),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(he.comparator),this.Na=new Map,this.La=new u_,this.Ba={},this.ka=new Map,this.qa=Za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jM(n,e,t=!0){const i=Xf(n);let a;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await nx(i,e,t,!0),a}async function zM(n,e){const t=Xf(n);await nx(t,e,!0,!1)}async function nx(n,e,t,i){const a=await Tl(n.localStore,yn(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await A_(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Yf(n.remoteStore,a),d}async function A_(n,e,t,i,a){n.Ka=(b,A,x)=>(async function(L,N,K,H){let j=N.view.ma(K);j.ns&&(j=await vf(L.localStore,N.query,!1).then((({documents:C})=>N.view.ma(C,j))));const oe=H&&H.targetChanges.get(N.targetId),ye=H&&H.targetMismatches.get(N.targetId)!=null,de=N.view.applyChanges(j,L.isPrimaryClient,oe,ye);return vy(L,N.targetId,de.wa),de.snapshot})(n,b,A,x);const l=await vf(n.localStore,e,!0),u=new tx(e,l.Ts),d=u.ma(l.documents),f=Kc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=u.applyChanges(d,n.isPrimaryClient,f);vy(n,t,p.wa);const _=new MM(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),p.snapshot}async function BM(n,e,t){const i=ue(n),a=i.Fa.get(e),l=i.Ma.get(a.targetId);if(l.length>1)return i.Ma.set(a.targetId,l.filter((u=>!Fc(u,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Al(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Sl(i.remoteStore,a.targetId),xl(i,a.targetId)})).catch(Ws)):(xl(i,a.targetId),await Al(i.localStore,a.targetId,!0))}async function FM(n,e){const t=ue(n),i=t.Fa.get(e),a=t.Ma.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Sl(t.remoteStore,i.targetId))}async function qM(n,e,t){const i=R_(n);try{const a=await(function(u,d){const f=ue(u),p=ot.now(),_=d.reduce(((x,O)=>x.add(O.key)),Re());let b,A;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let O=On(),L=Re();return f.cs.getEntries(x,_).next((N=>{O=N,O.forEach(((K,H)=>{H.isValidDocument()||(L=L.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,O))).next((N=>{b=N;const K=[];for(const H of d){const j=gP(H,b.get(H.key).overlayedDocument);j!=null&&K.push(new Ui(H.key,j,PS(j.value.mapValue),pt.exists(!0)))}return f.mutationQueue.addMutationBatch(x,p,K,d)})).next((N=>{A=N;const K=N.applyToLocalDocumentSet(b,L);return f.documentOverlayCache.saveOverlays(x,N.batchId,K)}))})).then((()=>({batchId:A.batchId,changes:XS(b)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,d,f){let p=u.Ba[u.currentUser.toKey()];p||(p=new lt(Se)),p=p.insert(d,f),u.Ba[u.currentUser.toKey()]=p})(i,a.batchId,t),await ji(i,a.changes),await zl(i.remoteStore)}catch(a){const l=Fl(a,"Failed to persist write");t.reject(l)}}async function rx(n,e){const t=ue(n);try{const i=await oM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Na.get(l);u&&(pe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?u.va=!0:a.modifiedDocuments.size>0?pe(u.va):a.removedDocuments.size>0&&(pe(u.va),u.va=!1))})),await ji(t,i,e)}catch(i){await Ws(i)}}function fT(n,e,t){const i=ue(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Fa.forEach(((l,u)=>{const d=u.view.Z_(e);d.snapshot&&a.push(d.snapshot)})),(function(u,d){const f=ue(u);f.onlineState=d;let p=!1;f.queries.forEach(((_,b)=>{for(const A of b.j_)A.Z_(d)&&(p=!0)})),p&&w_(f)})(i.eventManager,e),a.length&&i.Ca.d_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GM(n,e,t){const i=ue(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Na.get(e),l=a&&a.key;if(l){let u=new lt(he.comparator);u=u.insert(l,dt.newNoDocument(l,ve.min()));const d=Re().add(l),f=new Hc(ve.min(),new Map,new lt(Se),u,d);await rx(i,f),i.Oa=i.Oa.remove(l),i.Na.delete(e),x_(i)}else await Al(i.localStore,e,!1).then((()=>xl(i,e,t))).catch(Ws)}async function HM(n,e){const t=ue(n),i=e.batch.batchId;try{const a=await aM(t.localStore,e);I_(t,i,null),S_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ji(t,a)}catch(a){await Ws(a)}}async function KM(n,e,t){const i=ue(n);try{const a=await(function(u,d){const f=ue(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return f.mutationQueue.lookupMutationBatch(p,d).next((b=>(pe(b!==null),_=b.keys(),f.mutationQueue.removeMutationBatch(p,b)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>f.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);I_(i,e,t),S_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ji(i,a)}catch(a){await Ws(a)}}async function QM(n,e){const t=ue(n);ta(t.remoteStore)||se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(u){const d=ue(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>d.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(i===-1)return void e.resolve();const a=t.ka.get(i)||[];a.push(e),t.ka.set(i,a)}catch(i){const a=Fl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function S_(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function I_(n,e,t){const i=ue(n);let a=i.Ba[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Ba[i.currentUser.toKey()]=a}}function xl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Ma.get(e))n.Fa.delete(i),t&&n.Ca.$a(i,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((i=>{n.La.containsKey(i)||ix(n,i)}))}function ix(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Sl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),x_(n))}function vy(n,e,t){for(const i of t)i instanceof ZI?(n.La.addReference(i.key,e),$M(n,i)):i instanceof ex?(se("SyncEngine","Document no longer in limbo: "+i.key),n.La.removeReference(i.key,e),n.La.containsKey(i.key)||ix(n,i.key)):fe()}function $M(n,e){const t=e.key,i=t.path.canonicalString();n.Oa.get(t)||n.xa.has(i)||(se("SyncEngine","New document in limbo: "+t),n.xa.add(i),x_(n))}function x_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new he(Ue.fromString(e)),i=n.qa.next();n.Na.set(i,new LM(t)),n.Oa=n.Oa.insert(t,i),Yf(n.remoteStore,new Si(yn(Ml(t.path)),i,"TargetPurposeLimboResolution",kn.oe))}}async function ji(n,e,t){const i=ue(n),a=[],l=[],u=[];i.Fa.isEmpty()||(i.Fa.forEach(((d,f)=>{u.push(i.Ka(f,e,t).then((p=>{var _;if((p||t)&&i.isPrimaryClient){const b=p?!p.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(p){a.push(p);const b=f_.Wi(f.targetId,p);l.push(b)}})))})),await Promise.all(u),i.Ca.d_(a),await(async function(f,p){const _=ue(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>q.forEach(p,(A=>q.forEach(A.$i,(x=>_.persistence.referenceDelegate.addReference(b,A.targetId,x))).next((()=>q.forEach(A.Ui,(x=>_.persistence.referenceDelegate.removeReference(b,A.targetId,x)))))))))}catch(b){if(!Zs(b))throw b;se("LocalStore","Failed to update sequence numbers: "+b)}for(const b of p){const A=b.targetId;if(!b.fromCache){const x=_.os.get(A),O=x.snapshotVersion,L=x.withLastLimboFreeSnapshotVersion(O);_.os=_.os.insert(A,L)}}})(i.localStore,l))}async function YM(n,e){const t=ue(n);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const i=await UI(t.localStore,e);t.currentUser=e,(function(l,u){l.ka.forEach((d=>{d.forEach((f=>{f.reject(new ie(X.CANCELLED,u))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ji(t,i.hs)}}function XM(n,e){const t=ue(n),i=t.Na.get(e);if(i&&i.va)return Re().add(i.key);{let a=Re();const l=t.Ma.get(e);if(!l)return a;for(const u of l){const d=t.Fa.get(u);a=a.unionWith(d.view.Va)}return a}}async function JM(n,e){const t=ue(n),i=await vf(t.localStore,e.query,!0),a=e.view.ba(i);return t.isPrimaryClient&&vy(t,e.targetId,a.wa),a}async function WM(n,e){const t=ue(n);return FI(t.localStore,e).then((i=>ji(t,i)))}async function ZM(n,e,t,i){const a=ue(n),l=await(function(d,f){const p=ue(d),_=ue(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(b=>_.Mn(b,f).next((A=>A?p.localDocuments.getDocuments(b,A):q.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await zl(a.remoteStore):t==="acknowledged"||t==="rejected"?(I_(a,e,i||null),S_(a,e),(function(d,f){ue(ue(d).mutationQueue).On(f)})(a.localStore,e)):fe(),await ji(a,l)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function e4(n,e){const t=ue(n);if(Xf(t),R_(t),e===!0&&t.Qa!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await mT(t,i.toArray());t.Qa=!0,await yy(t.remoteStore,!0);for(const l of a)Yf(t.remoteStore,l)}else if(e===!1&&t.Qa!==!1){const i=[];let a=Promise.resolve();t.Ma.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):a=a.then((()=>(xl(t,u),Al(t.localStore,u,!0)))),Sl(t.remoteStore,u)})),await a,await mT(t,i),(function(u){const d=ue(u);d.Na.forEach(((f,p)=>{Sl(d.remoteStore,p)})),d.La.pr(),d.Na=new Map,d.Oa=new lt(he.comparator)})(t),t.Qa=!1,await yy(t.remoteStore,!1)}}async function mT(n,e,t){const i=ue(n),a=[],l=[];for(const u of e){let d;const f=i.Ma.get(u);if(f&&f.length!==0){d=await Tl(i.localStore,yn(f[0]));for(const p of f){const _=i.Fa.get(p),b=await JM(i,_);b.snapshot&&l.push(b.snapshot)}}else{const p=await BI(i.localStore,u);d=await Tl(i.localStore,p),await A_(i,sx(p),u,!1,d.resumeToken)}a.push(d)}return i.Ca.d_(l),a}function sx(n){return qS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t4(n){return(function(t){return ue(ue(t).persistence).Qi()})(ue(n).localStore)}async function n4(n,e,t,i){const a=ue(n);if(a.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const l=a.Ma.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await FI(a.localStore,QS(l[0])),d=Hc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",bt.EMPTY_BYTE_STRING);await ji(a,u,d);break}case"rejected":await Al(a.localStore,e,!0),xl(a,e,i);break;default:fe()}}async function r4(n,e,t){const i=Xf(n);if(i.Qa){for(const a of e){if(i.Ma.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){se("SyncEngine","Adding an already active target "+a);continue}const l=await BI(i.localStore,a),u=await Tl(i.localStore,l);await A_(i,sx(l),u.targetId,!1,u.resumeToken),Yf(i.remoteStore,u)}for(const a of t)i.Ma.has(a)&&await Al(i.localStore,a,!1).then((()=>{Sl(i.remoteStore,a),xl(i,a)})).catch(Ws)}}function Xf(n){const e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GM.bind(null,e),e.Ca.d_=kM.bind(null,e.eventManager),e.Ca.$a=VM.bind(null,e.eventManager),e}function R_(n){const e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KM.bind(null,e),e}function i4(n,e,t){const i=ue(n);(async function(l,u,d){try{const f=await u.getMetadata();if(await(function(x,O){const L=ue(x),N=Nt(O.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",(K=>L.Gr.getBundleMetadata(K,O.id))).then((K=>!!K&&K.createTime.compareTo(N)>=0))})(l.localStore,f))return await u.close(),d._completeWith((function(x){return{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}})(f)),Promise.resolve(new Set);d._updateProgress(WI(f));const p=new PM(f,l.localStore,u.serializer);let _=await u.Ua();for(;_;){const A=await p.la(_);A&&d._updateProgress(A),_=await u.Ua()}const b=await p.complete();return await ji(l,b.Ia,void 0),await(function(x,O){const L=ue(x);return L.persistence.runTransaction("Save bundle","readwrite",(N=>L.Gr.saveBundleMetadata(N,O)))})(l.localStore,f),d._completeWith(b.progress),Promise.resolve(b.Pa)}catch(f){return Hn("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}})(i,e,t).then((a=>{i.sharedClientState.notifyBundleLoaded(a)}))}class Ks{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return LI(this.persistence,new MI,e.initialUser,this.serializer)}Ga(e){return new c_($f.Zr,this.serializer)}Wa(e){return new GI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ks.provider={build:()=>new Ks};class s4 extends Ks{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){pe(this.persistence.referenceDelegate instanceof _f);const i=this.persistence.referenceDelegate.garbageCollector;return new DI(i,e.asyncQueue,t)}Ga(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new c_((i=>_f.Zr(i,t)),this.serializer)}}class C_ extends Ks{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await R_(this.Ja.syncEngine),await zl(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return LI(this.persistence,new MI,e.initialUser,this.serializer)}ja(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new DI(i,e.asyncQueue,t)}Ha(e,t){const i=new IO(t,this.persistence);return new SO(e.asyncQueue,i)}Ga(e){const t=d_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new h_(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,HI(),Zd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new GI}}class ax extends C_{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Op&&(this.sharedClientState.syncEngine={no:ZM.bind(null,t),ro:n4.bind(null,t),io:r4.bind(null,t),Qi:t4.bind(null,t),eo:WM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async i=>{await e4(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=HI();if(!Op.D(t))throw new ie(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=d_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Op(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Qs{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>fT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YM.bind(null,this.syncEngine),await yy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DM})()}createDatastore(e){const t=Qc(e.databaseInfo.databaseId),i=(function(l){return new mM(l)})(e.databaseInfo);return(function(l,u,d,f){return new yM(l,u,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,d){return new vM(i,a,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>fT(this.syncEngine,t,0)),(function(){return oT.D()?new oT:new hM})())}createSyncEngine(e,t){return(function(a,l,u,d,f,p,_){const b=new UM(a,l,u,d,f,p);return _&&(b.Qa=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ue(a);se("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await jl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Qs.provider={build:()=>new Qs};function gT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Jf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ct("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class a4{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Xt,this.buffer=new Uint8Array,this.eu=(function(){return new TextDecoder("utf-8")})(),this.tu().then((i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),i=Number(t);isNaN(i)&&this.ru(`length string (${t}) is not valid number`);const a=await this.iu(i);return new OM(JSON.parse(a),e.length+i)}su(){return this.buffer.findIndex((e=>e===123))}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class o4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=ue(a),d={documents:l.map((b=>xc(u.serializer,b)))},f=await u.Lo("BatchGetDocuments",u.serializer.databaseId,Ue.emptyPath(),d,l.length),p=new Map;f.forEach((b=>{const A=AP(u.serializer,b);p.set(A.key.toString(),A)}));const _=[];return l.forEach((b=>{const A=p.get(b.toString());pe(!!A),_.push(A)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const a=he.fromPath(i);this.mutations.push(new e_(a,this.precondition(a)))})),await(async function(i,a){const l=ue(i),u={writes:a.map((d=>Rc(l.serializer,d)))};await l.Mo("Commit",l.serializer.databaseId,Ue.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fe();t=ve.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ie(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ve.min())?pt.exists(!1):pt.updateTime(t):pt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ve.min()))throw new ie(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pt.updateTime(t)}return pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class l4{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this._u=i.maxAttempts,this.t_=new g_(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new o4(this.datastore),t=this.cu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((a=>{this.lu(a)}))))})).catch((i=>{this.lu(i)}))}))}cu(e){try{const t=this.updateFunction(e);return!zc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!oI(t)}return!1}}class u4{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Yt.UNAUTHENTICATED,this.clientId=Ky.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{se("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(se("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Fl(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Mp(n,e){n.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await UI(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function pT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N_(n);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>lT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>lT(e.remoteStore,a))),n._onlineComponents=e}async function N_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===X.FAILED_PRECONDITION||a.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Hn("Error using user provided cache. Falling back to memory cache: "+t),await Mp(n,new Ks)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Mp(n,new Ks);return n._offlineComponents}async function Wf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await pT(n,n._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await pT(n,new Qs))),n._onlineComponents}function ox(n){return N_(n).then((e=>e.persistence))}function ql(n){return N_(n).then((e=>e.localStore))}function lx(n){return Wf(n).then((e=>e.remoteStore))}function D_(n){return Wf(n).then((e=>e.syncEngine))}function ux(n){return Wf(n).then((e=>e.datastore))}async function Rl(n){const e=await Wf(n),t=e.eventManager;return t.onListen=jM.bind(null,e.syncEngine),t.onUnlisten=BM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FM.bind(null,e.syncEngine),t}function c4(n){return n.asyncQueue.enqueue((async()=>{const e=await ox(n),t=await lx(n);return e.setNetworkEnabled(!0),(function(a){const l=ue(a);return l.L_.delete(0),$c(l)})(t)}))}function h4(n){return n.asyncQueue.enqueue((async()=>{const e=await ox(n),t=await lx(n);return e.setNetworkEnabled(!1),(async function(a){const l=ue(a);l.L_.add(0),await jl(l),l.q_.set("Offline")})(t)}))}function d4(n,e){const t=new Xt;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const d=await(function(p,_){const b=ue(p);return b.persistence.runTransaction("read document","readonly",(A=>b.localDocuments.getDocument(A,_)))})(a,l);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new ie(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Fl(d,`Failed to get document '${l} from cache`);u.reject(f)}})(await ql(n),e,t))),t.promise}function cx(n,e,t={}){const i=new Xt;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,f,p){const _=new Jf({next:A=>{_.Za(),u.enqueueAndForget((()=>E_(l,b)));const x=A.docs.has(d);!x&&A.fromCache?p.reject(new ie(X.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&A.fromCache&&f&&f.source==="server"?p.reject(new ie(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new T_(Ml(d.path),_,{includeMetadataChanges:!0,_a:!0});return b_(l,b)})(await Rl(n),n.asyncQueue,e,t,i))),i.promise}function f4(n,e){const t=new Xt;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const d=await vf(a,l,!0),f=new tx(l,d.Ts),p=f.ma(d.documents),_=f.applyChanges(p,!1);u.resolve(_.snapshot)}catch(d){const f=Fl(d,`Failed to execute query '${l} against cache`);u.reject(f)}})(await ql(n),e,t))),t.promise}function hx(n,e,t={}){const i=new Xt;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,f,p){const _=new Jf({next:A=>{_.Za(),u.enqueueAndForget((()=>E_(l,b))),A.fromCache&&f.source==="server"?p.reject(new ie(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),b=new T_(d,_,{includeMetadataChanges:!0,_a:!0});return b_(l,b)})(await Rl(n),n.asyncQueue,e,t,i))),i.promise}function m4(n,e,t){const i=new Xt;return n.asyncQueue.enqueueAndForget((async()=>{try{const a=await ux(n);i.resolve((async function(u,d,f){var p;const _=ue(u),{request:b,ut:A,parent:x}=vI(_.serializer,GS(d),f);_.connection.Fo||delete b.parent;const O=(await _.Lo("RunAggregationQuery",_.serializer.databaseId,x,b,1)).filter((N=>!!N.result));pe(O.length===1);const L=(p=O[0].result)===null||p===void 0?void 0:p.aggregateFields;return Object.keys(L).reduce(((N,K)=>(N[A[K]]=L[K],N)),{})})(a,e,t))}catch(a){i.reject(a)}})),i.promise}function g4(n,e){const t=new Jf(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ue(a).Y_.add(l),l.next()})(await Rl(n),t))),()=>{t.Za(),n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ue(a).Y_.delete(l)})(await Rl(n),t)))}}function p4(n,e,t,i){const a=(function(u,d){let f;return f=typeof u=="string"?uI().encode(u):u,(function(_,b){return new a4(_,b)})((function(_,b){if(_ instanceof Uint8Array)return gT(_,b);if(_ instanceof ArrayBuffer)return gT(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),d)})(t,Qc(e));n.asyncQueue.enqueueAndForget((async()=>{i4(await D_(n),a,i)}))}function y4(n,e){return n.asyncQueue.enqueue((async()=>(function(i,a){const l=ue(i);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Gr.getNamedQuery(u,a)))})(await ql(n),e)))}function _4(n,e){return n.asyncQueue.enqueue((async()=>(async function(i,a){const l=ue(i),u=l.indexManager,d=[];return l.persistence.runTransaction("Configure indexes","readwrite",(f=>u.getFieldIndexes(f).next((p=>(function(b,A,x,O,L){b=[...b],A=[...A],b.sort(x),A.sort(x);const N=b.length,K=A.length;let H=0,j=0;for(;H<K&&j<N;){const oe=x(b[j],A[H]);oe<0?L(b[j++]):oe>0?O(A[H++]):(H++,j++)}for(;H<K;)O(A[H++]);for(;j<N;)L(b[j++])})(p,a,EO,(_=>{d.push(u.addFieldIndex(f,_))}),(_=>{d.push(u.deleteFieldIndex(f,_))})))).next((()=>q.waitFor(d)))))})(await ql(n),e)))}function v4(n,e){return n.asyncQueue.enqueue((async()=>(function(i,a){ue(i).ss.zi=a})(await ql(n),e)))}function b4(n){return n.asyncQueue.enqueue((async()=>(function(t){const i=ue(t),a=i.indexManager;return i.persistence.runTransaction("Delete All Indexes","readwrite",(l=>a.deleteAllFieldIndexes(l)))})(await ql(n))))}function dx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const yT=new Map;function k_(n,e,t){if(!t)throw new ie(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fx(n,e,t,i){if(e===!0&&i===!0)throw new ie(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _T(n){if(!he.isDocumentKey(n))throw new ie(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vT(n){if(he.isDocumentKey(n))throw new ie(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fe()}function ke(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ie(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zf(n);throw new ie(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mx(n,e){if(e<=0)throw new ie(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class bT{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ie(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new yS;switch(i.type){case"firstParty":return new pO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=yT.get(t);i&&(se("ComponentProvider","Removing Datastore"),yT.delete(t),i.terminate())})(this),Promise.resolve()}}function gx(n,e,t,i={}){var a;const l=(n=ke(n,Yc))._getSettings(),u=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==u&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=Yt.MOCK_USER;else{d=jN(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ie(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Yt(p)}n._authCredentials=new fO(new pS(d,f))}}class Jt{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Jt(this.firestore,e,this._query)}}class St{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class _r extends Jt{constructor(e,t,i){super(e,t,Ml(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new he(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function Tf(n,e,...t){if(n=Qe(n),k_("collection","path",e),n instanceof Yc){const i=Ue.fromString(e,...t);return vT(i),new _r(n,null,i)}{if(!(n instanceof St||n instanceof _r))throw new ie(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ue.fromString(e,...t));return vT(i),new _r(n.firestore,null,i)}}function E4(n,e){if(n=ke(n,Yc),k_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jt(n,null,(function(i){return new Mi(Ue.emptyPath(),i)})(e))}function gr(n,e,...t){if(n=Qe(n),arguments.length===1&&(e=Ky.newId()),k_("doc","path",e),n instanceof Yc){const i=Ue.fromString(e,...t);return _T(i),new St(n,null,new he(i))}{if(!(n instanceof St||n instanceof _r))throw new ie(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ue.fromString(e,...t));return _T(i),new St(n.firestore,n instanceof _r?n.converter:null,new he(i))}}function w4(n,e){return n=Qe(n),e=Qe(e),(n instanceof St||n instanceof _r)&&(e instanceof St||e instanceof _r)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function V_(n,e){return n=Qe(n),e=Qe(e),n instanceof Jt&&e instanceof Jt&&n.firestore===e.firestore&&Fc(n._query,e._query)&&n.converter===e.converter}class ET{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new g_(this,"async_queue_retry"),this.Vu=()=>{const i=Zd();i&&se("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Zd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Zd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Xt;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zs(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const a=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(i);throw Ct("INTERNAL UNHANDLED ERROR: ",a),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const a=v_.createAndSchedule(this,e,t,i,(l=>this.yu(l)));return this.Tu.push(a),a}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function by(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class px{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const T4=-1;class st extends Yc{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new ET,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function A4(n,e,t){t||(t="(default)");const i=Oi(n,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(Ci(l,e))return a;throw new ie(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ie(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:t})}function yx(n,e){const t=typeof n=="object"?n:Oy(),i=typeof n=="string"?n:e||"(default)",a=Oi(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=LN("firestore");l&&gx(a,...l)}return a}function _t(n){if(n._terminated)throw new ie(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_x(n),n._firestoreClient}function _x(n){var e,t,i;const a=n._freezeSettings(),l=(function(d,f,p,_){return new $O(d,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,dx(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new u4(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(n._componentsProvider))}function S4(n,e){Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return vx(n,Qs.provider,{build:i=>new C_(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function I4(n){Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();vx(n,Qs.provider,{build:t=>new ax(t,e.cacheSizeBytes)})}function vx(n,e,t){if((n=ke(n,st))._firestoreClient||n._terminated)throw new ie(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ie(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},_x(n)}function x4(n){if(n._initialized&&!n._terminated)throw new ie(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xt;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Br.D())return Promise.resolve();const a=i+"main";await Br.delete(a)})(d_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function R4(n){return(function(t){const i=new Xt;return t.asyncQueue.enqueueAndForget((async()=>QM(await D_(t),i))),i.promise})(_t(n=ke(n,st)))}function C4(n){return c4(_t(n=ke(n,st)))}function N4(n){return h4(_t(n=ke(n,st)))}function D4(n){return WD(n.app,"firestore",n._databaseId.database),n._delete()}function k4(n,e){const t=_t(n=ke(n,st)),i=new px;return p4(t,n._databaseId,e,i),i}function V4(n,e){return y4(_t(n=ke(n,st)),e).then((t=>t?new Jt(n,null,t.query):null))}class Cl{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class bx{constructor(e,t,i){this._userDataWriter=t,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(bt.fromBase64String(e))}catch(t){throw new ie(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $s(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class na{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function O4(){return new na("__name__")}class ra{constructor(e){this._methodName=e}}class em{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}class Xc{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}}const P4=/^__.*__$/;class M4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ll(e,this.data,t,this.fieldTransforms)}}class Ex{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class tm{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new tm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:i,xu:!1});return a.Ou(e),a}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Af(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wx(this.Cu)&&P4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class L4{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Qc(e)}Qu(e,t,i,a=!1){return new tm({Cu:e,methodName:t,qu:i,path:ft.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ao(n){const e=n._freezeSettings(),t=Qc(n._databaseId);return new L4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nm(n,e,t,i,a,l={}){const u=n.Qu(l.merge||l.mergeFields?2:0,e,t,a);z_("Data must be an object, but it was:",u,i);const d=Sx(i,u);let f,p;if(l.merge)f=new Vn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const A=Cc(e,b,t);if(!u.contains(A))throw new ie(X.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);xx(_,A)||_.push(A)}f=new Vn(_),p=u.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,p=u.fieldTransforms;return new M4(new un(d),f,p)}class Jc extends ra{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}function Tx(n,e,t){return new tm({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class O_ extends ra{_toFieldTransform(e){return new Gc(e.path,new bl)}isEqual(e){return e instanceof O_}}class P_ extends ra{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Tx(this,e,!0),i=this.Ku.map((l=>oo(l,t))),a=new Ya(i);return new Gc(e.path,a)}isEqual(e){return e instanceof P_&&Ci(this.Ku,e.Ku)}}class M_ extends ra{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Tx(this,e,!0),i=this.Ku.map((l=>oo(l,t))),a=new Xa(i);return new Gc(e.path,a)}isEqual(e){return e instanceof M_&&Ci(this.Ku,e.Ku)}}class L_ extends ra{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new El(e.serializer,ZS(e.serializer,this.$u));return new Gc(e.path,t)}isEqual(e){return e instanceof L_&&this.$u===e.$u}}function U_(n,e,t,i){const a=n.Qu(1,e,t);z_("Data must be an object, but it was:",a,i);const l=[],u=un.empty();ea(i,((f,p)=>{const _=rm(e,f,t);p=Qe(p);const b=a.Nu(_);if(p instanceof Jc)l.push(_);else{const A=oo(p,b);A!=null&&(l.push(_),u.set(_,A))}}));const d=new Vn(l);return new Ex(u,d,a.fieldTransforms)}function j_(n,e,t,i,a,l){const u=n.Qu(1,e,t),d=[Cc(e,i,t)],f=[a];if(l.length%2!=0)throw new ie(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Cc(e,l[A])),f.push(l[A+1]);const p=[],_=un.empty();for(let A=d.length-1;A>=0;--A)if(!xx(p,d[A])){const x=d[A];let O=f[A];O=Qe(O);const L=u.Nu(x);if(O instanceof Jc)p.push(x);else{const N=oo(O,L);N!=null&&(p.push(x),_.set(x,N))}}const b=new Vn(p);return new Ex(_,b,u.fieldTransforms)}function Ax(n,e,t,i=!1){return oo(t,n.Qu(i?4:3,e))}function oo(n,e){if(Ix(n=Qe(n)))return z_("Unsupported field value:",e,n),Sx(n,e);if(n instanceof ra)return(function(i,a){if(!wx(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const d of i){let f=oo(d,a.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZS(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ot.fromDate(i);return{timestampValue:wl(a.serializer,l)}}if(i instanceof ot){const l=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wl(a.serializer,l)}}if(i instanceof em)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $s)return{bytesValue:dI(a.serializer,i._byteString)};if(i instanceof St){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:s_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Xc)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return Zy(d.serializer,f)}))}}}}}})(i,a);throw a.Bu(`Unsupported field value: ${Zf(i)}`)})(n,e)}function Sx(n,e){const t={};return DS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ea(n,((i,a)=>{const l=oo(a,e.Mu(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Ix(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof em||n instanceof $s||n instanceof St||n instanceof ra||n instanceof Xc)}function z_(n,e,t){if(!Ix(t)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(t)){const i=Zf(t);throw i==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+i)}}function Cc(n,e,t){if((e=Qe(e))instanceof na)return e._internalPath;if(typeof e=="string")return rm(n,e);throw Af("Field path arguments must be of type string or ",n,!1,void 0,t)}const U4=new RegExp("[~\\*/\\[\\]]");function rm(n,e,t){if(e.search(U4)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new na(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Af(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||u)&&(f+=" (found",l&&(f+=` in field ${i}`),u&&(f+=` in document ${a}`),f+=")"),new ie(X.INVALID_ARGUMENT,d+n+f)}function xx(n,e){return n.some((t=>t.isEqual(e)))}class Nc{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(im("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class j4 extends Nc{data(){return super.data()}}function im(n,e){return typeof e=="string"?rm(n,e):e instanceof na?e._internalPath:e._delegate._internalPath}function Rx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ie(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B_{}class Gl extends B_{}function F_(n,e,...t){let i=[];e instanceof B_&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((f=>f instanceof lo)).length,d=l.filter((f=>f instanceof Hl)).length;if(u>1||u>0&&d>0)throw new ie(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class Hl extends Gl{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hl(e,t,i)}_apply(e){const t=this._parse(e);return Nx(e._query,t),new Jt(e.firestore,e.converter,ly(e._query,t))}_parse(e){const t=ao(e.firestore);return(function(l,u,d,f,p,_,b){let A;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ie(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){TT(b,_);const x=[];for(const O of b)x.push(wT(f,l,O));A={arrayValue:{values:x}}}else A=wT(f,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||TT(b,_),A=Ax(d,u,b,_==="in"||_==="not-in");return je.create(p,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function q_(n,e,t){const i=e,a=im("where",n);return Hl._create(a,i,t)}class lo extends B_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lo(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const d=l.getFlattenedFilters();for(const f of d)Nx(u,f),u=ly(u,f)})(e._query,t),new Jt(e.firestore,e.converter,ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function z4(...n){return n.forEach((e=>Dx("or",e))),lo._create("or",n)}function B4(...n){return n.forEach((e=>Dx("and",e))),lo._create("and",n)}class sm extends Gl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sm(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new ie(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ie(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ic(l,u)})(e._query,this._field,this._direction);return new Jt(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Mi(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function F4(n,e="asc"){const t=e,i=im("orderBy",n);return sm._create(i,t)}class Wc extends Gl{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Wc(e,t,i)}_apply(e){return new Jt(e.firestore,e.converter,ff(e._query,this._limit,this._limitType))}}function q4(n){return mx("limit",n),Wc._create("limit",n,"F")}function G4(n){return mx("limitToLast",n),Wc._create("limitToLast",n,"L")}class Zc extends Gl{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Zc(e,t,i)}_apply(e){const t=Cx(e,this.type,this._docOrFields,this._inclusive);return new Jt(e.firestore,e.converter,(function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function H4(...n){return Zc._create("startAt",n,!0)}function K4(...n){return Zc._create("startAfter",n,!1)}class eh extends Gl{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new eh(e,t,i)}_apply(e){const t=Cx(e,this.type,this._docOrFields,this._inclusive);return new Jt(e.firestore,e.converter,(function(a,l){return new Mi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function Q4(...n){return eh._create("endBefore",n,!1)}function $4(...n){return eh._create("endAt",n,!0)}function Cx(n,e,t,i){if(t[0]=Qe(t[0]),t[0]instanceof Nc)return(function(l,u,d,f,p){if(!f)throw new ie(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const b of cl(l))if(b.field.isKeyField())_.push(Qa(u,f.key));else{const A=f.data.field(b.field);if(zf(A))throw new ie(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const x=b.field.canonicalString();throw new ie(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(A)}return new Gs(_,p)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=ao(n.firestore);return(function(u,d,f,p,_,b){const A=u.explicitOrderBy;if(_.length>A.length)throw new ie(X.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let O=0;O<_.length;O++){const L=_[O];if(A[O].field.isKeyField()){if(typeof L!="string")throw new ie(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof L}`);if(!Jy(u)&&L.indexOf("/")!==-1)throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${L}' contains a slash.`);const N=u.path.child(Ue.fromString(L));if(!he.isDocumentKey(N))throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const K=new he(N);x.push(Qa(d,K))}else{const N=Ax(f,p,L);x.push(N)}}return new Gs(x,b)})(n._query,n.firestore._databaseId,a,e,t,i)}}function wT(n,e,t){if(typeof(t=Qe(t))=="string"){if(t==="")throw new ie(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jy(e)&&t.indexOf("/")!==-1)throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ue.fromString(t));if(!he.isDocumentKey(i))throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qa(n,new he(i))}if(t instanceof St)return Qa(n,t._key);throw new ie(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(t)}.`)}function TT(n,e){if(!Array.isArray(n)||n.length===0)throw new ie(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nx(n,e){const t=(function(a,l){for(const u of a)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Dx(n,e){if(!(e instanceof Hl||e instanceof lo))throw new ie(X.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class G_{convertValue(e,t="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ea(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map((u=>gt(u.doubleValue)));return new Xc(l)}convertGeoPoint(e){return new em(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Bf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=ki(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ue.fromString(e);pe(TI(i));const a=new Bs(i.get(1),i.get(3)),l=new he(i.popFirst(5));return a.isEqual(t)||Ct(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function am(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Y4 extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function X4(n){return new Cl("sum",Cc("sum",n))}function J4(n){return new Cl("avg",Cc("average",n))}function kx(){return new Cl("count")}function W4(n,e){var t,i;return n instanceof Cl&&e instanceof Cl&&n.aggregateType===e.aggregateType&&((t=n._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((i=e._internalFieldPath)===null||i===void 0?void 0:i.canonicalString())}function Z4(n,e){return V_(n.query,e.query)&&Ci(n.data(),e.data())}class Ms{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends Nc{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(im("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class yc extends eo{data(e={}){return super.data(e)}}class to{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ms(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new yc(this._firestore,this._userDataWriter,i.key,i,new Ms(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((d=>{const f=new yc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ms(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const f=new yc(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ms(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:eL(d.type),doc:f,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}function tL(n,e){return n instanceof eo&&e instanceof eo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof to&&e instanceof to&&n._firestore===e._firestore&&V_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cc(n){n=ke(n,St);const e=ke(n.firestore,st);return cx(_t(e),n._key).then((t=>Q_(e,n,t)))}class ia extends G_{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function nL(n){n=ke(n,St);const e=ke(n.firestore,st),t=_t(e),i=new ia(e);return d4(t,n._key).then((a=>new eo(e,i,n._key,a,new Ms(a!==null&&a.hasLocalMutations,!0),n.converter)))}function rL(n){n=ke(n,St);const e=ke(n.firestore,st);return cx(_t(e),n._key,{source:"server"}).then((t=>Q_(e,n,t)))}function H_(n){n=ke(n,Jt);const e=ke(n.firestore,st),t=_t(e),i=new ia(e);return Rx(n._query),hx(t,n._query).then((a=>new to(e,i,n,a)))}function iL(n){n=ke(n,Jt);const e=ke(n.firestore,st),t=_t(e),i=new ia(e);return f4(t,n._query).then((a=>new to(e,i,n,a)))}function sL(n){n=ke(n,Jt);const e=ke(n.firestore,st),t=_t(e),i=new ia(e);return hx(t,n._query,{source:"server"}).then((a=>new to(e,i,n,a)))}function Vx(n,e,t){n=ke(n,St);const i=ke(n.firestore,st),a=am(n.converter,e,t);return Kl(i,[nm(ao(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,pt.none())])}function _c(n,e,t,...i){n=ke(n,St);const a=ke(n.firestore,st),l=ao(a);let u;return u=typeof(e=Qe(e))=="string"||e instanceof na?j_(l,"updateDoc",n._key,e,t,i):U_(l,"updateDoc",n._key,e),Kl(a,[u.toMutation(n._key,pt.exists(!0))])}function K_(n){return Kl(ke(n.firestore,st),[new Ul(n._key,pt.none())])}function Ox(n,e){const t=ke(n.firestore,st),i=gr(n),a=am(n.converter,e);return Kl(t,[nm(ao(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,pt.exists(!1))]).then((()=>i))}function aL(n,...e){var t,i,a;n=Qe(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||by(e[u])||(l=e[u],u++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(by(e[u])){const b=e[u];e[u]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[u+1]=(i=b.error)===null||i===void 0?void 0:i.bind(b),e[u+2]=(a=b.complete)===null||a===void 0?void 0:a.bind(b)}let f,p,_;if(n instanceof St)p=ke(n.firestore,st),_=Ml(n._key.path),f={next:b=>{e[u]&&e[u](Q_(p,n,b))},error:e[u+1],complete:e[u+2]};else{const b=ke(n,Jt);p=ke(b.firestore,st),_=b._query;const A=new ia(p);f={next:x=>{e[u]&&e[u](new to(p,A,b,x))},error:e[u+1],complete:e[u+2]},Rx(n._query)}return(function(A,x,O,L){const N=new Jf(L),K=new T_(x,N,O);return A.asyncQueue.enqueueAndForget((async()=>b_(await Rl(A),K))),()=>{N.Za(),A.asyncQueue.enqueueAndForget((async()=>E_(await Rl(A),K)))}})(_t(p),_,d,f)}function oL(n,e){return g4(_t(n=ke(n,st)),by(e)?e:{next:e})}function Kl(n,e){return(function(i,a){const l=new Xt;return i.asyncQueue.enqueueAndForget((async()=>qM(await D_(i),a,l))),l.promise})(_t(n),e)}function Q_(n,e,t){const i=t.docs.get(e._key),a=new ia(n);return new eo(n,a,e._key,i,new Ms(t.hasPendingWrites,t.fromCache),e.converter)}function lL(n){return Px(n,{count:kx()})}function Px(n,e){const t=ke(n.firestore,st),i=_t(t),a=NS(e,((l,u)=>new aI(u,l.aggregateType,l._internalFieldPath)));return m4(i,n._query,a).then((l=>(function(d,f,p){const _=new ia(d);return new bx(f,_,p)})(t,n,l)))}class uL{constructor(e){this.kind="memory",this._onlineComponentProvider=Qs.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Ks.provider}toJSON(){return{kind:this.kind}}}class cL{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Mx(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class hL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ks.provider}toJSON(){return{kind:this.kind}}}class dL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new s4(e)}}toJSON(){return{kind:this.kind}}}function fL(){return new hL}function mL(n){return new dL(n?.cacheSizeBytes)}function gL(n){return new uL(n)}function pL(n){return new cL(n)}class yL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qs.provider,this._offlineComponentProvider={build:t=>new C_(t,e?.cacheSizeBytes,this.forceOwnership)}}}class _L{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qs.provider,this._offlineComponentProvider={build:t=>new ax(t,e?.cacheSizeBytes)}}}function Mx(n){return new yL(n?.forceOwnership)}function vL(){return new _L}const bL={maxAttempts:5};class Lx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ao(e)}set(e,t,i){this._verifyNotCommitted();const a=Os(e,this._firestore),l=am(a.converter,t,i),u=nm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,pt.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=Os(e,this._firestore);let u;return u=typeof(t=Qe(t))=="string"||t instanceof na?j_(this._dataReader,"WriteBatch.update",l._key,t,i,a):U_(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Os(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(t._key,pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Os(n,e){if((n=Qe(n)).firestore!==e)throw new ie(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ux extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=ao(t)}get(t){const i=Os(t,this._firestore),a=new Y4(this._firestore);return this._transaction.lookup([i._key]).then((l=>{if(!l||l.length!==1)return fe();const u=l[0];if(u.isFoundDocument())return new Nc(this._firestore,a,u.key,u,i.converter);if(u.isNoDocument())return new Nc(this._firestore,a,i._key,null,i.converter);throw fe()}))}set(t,i,a){const l=Os(t,this._firestore),u=am(l.converter,i,a),d=nm(this._dataReader,"Transaction.set",l._key,u,l.converter!==null,a);return this._transaction.set(l._key,d),this}update(t,i,a,...l){const u=Os(t,this._firestore);let d;return d=typeof(i=Qe(i))=="string"||i instanceof na?j_(this._dataReader,"Transaction.update",u._key,i,a,l):U_(this._dataReader,"Transaction.update",u._key,i),this._transaction.update(u._key,d),this}delete(t){const i=Os(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Os(e,this._firestore),i=new ia(this._firestore);return super.get(e).then((a=>new eo(this._firestore,i,t._key,a._document,new Ms(!1,!1),t.converter)))}}function EL(n,e,t){n=ke(n,st);const i=Object.assign(Object.assign({},bL),t);return(function(l){if(l.maxAttempts<1)throw new ie(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(l,u,d){const f=new Xt;return l.asyncQueue.enqueueAndForget((async()=>{const p=await ux(l);new l4(l.asyncQueue,p,d,u,f).au()})),f.promise})(_t(n),(a=>e(new Ux(n,a))),i)}function wL(){return new Jc("deleteField")}function Ey(){return new O_("serverTimestamp")}function jx(...n){return new P_("arrayUnion",n)}function zx(...n){return new M_("arrayRemove",n)}function TL(n){return new L_("increment",n)}function AL(n){return new Xc(n)}function SL(n){return _t(n=ke(n,st)),new Lx(n,(e=>Kl(n,e)))}function IL(n,e){const t=_t(n=ke(n,st));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return Hn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=(function(l){const u=typeof l=="string"?(function(p){try{return JSON.parse(p)}catch(_){throw new ie(X.INVALID_ARGUMENT,"Failed to parse JSON: "+_?.message)}})(l):l,d=[];if(Array.isArray(u.indexes))for(const f of u.indexes){const p=AT(f,"collectionGroup"),_=[];if(Array.isArray(f.fields))for(const b of f.fields){const A=rm("setIndexConfiguration",AT(b,"fieldPath"));b.arrayConfig==="CONTAINS"?_.push(new Ha(A,2)):b.order==="ASCENDING"?_.push(new Ha(A,0)):b.order==="DESCENDING"&&_.push(new Ha(A,1))}d.push(new pl(pl.UNKNOWN_ID,p,_,yl.empty()))}return d})(e);return _4(t,i)}function AT(n,e){if(typeof n[e]!="string")throw new ie(X.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}class Bx{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function xL(n){var e;n=ke(n,st);const t=ST.get(n);if(t)return t;if(((e=_t(n)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const i=new Bx(n);return ST.set(n,i),i}function RL(n){Fx(n,!0)}function CL(n){Fx(n,!1)}function NL(n){b4(_t(n._firestore)).then((e=>se("deleting all persistent cache indexes succeeded"))).catch((e=>Hn("deleting all persistent cache indexes failed",e)))}function Fx(n,e){v4(_t(n._firestore),e).then((t=>se(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>Hn(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const ST=new WeakMap;function DL(n){var e;const t=(e=_t(ke(n.firestore,st))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:Hf(t,yn(n._query))._t}function kL(n,e){var t;const i=NS(e,((l,u)=>new aI(u,l.aggregateType,l._internalFieldPath))),a=(t=_t(ke(n.firestore,st))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return a===void 0?null:vI(a,GS(n._query),i,!0).request}class VL{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return $_.instance.onExistenceFilterMismatch(e)}}class $_{constructor(){this.Uu=new Map}static get instance(){return Ud||(Ud=new $_,(function(t){if(mf)throw new Error("a TestingHooksSpi instance is already set");mf=t})(Ud)),Ud}et(e){this.Uu.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),i=this.Uu;return i.set(t,e),()=>i.delete(t)}}let Ud=null;(function(e,t=!0){(function(a){Pl=a})(Ol),qr(new br("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),d=new st(new mO(i.getProvider("auth-internal")),new yO(i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ie(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(p.options.projectId,_)})(u,a),u);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ar(mw,"4.7.3",e),ar(mw,"4.7.3","esm2017")})();const OL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:G_,AggregateField:Cl,AggregateQuerySnapshot:bx,Bytes:$s,CACHE_SIZE_UNLIMITED:T4,CollectionReference:_r,DocumentReference:St,DocumentSnapshot:eo,FieldPath:na,FieldValue:ra,Firestore:st,FirestoreError:ie,GeoPoint:em,LoadBundleTask:px,PersistentCacheIndexManager:Bx,Query:Jt,QueryCompositeFilterConstraint:lo,QueryConstraint:Gl,QueryDocumentSnapshot:yc,QueryEndAtConstraint:eh,QueryFieldFilterConstraint:Hl,QueryLimitConstraint:Wc,QueryOrderByConstraint:sm,QuerySnapshot:to,QueryStartAtConstraint:Zc,SnapshotMetadata:Ms,Timestamp:ot,Transaction:Ux,VectorValue:Xc,WriteBatch:Lx,_AutoId:Ky,_ByteString:bt,_DatabaseId:Bs,_DocumentKey:he,_EmptyAppCheckTokenProvider:_O,_EmptyAuthCredentialsProvider:yS,_FieldPath:ft,_TestingHooks:VL,_cast:ke,_debugAssert:dO,_internalAggregationQueryToProtoRunAggregationQueryRequest:kL,_internalQueryToProtoQueryTarget:DL,_isBase64Available:KO,_logWarn:Hn,_validateIsNotUsedTogether:fx,addDoc:Ox,aggregateFieldEqual:W4,aggregateQuerySnapshotEqual:Z4,and:B4,arrayRemove:zx,arrayUnion:jx,average:J4,clearIndexedDbPersistence:x4,collection:Tf,collectionGroup:E4,connectFirestoreEmulator:gx,count:kx,deleteAllPersistentCacheIndexes:NL,deleteDoc:K_,deleteField:wL,disableNetwork:N4,disablePersistentCacheIndexAutoCreation:CL,doc:gr,documentId:O4,enableIndexedDbPersistence:S4,enableMultiTabIndexedDbPersistence:I4,enableNetwork:C4,enablePersistentCacheIndexAutoCreation:RL,endAt:$4,endBefore:Q4,ensureFirestoreConfigured:_t,executeWrite:Kl,getAggregateFromServer:Px,getCountFromServer:lL,getDoc:cc,getDocFromCache:nL,getDocFromServer:rL,getDocs:H_,getDocsFromCache:iL,getDocsFromServer:sL,getFirestore:yx,getPersistentCacheIndexManager:xL,increment:TL,initializeFirestore:A4,limit:q4,limitToLast:G4,loadBundle:k4,memoryEagerGarbageCollector:fL,memoryLocalCache:gL,memoryLruGarbageCollector:mL,namedQuery:V4,onSnapshot:aL,onSnapshotsInSync:oL,or:z4,orderBy:F4,persistentLocalCache:pL,persistentMultipleTabManager:vL,persistentSingleTabManager:Mx,query:F_,queryEqual:V_,refEqual:w4,runTransaction:EL,serverTimestamp:Ey,setDoc:Vx,setIndexConfiguration:IL,setLogLevel:hO,snapshotEqual:tL,startAfter:K4,startAt:H4,sum:X4,terminate:D4,updateDoc:_c,vector:AL,waitForPendingWrites:R4,where:q_,writeBatch:SL},Symbol.toStringTag,{value:"Module"})),qx="@firebase/installations",Y_="0.6.9";const Gx=1e4,Hx=`w:${Y_}`,Kx="FIS_v2",PL="https://firebaseinstallations.googleapis.com/v1",ML=3600*1e3,LL="installations",UL="Installations";const jL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},no=new io(LL,UL,jL);function Qx(n){return n instanceof Tr&&n.code.includes("request-failed")}function $x({projectId:n}){return`${PL}/projects/${n}/installations`}function Yx(n){return{token:n.token,requestStatus:2,expiresIn:BL(n.expiresIn),creationTime:Date.now()}}async function Xx(n,e){const i=(await e.json()).error;return no.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Jx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function zL(n,{refreshToken:e}){const t=Jx(n);return t.append("Authorization",FL(e)),t}async function Wx(n){const e=await n();return e.status>=500&&e.status<600?n():e}function BL(n){return Number(n.replace("s","000"))}function FL(n){return`${Kx} ${n}`}async function qL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=$x(n),a=Jx(n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:Kx,appId:n.appId,sdkVersion:Hx},d={method:"POST",headers:a,body:JSON.stringify(u)},f=await Wx(()=>fetch(i,d));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:Yx(p.authToken)}}else throw await Xx("Create Installation",f)}function Zx(n){return new Promise(e=>{setTimeout(e,n)})}function GL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const HL=/^[cdef][\w-]{21}$/,wy="";function KL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=QL(n);return HL.test(t)?t:wy}catch{return wy}}function QL(n){return GL(n).substr(0,22)}function om(n){return`${n.appName}!${n.appId}`}const eR=new Map;function tR(n,e){const t=om(n);nR(t,e),$L(t,e)}function nR(n,e){const t=eR.get(n);if(t)for(const i of t)i(e)}function $L(n,e){const t=YL();t&&t.postMessage({key:n,fid:e}),XL()}let qa=null;function YL(){return!qa&&"BroadcastChannel"in self&&(qa=new BroadcastChannel("[Firebase] FID Change"),qa.onmessage=n=>{nR(n.data.key,n.data.fid)}),qa}function XL(){eR.size===0&&qa&&(qa.close(),qa=null)}const JL="firebase-installations-database",WL=1,ro="firebase-installations-store";let Lp=null;function X_(){return Lp||(Lp=hA(JL,WL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ro)}}})),Lp}async function Sf(n,e){const t=om(n),a=(await X_()).transaction(ro,"readwrite"),l=a.objectStore(ro),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&tR(n,e.fid),e}async function rR(n){const e=om(n),i=(await X_()).transaction(ro,"readwrite");await i.objectStore(ro).delete(e),await i.done}async function lm(n,e){const t=om(n),a=(await X_()).transaction(ro,"readwrite"),l=a.objectStore(ro),u=await l.get(t),d=e(u);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!u||u.fid!==d.fid)&&tR(n,d.fid),d}async function J_(n){let e;const t=await lm(n.appConfig,i=>{const a=ZL(i),l=eU(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===wy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function ZL(n){const e=n||{fid:KL(),registrationStatus:0};return iR(e)}function eU(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(no.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=tU(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nU(n)}:{installationEntry:e}}async function tU(n,e){try{const t=await qL(n,e);return Sf(n.appConfig,t)}catch(t){throw Qx(t)&&t.customData.serverCode===409?await rR(n.appConfig):await Sf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function nU(n){let e=await IT(n.appConfig);for(;e.registrationStatus===1;)await Zx(100),e=await IT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await J_(n);return i||t}return e}function IT(n){return lm(n,e=>{if(!e)throw no.create("installation-not-found");return iR(e)})}function iR(n){return rU(n)?{fid:n.fid,registrationStatus:0}:n}function rU(n){return n.registrationStatus===1&&n.registrationTime+Gx<Date.now()}async function iU({appConfig:n,heartbeatServiceProvider:e},t){const i=sU(n,t),a=zL(n,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:Hx,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(u)},f=await Wx(()=>fetch(i,d));if(f.ok){const p=await f.json();return Yx(p)}else throw await Xx("Generate Auth Token",f)}function sU(n,{fid:e}){return`${$x(n)}/${e}/authTokens:generate`}async function W_(n,e=!1){let t;const i=await lm(n.appConfig,l=>{if(!sR(l))throw no.create("not-registered");const u=l.authToken;if(!e&&lU(u))return l;if(u.requestStatus===1)return t=aU(n,e),l;{if(!navigator.onLine)throw no.create("app-offline");const d=cU(l);return t=oU(n,d),d}});return t?await t:i.authToken}async function aU(n,e){let t=await xT(n.appConfig);for(;t.authToken.requestStatus===1;)await Zx(100),t=await xT(n.appConfig);const i=t.authToken;return i.requestStatus===0?W_(n,e):i}function xT(n){return lm(n,e=>{if(!sR(e))throw no.create("not-registered");const t=e.authToken;return hU(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oU(n,e){try{const t=await iU(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Sf(n.appConfig,i),t}catch(t){if(Qx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await rR(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sf(n.appConfig,i)}throw t}}function sR(n){return n!==void 0&&n.registrationStatus===2}function lU(n){return n.requestStatus===2&&!uU(n)}function uU(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ML}function cU(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function hU(n){return n.requestStatus===1&&n.requestTime+Gx<Date.now()}async function dU(n){const e=n,{installationEntry:t,registrationPromise:i}=await J_(e);return i?i.catch(console.error):W_(e).catch(console.error),t.fid}async function fU(n,e=!1){const t=n;return await mU(t),(await W_(t,e)).token}async function mU(n){const{registrationPromise:e}=await J_(n);e&&await e}function gU(n){if(!n||!n.options)throw Up("App Configuration");if(!n.name)throw Up("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Up(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Up(n){return no.create("missing-app-config-values",{valueName:n})}const aR="installations",pU="installations-internal",yU=n=>{const e=n.getProvider("app").getImmediate(),t=gU(e),i=Oi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},_U=n=>{const e=n.getProvider("app").getImmediate(),t=Oi(e,aR).getImmediate();return{getId:()=>dU(t),getToken:a=>fU(t,a)}};function vU(){qr(new br(aR,yU,"PUBLIC")),qr(new br(pU,_U,"PRIVATE"))}vU();ar(qx,Y_);ar(qx,Y_,"esm2017");const If="analytics",bU="firebase_id",EU="origin",wU=60*1e3,TU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Z_="https://www.googletagmanager.com/gtag/js";const An=new Vf("@firebase/analytics");const AU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new io("analytics","Analytics",AU);function SU(n){if(!n.startsWith(Z_)){const e=Gn.create("invalid-gtag-resource",{gtagURL:n});return An.warn(e.message),""}return n}function oR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function IU(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function xU(n,e){const t=IU("firebase-js-sdk-policy",{createScriptURL:SU}),i=document.createElement("script"),a=`${Z_}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function RU(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function CU(n,e,t,i,a,l){const u=i[a];try{if(u)await e[u];else{const f=(await oR(t)).find(p=>p.measurementId===a);f&&await e[f.appId]}}catch(d){An.error(d)}n("config",a,l)}async function NU(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const d=await oR(t);for(const f of u){const p=d.find(b=>b.measurementId===f),_=p&&e[p.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){An.error(l)}}function DU(n,e,t,i){async function a(l,...u){try{if(l==="event"){const[d,f]=u;await NU(n,e,t,d,f)}else if(l==="config"){const[d,f]=u;await CU(n,e,t,i,d,f)}else if(l==="consent"){const[d,f]=u;n("consent",d,f)}else if(l==="get"){const[d,f,p]=u;n("get",d,f,p)}else if(l==="set"){const[d]=u;n("set",d)}else n(l,...u)}catch(d){An.error(d)}}return a}function kU(n,e,t,i,a){let l=function(...u){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=DU(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function VU(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Z_)&&t.src.includes(n))return t;return null}const OU=30,PU=1e3;class MU{constructor(e={},t=PU){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lR=new MU;function LU(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function UU(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:LU(i)},l=TU.replace("{app-id}",t),u=await fetch(l,a);if(u.status!==200&&u.status!==304){let d="";try{const f=await u.json();!((e=f.error)===null||e===void 0)&&e.message&&(d=f.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:u.status,responseMessage:d})}return u.json()}async function jU(n,e=lR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw Gn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw Gn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new FU;return setTimeout(async()=>{d.abort()},wU),uR({appId:i,apiKey:a,measurementId:l},u,d,e)}async function uR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=lR){var l;const{appId:u,measurementId:d}=n;try{await zU(i,e)}catch(f){if(d)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{const f=await UU(n);return a.deleteThrottleMetadata(u),f}catch(f){const p=f;if(!BU(p)){if(a.deleteThrottleMetadata(u),d)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:u,measurementId:d};throw f}const _=Number((l=p?.customData)===null||l===void 0?void 0:l.httpStatus)===503?zE(t,a.intervalMillis,OU):zE(t,a.intervalMillis),b={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(u,b),An.debug(`Calling attemptFetch again in ${_} millis`),uR(n,b,i,a)}}function zU(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function BU(n){if(!(n instanceof Tr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class FU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qU(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,u=Object.assign(Object.assign({},i),{send_to:l});n("event",t,u)}}async function GU(n,e,t,i){{const a=await e;n("config",a,{update:!0,user_properties:t})}}async function HU(){if(ky())try{await lA()}catch(n){return An.warn(Gn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return An.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KU(n,e,t,i,a,l,u){var d;const f=jU(n);f.then(x=>{t[x.measurementId]=x.appId,n.options.measurementId&&x.measurementId!==n.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>An.error(x)),e.push(f);const p=HU().then(x=>{if(x)return i.getId()}),[_,b]=await Promise.all([f,p]);VU(l)||xU(l,_.measurementId),a("js",new Date);const A=(d=u?.config)!==null&&d!==void 0?d:{};return A[EU]="firebase",A.update=!0,b!=null&&(A[bU]=b),a("config",_.measurementId,A),_.measurementId}class QU{constructor(e){this.app=e}_delete(){return delete dl[this.app.options.appId],Promise.resolve()}}let dl={},RT=[];const CT={};let jp="dataLayer",$U="gtag",NT,ev,DT=!1;function YU(){const n=[];if(aA()&&n.push("This is a browser extension environment."),HN()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=Gn.create("invalid-analytics-context",{errorInfo:e});An.warn(t.message)}}function XU(n,e,t){YU();const i=n.options.appId;if(!i)throw Gn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(dl[i]!=null)throw Gn.create("already-exists",{id:i});if(!DT){RU(jp);const{wrappedGtag:l,gtagCore:u}=kU(dl,RT,CT,jp,$U);ev=l,NT=u,DT=!0}return dl[i]=KU(n,RT,CT,e,NT,jp,t),new QU(n)}function JU(n=Oy()){n=Qe(n);const e=Oi(n,If);return e.isInitialized()?e.getImmediate():WU(n)}function WU(n,e={}){const t=Oi(n,If);if(t.isInitialized()){const a=t.getImmediate();if(Ci(e,t.getOptions()))return a;throw Gn.create("already-initialized")}return t.initialize({options:e})}function ZU(n,e,t){n=Qe(n),GU(ev,dl[n.app.options.appId],e).catch(i=>An.error(i))}function cR(n,e,t,i){n=Qe(n),qU(ev,dl[n.app.options.appId],e,t,i).catch(a=>An.error(a))}const kT="@firebase/analytics",VT="0.10.8";function ej(){qr(new br(If,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return XU(i,a,t)},"PUBLIC")),qr(new br("analytics-internal",n,"PRIVATE")),ar(kT,VT),ar(kT,VT,"esm2017");function n(e){try{const t=e.getProvider(If).getImmediate();return{logEvent:(i,a,l)=>cR(t,i,a,l)}}catch(t){throw Gn.create("interop-component-reg-failed",{reason:t})}}}ej();const tj={BASE_URL:"/",DEV:!1,MODE:"web",PROD:!0,SSR:!1,VITE_EXTENSION_KEY:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2P3QDxUdksASJSgFQDK4JUlgPaS5fkRAOdrtpHYUGu75/v0JeKj9YTFGl9ipKOjvmwIDAQAB",VITE_FIREBASE_API_KEY:"AIzaSyAn2WmzmM49urbEsDL-CMtfM6REgPHId6k",VITE_FIREBASE_APP_ID:"1:762786438321:web:42ff64441bc56494cf9690",VITE_FIREBASE_AUTH_DOMAIN:"mobile-quicknote.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-FHTHKF1QVZ",VITE_FIREBASE_MESSAGING_SENDER_ID:"762786438321",VITE_FIREBASE_PROJECT_ID:"mobile-quicknote",VITE_FIREBASE_STORAGE_BUCKET:"mobile-quicknote.firebasestorage.app",VITE_GOOGLE_CLIENT_ID:"762786438321-ultoc1c90q6qojshdf4201manseir4m2.apps.googleusercontent.com",VITE_WEB_APP_URL:"http://localhost:5174"},nj={firebase:{apiKey:"AIzaSyAn2WmzmM49urbEsDL-CMtfM6REgPHId6k",authDomain:"mobile-quicknote.firebaseapp.com",projectId:"mobile-quicknote",storageBucket:"mobile-quicknote.firebasestorage.app",messagingSenderId:"762786438321",appId:"1:762786438321:web:42ff64441bc56494cf9690",measurementId:"G-FHTHKF1QVZ"}},rj=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID","VITE_FIREBASE_MEASUREMENT_ID","VITE_GOOGLE_CLIENT_ID","VITE_EXTENSION_KEY"],OT=rj.filter(n=>!tj[n]);OT.length>0&&(console.error("Missing required environment variables:",OT),console.error("Please check your .env file and ensure all variables are set."));const Ty=nj.firebase,tv=dA(Ty),$t=uS(tv);if(typeof chrome<"u"&&chrome.runtime){console.log(" Configuring Firebase Auth for Chrome Extension environment"),console.log(" Auth Domain:",Ty.authDomain),console.log(" Project ID:",Ty.projectId);try{console.log(" Firebase Auth configured for Chrome Extension")}catch(n){console.error(" Error configuring Firebase Auth for extension:",n)}}const um=new Lr;um.addScope("email");um.addScope("profile");um.setCustomParameters({hd:"*"});const gn=yx(tv);let Dc=null;if(typeof window<"u"&&typeof chrome>"u")try{Dc=JU(tv),console.log("Firebase Analytics initialized")}catch(n){console.warn("Analytics not available in this environment:",n)}else console.log("Analytics disabled in Chrome extension environment");const xf=typeof chrome<"u"&&chrome.runtime,_i=(n,e)=>{if(!Dc){xf&&console.log(`[Analytics] ${n}${e?` - ${JSON.stringify(e)}`:""}`);return}try{cR(Dc,n,e)}catch(t){console.warn(`Analytics ${n} tracking failed:`,t),xf&&console.log(`[Analytics Fallback] ${n}${e?` - ${JSON.stringify(e)}`:""}`)}},nc={trackLogin:(n="google")=>{_i("login",{method:n})},trackSignUp:(n="email")=>{_i("sign_up",{method:n})},trackNoteCreated:()=>{_i("note_created")},trackNoteUpdated:()=>{_i("note_updated")},trackNoteDeleted:()=>{_i("note_deleted")},trackSearch:n=>{_i("search",{search_term:n.length>0?"has_query":"empty_query"})},trackColorChange:n=>{_i("note_color_changed",{color:n})},trackNotePinned:n=>{_i("note_pinned",{action:n?"pinned":"unpinned"})},setUserProperties:n=>{if(!Dc){xf&&console.log(`[Analytics] User properties set: ${JSON.stringify(n)}`);return}try{ZU(Dc,n)}catch(e){console.warn("Analytics user properties failed:",e),xf&&console.log(`[Analytics Fallback] User properties set: ${JSON.stringify(n)}`)}},trackCustomEvent:(n,e)=>{_i(n,e)}},hR=B.createContext(void 0),zi=()=>{const n=B.useContext(hR);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},ij=({children:n})=>{const[e,t]=B.useState(null),[i,a]=B.useState(!0);B.useEffect(()=>{console.log(" Setting up Firebase auth listener");const x=$A($t,O=>{if(O){console.log(" Firebase user authenticated:",O.email);const L={id:O.uid,email:O.email||"",displayName:O.displayName||"Anonymous User",photoURL:O.photoURL||void 0,isGuest:!1};t(L)}else{console.log(" No Firebase user found, checking for guest user");const L=l();t(L||null)}a(!1)});return()=>x()},[]);const l=()=>{try{const x=localStorage.getItem("guestUser");if(x)return JSON.parse(x)}catch(x){console.error("Error getting guest user:",x)}return null},u=()=>{const O={id:`guest_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,email:"guest@local.com",displayName:"Guest User",isGuest:!0};return localStorage.setItem("guestUser",JSON.stringify(O)),O},A={user:e,signInWithGoogle:async()=>{try{a(!0),typeof chrome<"u"&&chrome.identity&&!window.location.protocol.startsWith("http")?(console.log("Using Chrome Identity API for authentication"),await new Promise((x,O)=>{chrome.identity.getAuthToken({interactive:!0},async L=>{if(chrome.runtime.lastError||!L){console.error("Chrome Identity API error:",chrome.runtime.lastError),O(new Error(chrome.runtime.lastError?.message||"Authentication failed"));return}try{console.log("Got auth token, signing in with Firebase...");const{GoogleAuthProvider:N,signInWithCredential:K}=await ZT(async()=>{const{GoogleAuthProvider:j,signInWithCredential:oe}=await Promise.resolve().then(()=>lO);return{GoogleAuthProvider:j,signInWithCredential:oe}},[]),H=N.credential(null,L);await K($t,H),console.log("Firebase authentication successful"),nc.trackLogin("google_chrome_identity"),x()}catch(N){console.error("Firebase authentication error:",N),O(N)}})})):(console.log("Falling back to Firebase popup authentication"),await aS($t,um),nc.trackLogin("google_popup"))}catch(x){throw console.error("Error signing in with Google:",x),x}finally{a(!1)}},signInWithEmail:async(x,O)=>{try{a(!0),console.log(" Signing in with email in Chrome Extension:",x),typeof chrome<"u"&&chrome.runtime&&(console.log(" Chrome Extension environment detected"),await Wp($t,uf),console.log(" Auth persistence set to LOCAL"));const L=await GA($t,x,O);console.log(" Email authentication successful:",L.user.email),nc.trackLogin("email")}catch(L){throw console.error(" Error signing in with email:",L),L}finally{a(!1)}},signUpWithEmail:async(x,O,L)=>{try{a(!0),console.log(" Creating account with email in Chrome Extension:",x),typeof chrome<"u"&&chrome.runtime&&(console.log(" Chrome Extension environment detected for signup"),await Wp($t,uf),console.log(" Auth persistence set to LOCAL for signup"));const N=await qA($t,x,O);console.log(" User account created successfully:",N.user.email),await HA(N.user,{displayName:L}),console.log(" Profile updated with display name:",L),nc.trackSignUp("email")}catch(N){throw console.error(" Error creating account:",N),N}finally{a(!1)}},signInAsGuest:async()=>{try{a(!0),console.log(" Creating guest user session");const x=u();t(x),console.log(" Guest user created:",x.displayName),nc.trackSignUp("guest")}catch(x){throw console.error(" Error creating guest session:",x),x}finally{a(!1)}},signOut:async()=>{try{a(!0),localStorage.removeItem("guestUser"),await YA($t),t(null),console.log(" Successfully signed out")}catch(x){console.warn("Sign out cleanup error:",x),t(null)}finally{a(!1)}},isLoading:i};return w.jsx(hR.Provider,{value:A,children:n})},dR=B.createContext(void 0),nv=()=>{const n=B.useContext(dR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},sj=({children:n})=>{const[e,t]=B.useState(!1);B.useEffect(()=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local.get(["isDarkMode"],u=>{if(u.isDarkMode!==void 0)t(u.isDarkMode),i(u.isDarkMode);else{const d=window.matchMedia("(prefers-color-scheme: dark)").matches;t(d),i(d)}})},[]);const i=u=>{u?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},l={isDarkMode:e,toggleTheme:()=>{const u=!e;t(u),i(u),typeof chrome<"u"&&chrome.storage&&chrome.storage.local.set({isDarkMode:u}),typeof chrome<"u"&&chrome.runtime&&chrome.runtime.sendMessage({type:"THEME_CHANGE",payload:{isDarkMode:u}})}};return w.jsx(dR.Provider,{value:l,children:n})},jd="notes",aj=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),rc={async migrateGuestNotes(n,e){console.log(" Starting guest notes migration:",{fromGuestId:n,toUserId:e});try{const t=this.getLocalNotes(n);if(console.log(` Found ${t.length} guest notes to migrate`),t.length===0){console.log(" No guest notes to migrate");return}for(const i of t)try{const a={title:i.title,description:i.description,color:i.color,isPinned:i.isPinned,userId:e};console.log(" Migrating note:",i.title),await this.createNote(a)}catch(a){console.error(" Failed to migrate note:",i.title,a)}localStorage.removeItem(`notes_${n}`),console.log(" Guest notes migration completed and cleared")}catch(t){throw console.error(" Error during guest notes migration:",t),t}},async getAllNotes(n){try{if(gn){const e=F_(Tf(gn,jd),q_("userId","==",n));return(await H_(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate()||new Date,updatedAt:a.data().updatedAt?.toDate()||new Date})).sort((a,l)=>{const u=a.updatedAt.getTime();return l.updatedAt.getTime()-u})}return this.getLocalNotes(n)}catch(e){return console.error("Error getting notes from Firebase, falling back to local storage:",e),this.getLocalNotes(n)}},async createNote(n){const e=new Date,t={...n,isPinned:n.isPinned||!1,createdAt:e,updatedAt:e};try{return gn?{id:(await Ox(Tf(gn,jd),{...t,createdAt:ot.fromDate(e),updatedAt:ot.fromDate(e)})).id,...t}:this.createLocalNote(t)}catch(i){return console.error("Error creating note in Firebase, falling back to local storage:",i),this.createLocalNote(t)}},async updateNote(n,e){try{if(gn){const t=gr(gn,jd,n);await _c(t,{...e,updatedAt:ot.fromDate(new Date)});let i=this.getLocalNote(n);if(!i)try{const a=await ZT(()=>Promise.resolve().then(()=>OL),void 0).then(l=>l.getDoc(t));if(a.exists()){const l=a.data();i={id:a.id,...l,createdAt:l.createdAt?.toDate()||new Date,updatedAt:l.updatedAt?.toDate()||new Date}}}catch(a){console.warn("Could not fetch updated note from Firebase:",a)}if(i){const a={...i,...e,updatedAt:new Date};try{this.updateLocalNote(n,e)}catch(l){console.warn("Could not update local storage:",l)}return a}else throw new Error("Could not retrieve updated note data")}return this.updateLocalNote(n,e)}catch(t){return console.error("Error updating note in Firebase, falling back to local storage:",t),this.updateLocalNote(n,e)}},async deleteNote(n){try{gn&&await K_(gr(gn,jd,n)),this.deleteLocalNote(n)}catch(e){console.error("Error deleting note from Firebase, falling back to local storage:",e),this.deleteLocalNote(n)}},getLocalNotes(n){try{const e=localStorage.getItem(`notes_${n}`);return e?JSON.parse(e).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch{return[]}},createLocalNote(n){const t={id:aj(),...n},i=this.getLocalNotes(n.userId),a=[t,...i];return localStorage.setItem(`notes_${n.userId}`,JSON.stringify(a)),t},updateLocalNote(n,e){console.log(" Updating local note:",{id:n,updates:e});const t=this.getLocalNote(n);if(!t)throw console.error(" Note not found in local storage:",n),new Error(`Note with id ${n} not found in local storage`);const i={...t,...e,updatedAt:new Date};console.log(" Updated note data:",i);const l=this.getLocalNotes(t.userId).map(u=>u.id===n?i:u);return localStorage.setItem(`notes_${t.userId}`,JSON.stringify(l)),i},deleteLocalNote(n){const e=this.getLocalNote(n);if(!e)return;const i=this.getLocalNotes(e.userId).filter(a=>a.id!==n);localStorage.setItem(`notes_${e.userId}`,JSON.stringify(i))},getLocalNote(n){try{const e=Object.keys(localStorage).filter(t=>t.startsWith("notes_"));for(const t of e){const a=JSON.parse(localStorage.getItem(t)||"[]").find(l=>l.id===n);if(a)return{...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}}return null}catch{return null}}},fR=B.createContext(void 0),th=()=>{const n=B.useContext(fR);if(n===void 0)throw new Error("useNotes must be used within a NotesProvider");return n},oj=({children:n})=>{const[e,t]=B.useState([]),[i,a]=B.useState(""),[l,u]=B.useState("all"),[d,f]=B.useState(!1),[p,_]=B.useState(null),{user:b}=zi();B.useEffect(()=>{b?A(b):t([])},[b]);const A=async H=>{if(H){if(!H.isGuest&&H.id!==b?.id){const j=localStorage.getItem("guestUser");if(j)try{const oe=JSON.parse(j);console.log(" Detected user login, checking for guest notes to migrate"),await rc.migrateGuestNotes(oe.id,H.id),localStorage.removeItem("guestUser"),console.log(" Guest notes migrated and guest session cleared")}catch(oe){console.error(" Failed to migrate guest notes:",oe)}}await x()}},x=async()=>{if(b)try{f(!0),_(null);const H=await rc.getAllNotes(b.id);t(H)}catch(H){_("Failed to load notes"),console.error("Error loading notes:",H)}finally{f(!1)}},K={notes:e,createNote:async H=>{if(!b)throw new Error("User not authenticated");try{_(null);const j=await rc.createNote({...H,userId:b.id});t(oe=>[j,...oe])}catch(j){throw _("Failed to create note"),console.error("Error creating note:",j),j}},updateNote:async(H,j)=>{try{_(null);const oe=e.find(C=>C.id===H);if(!oe)throw new Error("Note not found in current notes list");const ye={...oe,...j,updatedAt:new Date};t(C=>C.map(I=>I.id===H?ye:I));const de=await rc.updateNote(H,j);t(C=>C.map(I=>I.id===H?de:I))}catch(oe){throw _("Failed to update note"),console.error("Error updating note:",oe),b&&await x(),oe}},deleteNote:async H=>{try{_(null),await rc.deleteNote(H),t(j=>j.filter(oe=>oe.id!==H))}catch(j){throw _("Failed to delete note"),console.error("Error deleting note:",j),j}},searchQuery:i,setSearchQuery:a,filterColor:l,setFilterColor:u,isLoading:d,error:p};return w.jsx(fR.Provider,{value:K,children:n})};var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ye=(n,e)=>{const t=B.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:f,...p},_)=>B.createElement("svg",{ref:_,...lj,width:a,height:a,stroke:i,strokeWidth:u?Number(l)*24/Number(a):l,className:["lucide",`lucide-${uj(n)}`,d].join(" "),...p},[...e.map(([b,A])=>B.createElement(b,A)),...Array.isArray(f)?f:[f]]));return t.displayName=`${n}`,t};const cj=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const hj=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const dj=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const fj=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const mj=Ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const gj=Ye("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);const pj=Ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const cm=Ye("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);const yj=Ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const _j=Ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const vj=Ye("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const rv=Ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const mR=Ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const hm=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const bj=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const gR=Ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Ej=Ye("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const wj=Ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const pR=Ye("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);const Tj=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const yR=Ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Aj=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const _R=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const kc=Ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Sj=Ye("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);const vR=Ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Ij=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const xj=Ye("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Rj=Ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Nl=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const dm=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zp=n=>{if(!n?.code)return n?.message||"An unexpected error occurred";switch(n.code){case"auth/user-not-found":return"No account found with this email address";case"auth/wrong-password":return"Incorrect password. Please try again";case"auth/invalid-email":return"Please enter a valid email address";case"auth/user-disabled":return"This account has been disabled";case"auth/too-many-requests":return"Too many failed attempts. Please try again later";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password is too weak. Please use at least 6 characters";case"auth/operation-not-allowed":return"Email/password accounts are not enabled";case"auth/network-request-failed":return"Network error. Please check your connection";case"auth/invalid-credential":return"Invalid email or password";case"auth/credential-already-in-use":return"This credential is already associated with another account";case"auth/popup-closed-by-user":return"Sign in was cancelled";case"auth/popup-blocked":return"Pop-up was blocked. Please allow pop-ups and try again";case"auth/cancelled-popup-request":return"Sign in was cancelled";case"auth/unauthorized-domain":return"Authentication not configured for this domain";default:return console.warn("Unhandled Firebase error code:",n.code),n.message||"Authentication failed. Please try again"}},Cj=async()=>{console.log(" Testing Firebase connection in Chrome Extension...");try{console.log(" Firebase Auth instance:",!!$t),console.log(" Auth config:",{apiKey:$t.config?.apiKey?.substring(0,10)+"...",authDomain:$t.config?.authDomain});const n=typeof chrome<"u"&&chrome.runtime;console.log(" Chrome Extension context:",n),console.log(n?" Chrome extension detected - using special auth flow":" Web context detected - using standard auth flow");try{const e=await fetch(`https://${$t.config?.authDomain}/.well-known/openid_configuration`);console.log(" Firebase auth domain connectivity:",e.ok?" Connected":" Failed")}catch(e){console.error(" Network connectivity test failed:",e)}return console.log(" Current auth state:",{currentUser:!!$t.currentUser,email:$t.currentUser?.email||"Not signed in"}),{firebaseInitialized:!!$t,isExtension:n,authDomain:$t.config?.authDomain,currentUser:!!$t.currentUser}}catch(n){return console.error(" Firebase connection test failed:",n),{error:n instanceof Error?n.message:"Unknown error",firebaseInitialized:!1,isExtension:!1}}},Nj=()=>{console.log(" Testing Email/Password authentication setup...");const n=!0;console.log(" Email/Password provider:"," Enabled");const e=$t.config?.authDomain;console.log(" Auth domain configuration:",e);const t=typeof chrome<"u"&&chrome.runtime?"extension":"web";return console.log(" Environment:",t),{emailEnabled:n,authDomain:e,environment:t}},Dj=()=>{const{signInWithGoogle:n,signInWithEmail:e,signUpWithEmail:t,signInAsGuest:i,isLoading:a}=zi(),[l,u]=B.useState(""),[d,f]=B.useState({}),[p,_]=B.useState("signin"),[b,A]=B.useState(!1),[x,O]=B.useState({email:"",password:"",displayName:""});B.useEffect(()=>{(async()=>{console.log(" Running Firebase diagnostics for Chrome Extension..."),await Cj(),Nj()})()},[]);const L=I=>I.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I)?null:"Please enter a valid email address":"Email is required",N=I=>I?I.length<6?"Password must be at least 6 characters":null:"Password is required",K=I=>I.trim()?I.trim().length<2?"Name must be at least 2 characters":null:"Name is required",H=()=>{const I={},R=L(x.email),V=N(x.password);return R&&(I.email=R),V&&(I.password=V),console.log(" Validation errors found:",I),f(I),Object.keys(I).length===0},j=()=>{const I={},R=L(x.email),V=N(x.password),U=K(x.displayName);return R&&(I.email=R),V&&(I.password=V),U&&(I.displayName=U),console.log(" SignUp validation errors found:",I),f(I),Object.keys(I).length===0},oe=async()=>{if(u(""),console.log(" Starting email sign-in process..."),!H()){console.log(" Validation failed: Form has errors");return}f({});try{console.log(" Signing in with email:",x.email),await e(x.email,x.password),console.log(" Email authentication successful")}catch(R){console.error(" Email login failed:",R),console.log(" Error details:",{code:R?.code,message:R?.message});const V=zp(R);console.log(" Error message shown to user:",V),R?.code==="auth/user-not-found"||R?.code==="auth/wrong-password"||R?.code==="auth/invalid-credential"||V.includes("No account found")||V.includes("Incorrect password")||V.includes("Invalid email or password")?u(" Login data is incorrect. Please check your email and password."):R?.code==="auth/invalid-email"?u(" Please enter a valid email address."):R?.code==="auth/too-many-requests"?u(" Too many failed attempts. Please try again later."):R?.code==="auth/network-request-failed"?u(" Network error. Please check your internet connection."):u(` ${V}`)}},ye=async()=>{if(u(""),console.log(" Starting email sign-up process..."),!j()){console.log(" Validation failed: Form has errors");return}f({});try{console.log(" Creating account for:",x.email),await t(x.email,x.password,x.displayName),console.log(" Email signup successful")}catch(R){console.error(" Email signup failed:",R),console.log(" Signup error details:",{code:R?.code,message:R?.message});const V=zp(R);console.log(" Error message shown to user:",V),R?.code==="auth/email-already-in-use"?u(" An account with this email already exists. Please sign in instead."):R?.code==="auth/weak-password"?u(" Password is too weak. Please use at least 6 characters with numbers and letters."):R?.code==="auth/invalid-email"?u(" Please enter a valid email address."):R?.code==="auth/operation-not-allowed"?u(" Email signup is not enabled. Please contact support."):R?.code==="auth/network-request-failed"?u(" Network error. Please check your internet connection."):u(` ${V}`)}},de=(I,R)=>{O(V=>({...V,[I]:R})),u(""),f(V=>({...V,[I]:void 0}))},C=I=>{_(I),u(""),f({}),O({email:"",password:"",displayName:""})};return w.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:w.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[w.jsxs("div",{className:"bg-blue-600 dark:bg-blue-700 p-6 text-center rounded-t-lg",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-white/20 rounded-lg mb-3",children:w.jsx(Sj,{className:"w-6 h-6 text-white"})}),w.jsx("h1",{className:"text-xl font-bold text-white mb-1",children:"Google Notes"}),w.jsx("p",{className:"text-blue-100 text-sm",children:"Your thoughts, organized beautifully"})]}),w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsx("button",{onClick:async()=>{try{u(""),f({}),await n()}catch(I){console.error(" Google login failed:",I);const R=zp(I);I?.code==="auth/popup-closed-by-user"?u(" Sign-in was cancelled. Please try again."):I?.code==="auth/popup-blocked"?u(" Popup blocked. Please allow popups and try again."):I?.code==="auth/network-request-failed"?u(" Network error. Please check your internet connection."):u(` Google sign-in failed: ${R}`)}},disabled:a,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 dark:border-white mr-2"}),"Signing in..."]}):w.jsxs(w.Fragment,{children:[w.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),w.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),w.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),w.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"or continue with email"})})]}),w.jsx("div",{className:"border-b border-gray-200 dark:border-gray-600",children:w.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[w.jsx("button",{type:"button",onClick:()=>C("signin"),className:`py-2 px-1 border-b-2 font-medium text-sm ${p==="signin"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Sign In"}),w.jsx("button",{type:"button",onClick:()=>C("signup"),className:`py-2 px-1 border-b-2 font-medium text-sm ${p==="signup"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Sign Up"})]})}),w.jsxs("form",{onSubmit:I=>{I.preventDefault(),p==="signin"?oe():ye()},className:"mt-6 space-y-4",children:[p==="signup"&&w.jsxs("div",{children:[w.jsx("label",{htmlFor:"displayName",className:"block text-left text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),w.jsx("input",{type:"text",id:"displayName",value:x.displayName,onChange:I=>de("displayName",I.target.value),className:`w-full px-3 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:border-transparent ${d.displayName?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,placeholder:"Enter your full name",disabled:a}),d.displayName&&w.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mt-1",children:d.displayName})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"block text-left text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),w.jsx("input",{type:"email",id:"email",value:x.email,onChange:I=>de("email",I.target.value),className:`w-full px-3 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:border-transparent ${d.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,placeholder:"Enter your email address",disabled:a}),d.email&&w.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mt-1 font-medium",children:d.email})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-left text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Password"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:b?"text":"password",id:"password",value:x.password,onChange:I=>de("password",I.target.value),className:`w-full pl-3 pr-10 py-2 border rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:border-transparent ${d.password?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500"}`,placeholder:p==="signup"?"Create a password (6+ characters)":"Enter your password",disabled:a}),w.jsx("button",{type:"button",onClick:()=>A(!b),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:a,children:b?w.jsx(yj,{className:"h-4 w-4 text-gray-400"}):w.jsx(_j,{className:"h-4 w-4 text-gray-400"})})]}),d.password&&w.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs mt-1 font-medium",children:d.password})]}),w.jsx("button",{type:"submit",disabled:a,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 text-white rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),p==="signin"?"Signing in...":"Creating account..."]}):p==="signin"?"Sign in":"Create Account"})]}),l&&w.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 mt-4",children:w.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm text-center",children:l})}),w.jsxs("div",{className:"mt-6 text-center",children:[w.jsxs("div",{className:"relative mb-4",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),w.jsx("div",{className:"relative flex justify-center text-sm",children:w.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"or try without signing up"})})]}),w.jsx("button",{onClick:async()=>{try{u(""),await i()}catch(I){console.error(" Guest login failed:",I),u(" Failed to start guest session. Please try again.")}},disabled:a,className:"w-full flex items-center justify-center px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-gray-300 dark:border-gray-600",children:a?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Starting guest session..."]}):w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z",clipRule:"evenodd"})}),"Continue as Guest"]})}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-2",children:"Notes will be saved locally. Sign in later to sync to cloud."})]}),w.jsxs("div",{className:"mt-6 text-center",children:[w.jsx("button",{onClick:()=>window.open("http://localhost:5174","_blank"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium underline hover:no-underline transition-colors",children:" Access Web Version"}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1",children:"Use Google Notes in your browser"})]})]}),!1]})})},Rf=n=>n?n.includes("googleusercontent.com")?n.replace(/=s\d+/,"=s200"):n:null,Cf=n=>{if(!n)return"U";const e=n.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()},kj=({onSettings:n})=>{const{user:e}=zi(),{isDarkMode:t,toggleTheme:i}=nv();return w.jsxs("header",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-dark-border bg-white dark:bg-dark-card",children:[w.jsxs("div",{className:"flex items-center",children:[w.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center mr-3",children:w.jsx("span",{className:"text-white font-bold text-sm",children:"N"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Google Notes"}),w.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Welcome, ",e?.displayName||"User",e?.isGuest&&w.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300 rounded text-xs font-medium",children:"Guest"})]})]})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:t?"Switch to Light Mode":"Switch to Dark Mode",children:t?w.jsx(vR,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}):w.jsx(gR,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),typeof chrome<"u"&&chrome.runtime&&!window.location.protocol.startsWith("http")&&w.jsx("button",{onClick:()=>window.open("http://localhost:5174","_blank"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Open Web Version",children:w.jsx(cm,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),w.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Settings",children:w.jsx(_R,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),w.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center overflow-hidden",children:Rf(e?.photoURL)?w.jsx("img",{src:Rf(e?.photoURL),alt:"Profile",className:"w-8 h-8 rounded-full object-cover",onError:a=>{a.currentTarget.style.display="none",a.currentTarget.parentElement.innerHTML=`<span class="text-white text-xs font-medium">${Cf(e?.displayName)}</span>`}}):w.jsx("span",{className:"text-white text-xs font-medium",children:Cf(e?.displayName)})})]})]})};class sr{static SHARED_NOTES_COLLECTION="sharedNotes";static generateShareId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}static async shareNote(e,t,i){try{const a=this.generateShareId(),l={noteId:e.id,shareId:a,shareType:t.type,createdAt:new Date,expiresAt:t.expiresAt,title:e.title,description:e.description,color:e.color,ownerName:i,ownerEmail:e.userId},u=gr(gn,this.SHARED_NOTES_COLLECTION,a);return await Vx(u,{...l,createdAt:Ey(),expiresAt:t.expiresAt?new Date(t.expiresAt):null}),a}catch(a){throw console.error("Error sharing note:",a),new Error("Failed to share note")}}static async getSharedNote(e){try{const t=gr(gn,this.SHARED_NOTES_COLLECTION,e),i=await cc(t);if(!i.exists())return null;const a=i.data();return a.expiresAt&&new Date(a.expiresAt.toDate())<new Date?(await this.unshareNote(e),null):{id:i.id,...a,createdAt:a.createdAt.toDate(),expiresAt:a.expiresAt?a.expiresAt.toDate():void 0}}catch(t){throw console.error("Error getting shared note:",t),new Error("Failed to get shared note")}}static async unshareNote(e){try{const t=gr(gn,this.SHARED_NOTES_COLLECTION,e);await K_(t)}catch(t){throw console.error("Error unsharing note:",t),new Error("Failed to unshare note")}}static async getUserSharedNotes(e){try{const t=F_(Tf(gn,this.SHARED_NOTES_COLLECTION),q_("ownerEmail","==",e)),i=await H_(t),a=[];return i.forEach(l=>{const u=l.data();if(u.expiresAt&&new Date(u.expiresAt.toDate())<new Date){this.unshareNote(l.id);return}a.push({id:l.id,...u,createdAt:u.createdAt.toDate(),expiresAt:u.expiresAt?u.expiresAt.toDate():void 0})}),a}catch(t){throw console.error("Error getting user shared notes:",t),new Error("Failed to get shared notes")}}static generateShareUrl(e){return`http://localhost:5174/share/${e}`}static async updateShareType(e,t){try{const i=gr(gn,this.SHARED_NOTES_COLLECTION,e);await _c(i,{shareType:t})}catch(i){throw console.error("Error updating share type:",i),new Error("Failed to update share type")}}static async joinCommunity(e,t){try{const i=gr(gn,this.SHARED_NOTES_COLLECTION,e),a=await cc(i);if(!a.exists())throw new Error("Shared note not found");const l=a.data();if((l.members||[]).some(f=>f.email===t.email))return;await _c(i,{members:jx({...t,joinedAt:Ey()}),memberCount:(l.memberCount||0)+1,isCommunity:!0})}catch(i){throw console.error("Error joining community:",i),new Error("Failed to join community note")}}static async leaveCommunity(e,t){try{const i=gr(gn,this.SHARED_NOTES_COLLECTION,e),a=await cc(i);if(!a.exists())throw new Error("Shared note not found");const l=a.data(),d=(l.members||[]).find(f=>f.email===t);d&&await _c(i,{members:zx(d),memberCount:Math.max(0,(l.memberCount||1)-1)})}catch(i){throw console.error("Error leaving community:",i),new Error("Failed to leave community note")}}static async getCommunityNote(e){try{const t=await this.getSharedNote(e);if(!t)return null;const i=gr(gn,this.SHARED_NOTES_COLLECTION,e),l=(await cc(i)).data();return{...t,isCommunity:l?.isCommunity||!1,members:l?.members||[],memberCount:l?.memberCount||0}}catch(t){throw console.error("Error getting community note:",t),new Error("Failed to get community note")}}static canAccessPrivateNote(e,t){return e.shareType==="public"?!0:!!t}}const Vj=({note:n,isOpen:e,onClose:t})=>{const{user:i}=zi(),[a,l]=B.useState("public"),[u,d]=B.useState(""),[f,p]=B.useState(!1),[_,b]=B.useState(!1),[A,x]=B.useState(""),[O,L]=B.useState(!1);if(B.useEffect(()=>{if(e&&n.isShared&&n.shareId){l(n.shareType||"public");const j=sr.generateShareUrl(n.shareId);d(j)}else e&&(l("public"),d(""),b(!1),x(""))},[e,n]),!e)return null;const N=async()=>{if(i)try{p(!0),x("");let j;if(n.isShared&&n.shareId)j=n.shareId,await sr.updateShareType(j,a);else{const ye={type:a};j=await sr.shareNote(n,ye,i.displayName||i.email)}if(O){const ye={id:i.id||i.email,email:i.email,displayName:i.displayName||i.email,photoURL:i.photoURL,joinedAt:new Date,role:"owner"};await sr.joinCommunity(j,ye)}const oe=sr.generateShareUrl(j);d(oe)}catch(j){x("Failed to create share link. Please try again."),console.error("Share error:",j)}finally{p(!1)}},K=async()=>{try{await navigator.clipboard.writeText(u),b(!0),setTimeout(()=>b(!1),2e3)}catch(j){console.error("Failed to copy:",j)}},H=()=>{window.open(u,"_blank")};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:w.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-lg shadow-xl w-full max-w-md",children:[w.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-600",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(kc,{className:"h-5 w-5 text-blue-500"}),w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share Note"})]}),w.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:w.jsx(dm,{className:"h-5 w-5 text-gray-500"})})]}),w.jsxs("div",{className:"p-6 space-y-6",children:[w.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[w.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-1",children:n.title||"Untitled"}),w.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:n.description||"No description"})]}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Share Type"}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("button",{onClick:()=>l("public"),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${a==="public"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(rv,{className:"h-5 w-5 text-blue-500"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Public"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Anyone with the link can view this note"})]})]})}),w.jsx("button",{onClick:()=>l("private"),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${a==="private"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(hm,{className:"h-5 w-5 text-orange-500"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Private"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Only logged-in users can view this note"})]})]})})]})]}),w.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(Nl,{className:"h-5 w-5 text-blue-500"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Enable Community"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Allow users to join and collaborate on this note"})]})]}),w.jsx("button",{onClick:()=>L(!O),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${O?"bg-blue-500":"bg-gray-200 dark:bg-gray-600"}`,children:w.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${O?"translate-x-6":"translate-x-1"}`})})]}),A&&w.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:w.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:A})}),u?w.jsxs("div",{className:"space-y-3",children:[w.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Share Link"}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("input",{type:"text",value:u,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg text-sm"}),w.jsxs("button",{onClick:K,className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center space-x-1",children:[_?w.jsx(dj,{className:"h-4 w-4"}):w.jsx(mj,{className:"h-4 w-4"}),w.jsx("span",{className:"text-sm",children:_?"Copied!":"Copy"})]})]}),!window.location.protocol.startsWith("http")&&w.jsxs("button",{onClick:H,className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[w.jsx(cm,{className:"h-4 w-4"}),w.jsx("span",{children:"Open in Browser"})]})]}):w.jsxs("button",{onClick:N,disabled:f,className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors flex items-center justify-center space-x-2",children:[w.jsx(kc,{className:"h-4 w-4"}),w.jsx("span",{children:f?"Creating Share Link...":"Create Share Link"})]})]})]})})},bR=({members:n,maxVisible:e=3})=>{const[t,i]=B.useState(!1);if(!n||n.length===0)return null;const a=[...n].sort((p,_)=>new Date(_.joinedAt).getTime()-new Date(p.joinedAt).getTime()),l=a.slice(0,e),u=Math.max(0,a.length-e),d=p=>p.split(" ").map(_=>_.charAt(0).toUpperCase()).join("").slice(0,2),f=p=>{const _=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500"],b=p.length%_.length;return _[b]};return w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"flex items-center -space-x-2",children:[l.map((p,_)=>w.jsx("div",{className:`
              w-8 h-8 rounded-full border-2 border-white dark:border-gray-800 
              flex items-center justify-center text-white text-xs font-medium
              ${f(p.displayName)}
              shadow-sm hover:scale-110 transition-transform cursor-pointer
            `,title:`${p.displayName} (${p.role})`,style:{zIndex:e-_},children:p.photoURL?w.jsx("img",{src:p.photoURL,alt:p.displayName,className:"w-full h-full rounded-full object-cover"}):d(p.displayName)},p.id)),u>0&&w.jsxs("button",{onClick:()=>i(!0),className:`
              w-8 h-8 rounded-full border-2 border-white dark:border-gray-800
              bg-gray-500 hover:bg-gray-600 text-white text-xs font-medium
              flex items-center justify-center shadow-sm
              hover:scale-110 transition-all cursor-pointer
            `,title:`${u} more member${u!==1?"s":""}`,children:["+",u]})]}),t&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),w.jsxs("div",{className:"absolute bottom-10 right-0 bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-50 p-4 min-w-[280px]",children:[w.jsxs("div",{className:"flex items-center justify-between mb-3",children:[w.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center space-x-2",children:[w.jsx(Nl,{className:"h-4 w-4"}),w.jsxs("span",{children:["Community Members (",n.length,")"]})]}),w.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),w.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map(p=>w.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[w.jsx("div",{className:`
                      w-10 h-10 rounded-full flex items-center justify-center
                      text-white text-sm font-medium ${f(p.displayName)}
                    `,children:p.photoURL?w.jsx("img",{src:p.photoURL,alt:p.displayName,className:"w-full h-full rounded-full object-cover"}):d(p.displayName)}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:p.displayName}),p.role==="owner"&&w.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:"Owner"})]}),w.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Joined ",new Date(p.joinedAt).toLocaleDateString()]})]})]},p.id))})]})]})]})},Oj={yellow:"bg-note-yellow border-yellow-300",blue:"bg-note-blue border-blue-300",green:"bg-note-green border-green-300",pink:"bg-note-pink border-pink-300",purple:"bg-note-purple border-purple-300",orange:"bg-note-orange border-orange-300"},Pj=({note:n,onEdit:e,animationDelay:t=0})=>{const{updateNote:i,deleteNote:a}=th(),[l,u]=B.useState(!1),[d,f]=B.useState(!1),[p,_]=B.useState(!1),b=async()=>{try{await i(n.id,{isPinned:!n.isPinned})}catch(N){console.error("Error pinning note:",N)}},A=async()=>{if(confirm("Are you sure you want to delete this note?"))try{f(!0),await a(n.id)}catch(N){console.error("Error deleting note:",N),f(!1)}},x=()=>{e(n),u(!1)},O=()=>{_(!0),u(!1)},L=(N,K=100)=>N.length<=K?N:N.slice(0,K)+"...";return w.jsxs("div",{className:`
        relative p-4 rounded-lg border-2 transition-all duration-200 hover:shadow-md
        ${Oj[n.color]}
        ${d?"opacity-50 pointer-events-none":""}
        animate-fade-in
      `,style:{animationDelay:`${t}s`},children:[w.jsxs("div",{className:"absolute top-2 right-2 flex items-center space-x-1",children:[w.jsx("button",{onClick:b,className:`p-1.5 hover:bg-white/50 dark:hover:bg-black/20 rounded-full transition-colors ${n.isPinned?"bg-white/30 dark:bg-black/10":""}`,title:n.isPinned?"Unpin note":"Pin note",children:w.jsx(pR,{className:`h-4 w-4 text-gray-600 ${n.isPinned?"fill-current":""}`})}),w.jsx("button",{onClick:O,className:"p-1.5 hover:bg-white/50 dark:hover:bg-black/20 rounded-full transition-colors",title:"Share note",children:w.jsx(kc,{className:"h-4 w-4 text-gray-600"})}),w.jsx("button",{onClick:()=>u(!l),className:"p-1.5 hover:bg-white/50 dark:hover:bg-black/20 rounded-full transition-colors",title:"More options",children:w.jsx(Ej,{className:"h-4 w-4 text-gray-600"})}),l&&w.jsxs("div",{className:"absolute right-0 top-8 bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 py-2 min-w-[220px]",children:[w.jsx("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:w.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300",children:[w.jsx(mR,{className:"h-4 w-4"}),w.jsx("span",{className:"font-medium text-sm",children:"Note Details"})]})}),w.jsxs("div",{className:"px-3 py-3",children:[w.jsxs("div",{className:"flex items-center space-x-2 mb-1 text-gray-600 dark:text-gray-400",children:[w.jsx(hj,{className:"h-4 w-4"}),w.jsx("span",{className:"font-medium text-sm",children:"Created:"})]}),w.jsxs("div",{className:"ml-6 text-left text-gray-700 dark:text-gray-300 text-sm",children:[new Date(n.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}).replace(",","-")," ",new Date(n.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase()]})]}),w.jsxs("div",{className:"px-3 py-3",children:[w.jsxs("div",{className:"flex items-center space-x-2 mb-1 text-gray-600 dark:text-gray-400",children:[w.jsx(fj,{className:"h-4 w-4"}),w.jsx("span",{className:"font-medium text-sm",children:"Updated:"})]}),w.jsxs("div",{className:"ml-6 text-left text-gray-700 dark:text-gray-300 text-sm",children:[new Date(n.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}).replace(",","-")," ",new Date(n.updatedAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase()]})]}),w.jsx("div",{className:"px-3 py-3 border-b border-gray-200 dark:border-gray-600",children:w.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[w.jsxs("span",{children:["Characters: ",(n.title+(n.description||"")).length]}),w.jsxs("span",{children:["Words: ",(n.title+" "+(n.description||"")).trim().split(/\s+/).length]})]})}),n.isCommunity&&w.jsxs("div",{className:"px-3 py-3 border-b border-gray-200 dark:border-gray-600",children:[w.jsxs("div",{className:"flex items-center space-x-2 mb-2 text-gray-600 dark:text-gray-400",children:[w.jsx(Nl,{className:"h-4 w-4"}),w.jsx("span",{className:"font-medium text-sm",children:"Community Note"})]}),w.jsxs("div",{className:"ml-6 text-gray-700 dark:text-gray-300 text-sm",children:[n.memberCount||0," member",(n.memberCount||0)!==1?"s":""]})]}),w.jsxs("button",{onClick:A,className:"w-full px-3 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center text-red-600 transition-colors",children:[w.jsx(Ij,{className:"h-4 w-4 mr-3"}),w.jsx("span",{className:"text-sm font-medium",children:"Delete Note"})]})]})]}),w.jsxs("div",{className:"pr-20 cursor-pointer text-left",onClick:x,children:[w.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-900 mb-2 leading-tight text-left",children:n.title||"Untitled"}),n.description&&w.jsx("p",{className:"text-gray-700 dark:text-gray-800 text-sm leading-relaxed mb-3 text-left",children:L(n.description)}),w.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-700 text-left",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("span",{children:new Date(n.updatedAt).toLocaleDateString()}),n.isCommunity&&n.memberCount&&w.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 dark:bg-blue-900/20 px-2 py-1 rounded-full",children:[w.jsx(Nl,{className:"h-3 w-3 text-blue-600"}),w.jsx("span",{className:"font-medium text-blue-600",children:n.memberCount})]})]}),w.jsxs("div",{className:"flex items-center space-x-3",children:[n.isCommunity&&n.communityMembers&&n.communityMembers.length>0&&w.jsx(bR,{members:n.communityMembers}),n.isPinned&&w.jsx("span",{className:"bg-white/60 dark:bg-black/20 px-2 py-1 rounded-full font-medium",children:"Pinned"})]})]})]}),w.jsx(Vj,{note:n,isOpen:p,onClose:()=>_(!1)})]})},Mj=({notes:n,onEditNote:e})=>w.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map((t,i)=>w.jsx(Pj,{note:t,onEdit:e,animationDelay:i*.05},t.id))}),Lj=({onClick:n})=>w.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-dark-border bg-white dark:bg-dark-card",children:w.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors shadow-sm hover:shadow-md animate-scale-in",children:[w.jsx(Tj,{className:"h-5 w-5 mr-2"}),"Add New Note"]})}),PT=[{value:"yellow",label:"Yellow",bg:"bg-note-yellow"},{value:"blue",label:"Blue",bg:"bg-note-blue"},{value:"green",label:"Green",bg:"bg-note-green"},{value:"pink",label:"Pink",bg:"bg-note-pink"},{value:"purple",label:"Purple",bg:"bg-note-purple"},{value:"orange",label:"Orange",bg:"bg-note-orange"}],Uj=({note:n,onClose:e})=>{const{createNote:t,updateNote:i}=th(),[a,l]=B.useState(""),[u,d]=B.useState(""),[f,p]=B.useState("yellow"),[_,b]=B.useState(!1),[A,x]=B.useState(!1),[O,L]=B.useState(!1),N=!!n;B.useEffect(()=>{n?(l(n.title),d(n.description),p(n.color),b(n.isPinned)):(l(""),d(""),p("yellow"),b(!1))},[n]);const K=async()=>{if(!a.trim()&&!u.trim()){e();return}try{if(x(!0),N&&n){console.log(" Updating note:",{noteId:n.id,updates:{title:a.trim(),description:u.trim(),color:f,isPinned:_}});const j={title:a.trim(),description:u.trim(),color:f,isPinned:_};await i(n.id,j),console.log(" Note updated successfully")}else{console.log(" Creating new note:",{title:a.trim(),description:u.trim(),color:f,isPinned:_});const j={title:a.trim(),description:u.trim(),color:f,isPinned:_};await t(j),console.log(" Note created successfully")}e()}catch(j){console.error(" Error saving note:",j),alert(`Failed to ${N?"update":"create"} note. Please try again.`)}finally{x(!1)}},H=j=>{j.key==="Escape"?e():j.key==="Enter"&&(j.metaKey||j.ctrlKey)&&K()};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:`w-full max-w-md bg-white dark:bg-dark-card rounded-lg shadow-xl border-l-4 animate-scale-in ${PT.find(j=>j.value===f)?.bg||"bg-note-yellow"}`,onKeyDown:H,children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:N?"Edit Note":"New Note"}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("button",{onClick:()=>b(!_),className:`p-2 rounded-lg transition-colors ${_?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:_?"Unpin note":"Pin note",children:w.jsx(pR,{className:"h-4 w-4"})}),w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>L(!O),className:"p-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"Change color",children:w.jsx(wj,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),O&&w.jsx("div",{className:"absolute right-0 top-12 bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-2 z-10",children:w.jsx("div",{className:"grid grid-cols-3 gap-2",children:PT.map(j=>w.jsx("button",{onClick:()=>{p(j.value),L(!1)},className:`w-8 h-8 rounded-lg border-2 transition-transform hover:scale-110 ${j.bg} ${f===j.value?"border-gray-800 dark:border-white":"border-gray-300 dark:border-gray-600"}`,title:j.label},j.value))})})]}),w.jsx("button",{onClick:e,className:"p-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:w.jsx(dm,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})]})]}),w.jsxs("div",{className:"p-4 space-y-4",children:[w.jsx("input",{type:"text",placeholder:"Note title...",value:a,onChange:j=>l(j.target.value),className:"w-full text-lg font-semibold bg-transparent text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 border-none outline-none resize-none",autoFocus:!0}),w.jsx("textarea",{placeholder:"Write your note here...",value:u,onChange:j=>d(j.target.value),rows:6,className:"w-full bg-transparent text-gray-700 dark:text-gray-300 placeholder-gray-500 dark:placeholder-gray-400 border-none outline-none resize-none"})]}),w.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg",children:[w.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:N?"Press Cmd+Enter to save":"Press Cmd+Enter to create"}),w.jsxs("button",{onClick:K,disabled:A,className:"flex items-center px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg font-medium transition-colors",children:[A?w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):w.jsx(yR,{className:"h-4 w-4 mr-2"}),N?"Save":"Create"]})]})]})})},jj=()=>{const{searchQuery:n,setSearchQuery:e}=th(),t=()=>{e("")};return w.jsx("div",{className:"relative mb-3",children:w.jsxs("div",{className:"relative",children:[w.jsx(Aj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),w.jsx("input",{type:"text",placeholder:"Search notes...",value:n,onChange:i=>e(i.target.value),className:"w-full pl-10 pr-10 py-2 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-dark-card text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n&&w.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-full transition-colors",children:w.jsx(dm,{className:"h-3 w-3 text-gray-400"})})]})})},MT={all:{bg:"bg-gray-100 dark:bg-gray-700",border:"border-gray-300 dark:border-gray-600",label:"All"},yellow:{bg:"bg-note-yellow",border:"border-yellow-300",label:"Yellow"},blue:{bg:"bg-note-blue",border:"border-blue-300",label:"Blue"},green:{bg:"bg-note-green",border:"border-green-300",label:"Green"},pink:{bg:"bg-note-pink",border:"border-pink-300",label:"Pink"},purple:{bg:"bg-note-purple",border:"border-purple-300",label:"Purple"},orange:{bg:"bg-note-orange",border:"border-orange-300",label:"Orange"}},zj=()=>{const{filterColor:n,setFilterColor:e}=th();return w.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[w.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap mr-2",children:"Filter:"}),Object.keys(MT).map(t=>{const i=MT[t],a=n===t;return w.jsx("button",{onClick:()=>e(t),className:`
              px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all
              ${a?`${i.bg} ${i.border} border-2 text-gray-800 dark:text-gray-200`:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}
            `,children:i.label},t)})]})},Bj=({onClose:n})=>{const{user:e,signOut:t}=zi(),{isDarkMode:i,toggleTheme:a}=nv(),l=async()=>{try{await t(),n()}catch(u){console.error("Error signing out:",u)}};return w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:w.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-dark-card rounded-lg shadow-xl animate-scale-in",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-600",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Settings"}),w.jsx("button",{onClick:n,className:"p-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:w.jsx(dm,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})]}),w.jsxs("div",{className:"p-4 space-y-4",children:[w.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[w.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center overflow-hidden",children:Rf(e?.photoURL)?w.jsx("img",{src:Rf(e?.photoURL),alt:"Profile",className:"w-12 h-12 rounded-full object-cover",onError:u=>{u.currentTarget.style.display="none",u.currentTarget.parentElement.innerHTML=`<span class="text-white text-sm font-medium">${Cf(e?.displayName)}</span>`}}):w.jsx("span",{className:"text-white text-sm font-medium",children:Cf(e?.displayName)})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:e?.displayName||"Anonymous User"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e?.email})]})]}),w.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[i?w.jsx(gR,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):w.jsx(vR,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),w.jsx("span",{className:"text-gray-800 dark:text-white",children:i?"Dark Mode":"Light Mode"})]}),w.jsx("button",{onClick:a,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i?"bg-blue-500":"bg-gray-300"}`,children:w.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]}),!window.location.protocol.startsWith("http")&&w.jsxs("button",{onClick:()=>window.open("http://localhost:5174","_blank"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors text-left",children:[w.jsx(cm,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-800 dark:text-white",children:"Web Version"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Open Google Notes in browser"})]})]}),w.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors text-left",children:[w.jsx(mR,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-800 dark:text-white",children:"About"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Google Notes Extension v1.0.0"})]})]}),w.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-colors text-left",children:[w.jsx(vj,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-800 dark:text-white",children:"Source Code"}),w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View on GitHub"})]})]})]}),w.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-600 space-y-3",children:[e?.isGuest&&w.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Sign in to sync your notes"}),w.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:"Your notes are currently saved locally only"})]}),w.jsx("button",{onClick:()=>{l()},className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md font-medium transition-colors",children:"Sign In"})]})}),w.jsxs("button",{onClick:l,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[w.jsx(bj,{className:"h-4 w-4"}),w.jsx("span",{children:e?.isGuest?"Exit Guest Mode":"Sign Out"})]})]})]})})},Fj=()=>{const{user:n}=zi(),{notes:e,searchQuery:t,filterColor:i,isLoading:a,error:l}=th(),{isDarkMode:u}=nv(),[d,f]=B.useState(!1),[p,_]=B.useState(null),[b,A]=B.useState(!1),O=e.filter(H=>{const j=t===""||H.title.toLowerCase().includes(t.toLowerCase())||H.description.toLowerCase().includes(t.toLowerCase()),oe=i==="all"||H.color===i;return j&&oe}).sort((H,j)=>H.isPinned&&!j.isPinned?-1:!H.isPinned&&j.isPinned?1:new Date(j.updatedAt).getTime()-new Date(H.updatedAt).getTime()),L=()=>{_(null),f(!0)},N=H=>{_(H),f(!0)},K=()=>{f(!1),_(null)};return w.jsxs("div",{className:`h-full flex flex-col bg-gray-50 dark:bg-dark-bg transition-colors ${u?"dark":""}`,children:[w.jsx(kj,{onSettings:()=>A(!0)}),w.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[w.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-dark-border",children:[w.jsx(jj,{}),w.jsx(zj,{})]}),w.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[n?.isGuest&&w.jsx("div",{className:"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("p",{className:"text-orange-800 dark:text-orange-200 text-sm font-medium",children:" Guest Mode"}),w.jsx("p",{className:"text-orange-600 dark:text-orange-300 text-xs mt-1",children:"Notes are saved locally. Sign in to sync across devices."})]}),w.jsx("button",{onClick:()=>A(!0),className:"px-3 py-1.5 bg-orange-500 hover:bg-orange-600 text-white text-xs rounded-md font-medium transition-colors",children:"Sign In"})]})}),l&&w.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded-lg",children:w.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:l})}),a?w.jsxs("div",{className:"flex items-center justify-center py-8",children:[w.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),w.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading notes..."})]}):O.length===0?w.jsx("div",{className:"text-center py-8",children:w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:t||i!=="all"?"No notes match your current filter":"No notes yet. Create your first note!"})}):w.jsx(Mj,{notes:O,onEditNote:N})]}),w.jsx(Lj,{onClick:L})]}),d&&w.jsx(Uj,{note:p,onClose:K}),b&&w.jsx(Bj,{onClose:()=>A(!1)})]})},qj=()=>w.jsx("div",{className:"flex items-center justify-center h-full bg-white dark:bg-dark-bg",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),Gj=()=>{const{user:n,isLoading:e}=zi();return e?w.jsx(qj,{}):n?w.jsx(Fj,{}):w.jsx(Dj,{})},Hj=({sharedNote:n,onUpdate:e,isOwner:t})=>{const[i,a]=B.useState(!1),[l,u]=B.useState(n.shareType),[d,f]=B.useState(!1);if(!t)return null;const p=async()=>{try{f(!0),await sr.updateShareType(n.shareId,l);const _={...n,shareType:l};e(_),a(!1)}catch(_){console.error("Error updating share type:",_),alert("Failed to update share settings")}finally{f(!1)}};return w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>a(!i),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Share Settings",children:w.jsx(_R,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),i&&w.jsxs("div",{className:"absolute right-0 top-10 bg-white dark:bg-dark-card border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg z-10 p-4 min-w-[250px]",children:[w.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Share Settings"}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("button",{onClick:()=>u("public"),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${l==="public"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(rv,{className:"h-5 w-5 text-green-500"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Public"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Anyone with the link can view"})]})]})}),w.jsx("button",{onClick:()=>u("private"),className:`w-full p-3 rounded-lg border-2 transition-colors text-left ${l==="private"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,children:w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(hm,{className:"h-5 w-5 text-orange-500"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Private"}),w.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Login required to view"})]})]})})]}),w.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-600",children:[w.jsx("button",{onClick:()=>{u(n.shareType),a(!1)},className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"}),w.jsxs("button",{onClick:p,disabled:d||l===n.shareType,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white rounded-lg transition-colors flex items-center space-x-2 text-sm",children:[w.jsx(yR,{className:"h-3 w-3"}),w.jsx("span",{children:d?"Saving...":"Save"})]})]})]}),i&&w.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>a(!1)})]})},Kj=({sharedNote:n,isCommunity:e=!1})=>{const i=e?{icon:Nl,color:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800",text:"Community",description:"Community members can view and contribute"}:n.shareType==="public"?{icon:rv,color:"text-green-500",bgColor:"bg-green-100 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",text:"Public",description:"Anyone with the link can view"}:{icon:hm,color:"text-orange-500",bgColor:"bg-orange-100 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",text:"Private",description:"Login required to view"},a=i.icon;return w.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-1.5 rounded-full border ${i.bgColor} ${i.borderColor}`,children:[w.jsx(a,{className:`h-4 w-4 ${i.color}`}),w.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i.text})]})},Qj=({shareId:n,className:e=""})=>{const{user:t}=zi(),[i,a]=B.useState(null),[l,u]=B.useState(!0),[d,f]=B.useState(!1),[p,_]=B.useState("");B.useEffect(()=>{b()},[n]);const b=async()=>{try{u(!0);const N=await sr.getCommunityNote(n);a(N)}catch(N){console.error("Error loading community data:",N),_("Failed to load community data")}finally{u(!1)}},A=async()=>{if(!(!t||!i))try{f(!0),_("");const N={id:t.id||t.email,email:t.email,displayName:t.displayName||t.email,photoURL:t.photoURL,joinedAt:new Date,role:"member"};await sr.joinCommunity(n,N),await b()}catch(N){console.error("Error joining community:",N),_("Failed to join community")}finally{f(!1)}},x=async()=>{if(!(!t||!i))try{f(!0),_(""),await sr.leaveCommunity(n,t.email),await b()}catch(N){console.error("Error leaving community:",N),_("Failed to leave community")}finally{f(!1)}};if(l)return w.jsxs("div",{className:`flex items-center space-x-2 ${e}`,children:[w.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),w.jsx("span",{className:"text-sm text-gray-500",children:"Loading community..."})]});if(!i||!i.isCommunity)return null;const O=t&&i.members.some(N=>N.email===t.email),L=i.members.find(N=>N.email===t?.email);return w.jsxs("div",{className:`bg-white dark:bg-dark-card rounded-lg border border-gray-200 dark:border-gray-600 p-4 ${e}`,children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(Nl,{className:"h-5 w-5 text-blue-500"}),w.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Community (",i.memberCount,")"]})]}),t&&w.jsx("div",{children:O?w.jsxs("button",{onClick:x,disabled:d||L?.role==="owner",className:"flex items-center space-x-1 px-3 py-1 text-sm bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors disabled:opacity-50",children:[w.jsx(xj,{className:"h-3 w-3"}),w.jsx("span",{children:L?.role==="owner"?"Owner":"Leave"})]}):w.jsxs("button",{onClick:A,disabled:d,className:"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors disabled:opacity-50",children:[w.jsx(Rj,{className:"h-3 w-3"}),w.jsx("span",{children:d?"Joining...":"Join"})]})})]}),p&&w.jsx("div",{className:"mb-4 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-sm text-red-600 dark:text-red-400",children:p}),w.jsx("div",{className:"space-y-2",children:i.members.length===0?w.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No members yet. Be the first to join!"}):i.members.map(N=>w.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[w.jsx("div",{className:"flex-shrink-0",children:N.photoURL?w.jsx("img",{src:N.photoURL,alt:N.displayName,className:"h-8 w-8 rounded-full"}):w.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-sm font-medium",children:N.displayName.charAt(0).toUpperCase()})}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:N.displayName}),N.role==="owner"&&w.jsx("div",{title:"Owner",children:w.jsx(gj,{className:"h-3 w-3 text-yellow-500"})})]}),w.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Joined ",new Date(N.joinedAt).toLocaleDateString()]})]})]},N.id))}),!t&&w.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-center",children:[w.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"Join this community to collaborate on this note!"}),w.jsx("button",{onClick:()=>{const N="http://localhost:5174";window.location.href=N},className:"text-sm px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",children:"Sign In to Join"})]})]})},$j={yellow:"bg-note-yellow border-yellow-300",blue:"bg-note-blue border-blue-300",green:"bg-note-green border-green-300",pink:"bg-note-pink border-pink-300",purple:"bg-note-purple border-purple-300",orange:"bg-note-orange border-orange-300"},Yj=()=>{const{shareId:n}=VC(),{user:e}=zi(),[t,i]=B.useState(null),[a,l]=B.useState(!0),[u,d]=B.useState(""),[f,p]=B.useState(!1),[_,b]=B.useState(!1),[A,x]=B.useState({name:"",canInstall:!1});B.useEffect(()=>{if(!n){d("Invalid share link"),l(!1);return}const K=navigator.userAgent;let H="Browser",j=!1;K.includes("Chrome")&&!K.includes("Edg")?(H="Chrome",j=!0):K.includes("Firefox")?(H="Firefox",j=!0):K.includes("Safari")&&!K.includes("Chrome")?(H="Safari",j=!0):K.includes("Edg")&&(H="Edge",j=!0),x({name:H,canInstall:j}),O()},[n,e]);const O=async()=>{try{l(!0),d("");let K=await sr.getSharedNote(n),H=!1;if(!K){const j=await sr.getCommunityNote(n);K=j,H=j?.isCommunity||!1}if(!K){d("This note is no longer available or has expired.");return}if(!sr.canAccessPrivateNote(K,e?.email)){p(!0),d("This is a private note. Please log in to view it.");return}i(K),b(H),p(!1)}catch(K){console.error("Error loading shared note:",K),d("Failed to load the shared note. Please try again.")}finally{l(!1)}},L=()=>{const K="http://localhost:5174";window.location.href=K},N=()=>{let K="";switch(A.name){case"Chrome":K="https://chrome.google.com/webstore/category/extensions";break;case"Firefox":K="https://addons.mozilla.org/firefox/";break;case"Safari":K="https://apps.apple.com/us/story/id1377753262";break;case"Edge":K="https://microsoftedge.microsoft.com/addons/category/Edge-Extensions";break;default:K="https://chrome.google.com/webstore/category/extensions"}window.open(K,"_blank")};return a?w.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading shared note..."})]})}):u?w.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg flex items-center justify-center p-4",children:w.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-dark-card rounded-lg shadow-lg p-6 text-center",children:[w.jsx("div",{className:"mb-4",children:f?w.jsx(hm,{className:"h-12 w-12 text-orange-500 mx-auto"}):w.jsx(kc,{className:"h-12 w-12 text-gray-400 mx-auto"})}),w.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:f?"Login Required":"Note Not Found"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:u}),w.jsxs("button",{onClick:L,className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors flex items-center justify-center space-x-2",children:[w.jsx(cm,{className:"h-4 w-4"}),w.jsx("span",{children:f?"Go to App & Login":"Go to App"})]})]})}):t?w.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-bg",children:[w.jsx("header",{className:"bg-white dark:bg-dark-card shadow-sm border-b border-gray-200 dark:border-gray-700",children:w.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Go to Google Notes",children:w.jsx(cj,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx(kc,{className:"h-6 w-6 text-blue-500"}),w.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Shared Note"})]})]}),w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx(Kj,{sharedNote:t,isCommunity:_}),e&&t.ownerEmail===e.email&&w.jsx(Hj,{sharedNote:t,onUpdate:K=>i(K),isOwner:!0}),A.canInstall&&w.jsxs("button",{onClick:N,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors flex items-center space-x-2",children:[w.jsx(pj,{className:"h-4 w-4"}),w.jsxs("span",{children:["Get ",A.name," Extension"]})]})]})]})}),w.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:`
            p-6 rounded-lg border-2 shadow-sm
            ${$j[t.color]}
          `,children:[w.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-900 mb-4",children:t.title||"Untitled"}),t.description&&w.jsx("div",{className:"prose prose-gray dark:prose-invert max-w-none",children:w.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-700 dark:text-gray-800 leading-relaxed",children:t.description})}),w.jsx("div",{className:"mt-6 pt-4 border-t border-gray-300 dark:border-gray-600 text-sm text-gray-600 dark:text-gray-700",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsxs("span",{children:["Shared by ",w.jsx("strong",{children:t.ownerName})]}),w.jsx("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),_&&"members"in t&&t.members&&w.jsx(bR,{members:t.members})]})})]}),_&&n&&w.jsx(Qj,{shareId:n}),w.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-lg border border-gray-200 dark:border-gray-700 p-6 text-center",children:[w.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Create Your Own Notes"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Start organizing your thoughts with Google Notes. Create, share, and collaborate on notes easily."}),w.jsx("button",{onClick:L,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-medium",children:"Get Started"})]})]})})]}):w.jsx(QC,{to:"/",replace:!0})};function Xj(){return w.jsx(sj,{children:w.jsx(ij,{children:w.jsx(_N,{children:w.jsxs(YC,{children:[w.jsx(Fp,{path:"/share/:shareId",element:w.jsx(Yj,{})}),w.jsx(Fp,{path:"/*",element:w.jsx(oj,{children:w.jsx(Gj,{})})})]})})})})}rC.createRoot(document.getElementById("root")).render(w.jsx(B.StrictMode,{children:w.jsx(Xj,{})}));
